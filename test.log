=== RUN   TestIssue97
2021/09/03 14:05:56.771573 [info] prophet: prophet logger set
2021/09/03 14:05:56.783798 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:05:56.796916 [info] [raftstore]: begin start raftstore
2021/09/03 14:05:56.796930 [info] [raftstore]: begin to start prophet
2021/09/03 14:05:56.796945 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:05:56.797+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:56.797+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:05:56.797+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:05:56.797+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:05:56.798+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3681ms"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:05:56.801+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:05:56.803+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:05:56.805+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:05:56.806+0800","caller":"etcdserver/quota.go:117","msg":"enabled backend quota","quota-name":"v3-applier","quota-size-bytes":8589934592,"quota-size":"8.6 GB"}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:05:56.808+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:56.809+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.302+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:05:57.303+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:05:57.303+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:05:57.303+0800","caller":"api/capability.go:75","msg":"enabled capabilities for version","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:05:57.303+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:05:57.303+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:05:57.303771 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:05:57.304+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:05:57.305594 [info] prophet: start system time monitor 
2021/09/03 14:05:57.305897 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:05:57.306068 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:05:57.306079 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:05:57.306347 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:05:57.306779 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:05:57.306793 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:05:57.308541 [info] prophet: load 0 containers, cost 1.4406ms
2021/09/03 14:05:57.308719 [info] prophet: load 0 resources, cost 162µs
2021/09/03 14:05:57.309382 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:05:57.309393 [info] prophet: client read loop started 
2021/09/03 14:05:57.309394 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:05:57.309413 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:05:57.309388 [info] prophet: client started
2021/09/03 14:05:57.309459 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:05:57.309460 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:05:57.309387 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:57.309498 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649157 deployPath:"not set" 
2021/09/03 14:05:57.309516 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:05:57.309555 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:57.309572 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:05:57.309823 [info] prophet: load 0 jobs
2021/09/03 14:05:57.310165 [info] [raftstore]: create local store with id 1
2021/09/03 14:05:57.310643 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:05:57.310661 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:05:57.310651 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:05:57.310672 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:05:57.310962 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:05:57.313328 [info] prophet: container 1 limit added
2021/09/03 14:05:57.313378 [info] [raftstore]: prophet started
2021/09/03 14:05:57.313424 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:05:57.313443 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:05:57.313445 [info] [raftstore]: raft shards workers started
2021/09/03 14:05:57.313467 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:05:57.313488 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.313431 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:05:57.313506 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.313511 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:05:57.313571 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:05:57.313580 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.313590 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.313+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:05:57.313634 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:05:57.313644 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:05:57.313645 [info] [raftstore]: shards started
2021/09/03 14:05:57.313647 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:05:57.313653 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:05:57.313660 [info] [raftstore]: router started
2021/09/03 14:05:57.313664 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:05:57.313677 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:57.313691 [info] [raftstore]: router event loop task started
2021/09/03 14:05:57.313759 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:57.313770 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:05:57.313820 [info] prophet: new watcher 127.0.0.1:41664 added
2021/09/03 14:05:57.313918 [info] [raftstore]: start init event
2021/09/03 14:05:57.414224 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:05:57.414274 [info] [raftstore]: shard 2 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/09/03 14:05:57.414332 [info] prophet: alloc ids [6] for resource 5 split
2021/09/03 14:05:57.416757 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:05:57.416774 [info] [raftstore]: shard 5 peer 6 begin to create at store 1, peers: [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:05:57.416791 [info] [raftstore]: shard 5 peer 6 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.416796 [info] [raftstore]: shard 5 peer 6 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.416797 [info] [raftstore]: shard 5 peer 6 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:05:57.416849 [info] [raftstore]: shard 5 peer 6 delegate register completed
2021/09/03 14:05:57.416853 [info] [raftstore]: shard 5 peer 6 added, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.416854 [info] [raftstore]: shard 5 peer 6 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.416+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became leader at term 6"}
2021/09/03 14:05:57.416880 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:05:57.416900 [info] [raftstore]: shard 5 peer 6 ********become leader now********
2021/09/03 14:05:57.417025 [info] prophet: resource 2 version changed from 1 to 2
2021/09/03 14:05:57.514217 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:05:57.514242 [info] [raftstore]: shard 5 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 51]]
2021/09/03 14:05:57.514288 [info] prophet: alloc ids [8] for resource 7 split
2021/09/03 14:05:57.516619 [info] [raftstore]: shard 5 update to {ID:5 Start:[107 101 121 50] End:[107 101 121 51] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:05:57.516636 [info] [raftstore]: shard 7 peer 8 begin to create at store 1, peers: [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 5
2021/09/03 14:05:57.516652 [info] [raftstore]: shard 7 peer 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.516656 [info] [raftstore]: shard 7 peer 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.516657 [info] [raftstore]: shard 7 peer 8 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:05:57.516712 [info] [raftstore]: shard 7 peer 8 delegate register completed
2021/09/03 14:05:57.516723 [info] [raftstore]: shard 7 peer 8 added, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.516724 [info] [raftstore]: shard 7 peer 8 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 5"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.516+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 6"}
2021/09/03 14:05:57.516752 [info] [raftstore]: shard 5 new shard added, new shards [{ID:7 Start:[107 101 121 51] End:[] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:05:57.516774 [info] [raftstore]: shard 7 peer 8 ********become leader now********
2021/09/03 14:05:57.516857 [info] prophet: resource 5 version changed from 2 to 3
2021/09/03 14:05:57.528297 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:05:57.528358 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:41662->127.0.0.1:30000: use of closed network connection
2021/09/03 14:05:57.528369 [error] prophet: client read loop stopped
2021/09/03 14:05:57.528565 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:05:57.528598 [info] prophet: coordinator is stopping
2021/09/03 14:05:57.528604 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:05:57.528608 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:05:57.528612 [info] prophet: watcher notifer exited
2021/09/03 14:05:57.528615 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"info","ts":"2021-09-03T14:05:57.528+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:05:57.528625 [info] prophet: metrics are reset
2021/09/03 14:05:57.528692 [info] prophet: background jobs has been stopped
2021/09/03 14:05:57.528616 [info] prophet: patrol resources has been stopped 
2021/09/03 14:05:57.528618 [info] prophet: drive push operator has been stopped 
2021/09/03 14:05:57.528703 [info] prophet: coordinator has been stopped
2021/09/03 14:05:57.528633 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:05:57.528726 [error] prophet: watcher read events failed with EOF
2021/09/03 14:05:57.528753 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:05:57.528726 [info] prophet: watcher notifier stopped
2021/09/03 14:05:57.528769 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:05:57.529+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:05:57.531+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.533+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.533+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:05:57.533033 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:05:57.533052 [info] [transport]: transfer stopped
2021/09/03 14:05:57.533054 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:05:57.533056 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:05:57.533059 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:05:57.533061 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533066 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:05:57.533069 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533070 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533068 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533067 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533073 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533075 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533077 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:05:57.533072 [info] [raftstore]: router event loop task stopped
2021/09/03 14:05:57.533074 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.533076 [info] [transport]: send raft worker stopped
2021/09/03 14:05:57.533092 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:05:57.533111 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:05:57.533140 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:05:57.535530 [info] prophet: prophet logger set
2021/09/03 14:05:57.540672 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:05:57.554551 [info] [raftstore]: begin start raftstore
2021/09/03 14:05:57.554563 [info] [raftstore]: begin to start prophet
2021/09/03 14:05:57.554587 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:05:57.554+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:57.554+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:05:57.554+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:05:57.554+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":true,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"","initial-cluster-state":"new","initial-cluster-token":"","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:05:57.554+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"147.2µs"}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","caller":"etcdserver/server.go:526","msg":"No snapshot found. Recovering WAL from scratch!"}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","caller":"etcdserver/raft.go:483","msg":"restarting local member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","commit-index":20}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 2, commit: 20, applied: 0, lastindex: 20, lastterm: 2]"}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","recovered-remote-peer-id":"93ccda9956d988f4","recovered-remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:57.555+0800","caller":"membership/cluster.go:285","msg":"set cluster version from store","cluster-version":"3.5"}
{"level":"warn","ts":"2021-09-03T14:05:57.556+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:05:57.557+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":16}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"etcdserver/server.go:834","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-id":"6a4ade671189dc2f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:05:57.559+0800","caller":"membership/cluster.go:523","msg":"updated cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","from":"3.5","to":"3.5"}
2021/09/03 14:05:57.629631 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:05:57.756+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:05:57.756+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:05:57.756+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:05:57.756+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 3"}
{"level":"info","ts":"2021-09-03T14:05:57.756+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:05:57.758+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:05:57.758309 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:05:57.758+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:05:57.758+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:05:57.759173 [info] prophet: start system time monitor 
2021/09/03 14:05:57.759352 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:05:57.759542 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:05:57.759553 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:05:57.759782 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:05:57.760349 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:05:57.760369 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:05:57.761169 [info] prophet: load 1 containers, cost 742.3µs
2021/09/03 14:05:57.761390 [info] prophet: load 3 resources, cost 205.7µs
2021/09/03 14:05:57.761815 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:57.761826 [info] prophet: client read loop started 
2021/09/03 14:05:57.761818 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:05:57.761822 [info] prophet: client started
2021/09/03 14:05:57.761850 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:05:57.761852 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:05:57.761870 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:57.761884 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:05:57.761873 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649157 deployPath:"not set" 
2021/09/03 14:05:57.761993 [info] [raftstore]: load local store 1
2021/09/03 14:05:57.762012 [info] [raftstore]: prophet started
2021/09/03 14:05:57.762057 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:05:57.762067 [info] prophet: load 0 jobs
2021/09/03 14:05:57.762074 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:05:57.762076 [info] [raftstore]: raft shards workers started
2021/09/03 14:05:57.762097 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:05:57.762129 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:6 Vote:3 Commit:9} LastIndex:9 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.762136 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:9 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.762147 [info] [raftstore]: shard 2 peer 3 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 6, commit: 9, applied: 9, lastindex: 9, lastterm: 6]"}
2021/09/03 14:05:57.762193 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:05:57.762198 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.762199 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 7"}
2021/09/03 14:05:57.762234 [info] [raftstore]: shard 5 peer 6 begin to create at store 1, peers: [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:05:57.762253 [info] [raftstore]: shard 5 peer 6 init with raft local state {HardState:{Term:6 Vote:6 Commit:9} LastIndex:9 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.762257 [info] [raftstore]: shard 5 peer 6 init raft apply state, state=<{AppliedIndex:8 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.762260 [info] [raftstore]: shard 5 peer 6 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [6], term: 6, commit: 9, applied: 8, lastindex: 9, lastterm: 6]"}
2021/09/03 14:05:57.762291 [info] [raftstore]: shard 5 peer 6 delegate register completed
2021/09/03 14:05:57.762302 [info] [raftstore]: shard 5 peer 6 added, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.762303 [info] [raftstore]: shard 5 peer 6 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgVoteResp from 6 at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became leader at term 7"}
2021/09/03 14:05:57.762329 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:05:57.762331 [info] [raftstore]: shard 7 peer 8 begin to create at store 1, peers: [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:05:57.762343 [info] [raftstore]: shard 7 peer 8 init with raft local state {HardState:{Term:6 Vote:8 Commit:6} LastIndex:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:57.762357 [info] [raftstore]: shard 7 peer 8 init raft apply state, state=<{AppliedIndex:6 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:57.762360 [info] [raftstore]: shard 7 peer 8 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [8], term: 6, commit: 6, applied: 6, lastindex: 6, lastterm: 6]"}
2021/09/03 14:05:57.762388 [info] [raftstore]: shard 7 peer 8 delegate register completed
2021/09/03 14:05:57.762399 [info] [raftstore]: shard 7 peer 8 added, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:57.762400 [info] [raftstore]: shard 7 peer 8 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 7"}
{"level":"info","ts":"2021-09-03T14:05:57.762+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 7"}
2021/09/03 14:05:57.762427 [info] [raftstore]: starts with 3 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:05:57.762435 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:05:57.762436 [info] [raftstore]: shards started
2021/09/03 14:05:57.762444 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:05:57.762452 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:05:57.762467 [info] [raftstore]: router started
2021/09/03 14:05:57.762507 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:57.762581 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:57.762583 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:05:57.762608 [info] [raftstore]: router event loop task started
2021/09/03 14:05:57.762647 [info] prophet: new watcher 127.0.0.1:41676 added
2021/09/03 14:05:57.762706 [info] [raftstore]: start init event
2021/09/03 14:05:57.763824 [info] [raftstore]: shard 5 peer 6 ********become leader now********
2021/09/03 14:05:57.765081 [info] [raftstore]: shard 7 peer 8 ********become leader now********
2021/09/03 14:05:57.862587 [info] [raftstore]: shard 5 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 0 107 101 121 51]
2021/09/03 14:05:57.864001 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:05:57.864059 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:41674->127.0.0.1:30000: use of closed network connection
2021/09/03 14:05:57.864067 [error] prophet: client read loop stopped
2021/09/03 14:05:57.864424 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:05:57.864472 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:05:57.864491 [info] prophet: coordinator stops running 
2021/09/03 14:05:57.864496 [info] prophet: coordinator is stopping
2021/09/03 14:05:57.864497 [info] prophet: coordinator has been stopped
{"level":"info","ts":"2021-09-03T14:05:57.864+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:05:57.864506 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:05:57.864510 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:05:57.864516 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:05:57.864521 [info] prophet: watcher notifer exited
2021/09/03 14:05:57.864529 [info] prophet: metrics are reset
2021/09/03 14:05:57.864547 [info] prophet: background jobs has been stopped
2021/09/03 14:05:57.864575 [info] prophet: watcher notifier stopped
2021/09/03 14:05:57.864593 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:05:57.864576 [error] prophet: watcher read events failed with EOF
2021/09/03 14:05:57.864600 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:05:57.865+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:05:57.867+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.868+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.868+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:05:57.868293 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:05:57.868313 [info] [transport]: transfer stopped
2021/09/03 14:05:57.868322 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:05:57.868324 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:05:57.868328 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:05:57.868335 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868339 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868343 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868345 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868349 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868346 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868349 [info] [transport]: send snapshot worker stopped
2021/09/03 14:05:57.868354 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:05:57.868354 [info] [raftstore]: router event loop task stopped
2021/09/03 14:05:57.868356 [info] [transport]: send raft worker stopped
2021/09/03 14:05:57.868353 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:05:57.868366 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:05:57.868391 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:05:57.868343 [info] [transport]: send snapshot worker stopped
--- PASS: TestIssue97 (1.10s)
=== RUN   TestSyncData
2021/09/03 14:05:57.871579 [info] prophet: prophet logger set
2021/09/03 14:05:57.877688 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:05:57.877837 [info] [raftstore]: start scan gc snap files
2021/09/03 14:05:57.884279 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:05:57.884409 [info] [raftstore]: start scan gc snap files
2021/09/03 14:05:57.890186 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:05:57.890258 [info] [raftstore]: start scan gc snap files
2021/09/03 14:05:57.890290 [info] [raftstore]: begin start raftstore
2021/09/03 14:05:57.890300 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:05:57.890+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:57.890+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:05:57.890+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:05:57.890+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:05:57.891+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3353ms"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:05:57.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:05:57.896+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:05:57.897+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:05:57.899+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
2021/09/03 14:05:57.965403 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:05:58.294+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
2021/09/03 14:05:58.294883 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:05:58.295+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:05:58.295+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:05:58.295+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:05:58.297482 [info] prophet: start system time monitor 
2021/09/03 14:05:58.297878 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:05:58.298021 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:05:58.298036 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:05:58.298266 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:05:58.298778 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:05:58.298797 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:05:58.299195 [info] prophet: load 0 containers, cost 346.4µs
2021/09/03 14:05:58.299428 [info] prophet: load 0 resources, cost 220.6µs
2021/09/03 14:05:58.300013 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:05:58.300024 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:05:58.300025 [info] prophet: client read loop started 
2021/09/03 14:05:58.300026 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:05:58.300018 [info] prophet: client started
2021/09/03 14:05:58.300096 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:05:58.300098 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:05:58.300016 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:58.300118 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649158 deployPath:"not set" 
2021/09/03 14:05:58.300131 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:05:58.300156 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:58.300184 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:05:58.300428 [info] prophet: load 0 jobs
2021/09/03 14:05:58.300748 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:05:58.300782 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:05:58.301335 [info] [raftstore]: create local store with id 1
2021/09/03 14:05:58.301714 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:05:58.301725 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:05:58.301911 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:05:58.303157 [info] prophet: container 1 limit added
2021/09/03 14:05:58.303256 [info] [raftstore]: prophet started
2021/09/03 14:05:58.303287 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:05:58.303307 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:05:58.303309 [info] [raftstore]: raft shards workers started
2021/09/03 14:05:58.303311 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:05:58.303322 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:05:58.303344 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:05:58.303355 [info] [raftstore]: shard 2 change init applied index from 5 to 5
2021/09/03 14:05:58.303360 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:05:58.303361 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:05:58.303417 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:05:58.303423 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:05:58.303431 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:05:58.303+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:05:58.303470 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:05:58.303477 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:05:58.303478 [info] [raftstore]: shards started
2021/09/03 14:05:58.303480 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:05:58.303485 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:05:58.303493 [info] [raftstore]: router started
2021/09/03 14:05:58.303503 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:05:58.303505 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:05:58.303518 [info] [raftstore]: router event loop task started
2021/09/03 14:05:58.303557 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:05:58.303570 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:05:58.303635 [info] prophet: new watcher 127.0.0.1:41688 added
2021/09/03 14:05:58.303670 [info] [raftstore]: start init event
2021/09/03 14:05:58.305303 [info] [raftstore]: begin start raftstore
2021/09/03 14:05:58.305315 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:05:58.305+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:05:58.306+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"cad228270929ed82","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:05:58.306+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.306+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.306+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.306+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
2021/09/03 14:05:58.307662 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:14614787888893259138 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:14614787888893259138 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:05:58.307+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:05:58.309+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.2121ms"}
{"level":"warn","ts":"2021-09-03T14:05:58.810+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:05:59.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:05:59.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:05:59.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:05:59.303562 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:05:59.303577 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:05:59.303594 [info] prophet: watcher notifer exited
2021/09/03 14:05:59.303598 [info] prophet: drive push operator has been stopped 
2021/09/03 14:05:59.303600 [info] prophet: metrics are reset
2021/09/03 14:05:59.303603 [info] prophet: coordinator is stopping
2021/09/03 14:05:59.303605 [info] prophet: background jobs has been stopped
2021/09/03 14:05:59.303601 [info] prophet: patrol resources has been stopped 
2021/09/03 14:05:59.303611 [info] prophet: coordinator has been stopped
2021/09/03 14:05:59.303655 [info] prophet: watcher notifier stopped
2021/09/03 14:05:59.303667 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:05:59.303689 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:05:59.303656 [error] prophet: watcher read events failed with EOF
2021/09/03 14:05:59.303695 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:05:59.303701 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:05:59.303707 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"warn","ts":"2021-09-03T14:05:59.311+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:05:59.311+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:05:59.812+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:05:59.812+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:06:00.194+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:06:00.194+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:06:00.194+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:06:00.194+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 3"}
{"level":"warn","ts":"2021-09-03T14:06:00.313+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:00.794+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:06:00.794+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:06:00.794+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:06:00.794+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 4"}
{"level":"warn","ts":"2021-09-03T14:06:00.813+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:01.314+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:01.695+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:06:01.695+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:01.695+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:01.695+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 5"}
{"level":"warn","ts":"2021-09-03T14:06:01.815+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:02.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:02.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:02.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:02.294+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:02.315+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:02.816+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:03.095+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:03.095+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:03.095+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:03.095+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 7"}
{"level":"warn","ts":"2021-09-03T14:06:03.308+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"cad228270929ed82","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:03.308+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"cad228270929ed82","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:03.317+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:03.818+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309597,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:03.895+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:03.895+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:03.895+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:03.895+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 8"}
{"level":"warn","ts":"2021-09-03T14:06:04.310+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:06:04.310+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:06:04.310+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:06:04.313+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"cad228270929ed82","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:04.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:04.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:04.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft cad228270929ed82 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:04.314+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:04.315+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"cad228270929ed82","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"cad228270929ed82","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"cad228270929ed82","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:04.317+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"cad228270929ed82","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"cad228270929ed82","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"cad228270929ed82","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.318+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.319+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from cad228270929ed82 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:04.795+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:06:04.795+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:06:04.795+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:06:04.795+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 9"}
{"level":"info","ts":"2021-09-03T14:06:04.795+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 1)"}
{"level":"warn","ts":"2021-09-03T14:06:04.810+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309599,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:05.311+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654683309599,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:05.594+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:06:05.594+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.594+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.594+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to cad228270929ed82 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.595+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:06:05.595+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.595+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.595+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 lost leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from cad228270929ed82 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 10"}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:06:05.596+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"6.1916522s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","caller":"traceutil/trace.go:171","msg":"trace[1744130282] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"6.1917075s","start":"2021-09-03T14:05:59.404+0800","end":"2021-09-03T14:06:05.596+0800","steps":["trace[1744130282] 'agreement among raft nodes before linearized reading'  (duration: 6.1916514s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:06:05.596+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:05:59.404+0800","time spent":"6.1917396s","remote":"127.0.0.1:42114","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:06:05.596+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:06:05.596+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:05.597+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:05.597+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"cad228270929ed82","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:05.597+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"cad228270929ed82","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:05.597+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 switched to configuration voters=(10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:06:05.597+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"cad228270929ed82","added-peer-id":"cad228270929ed82","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:05.598+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"cad228270929ed82","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/cad228270929ed82/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:05.598+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:05.598542 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:06:05.599+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:06:05.601171 [info] prophet: start system time monitor 
2021/09/03 14:06:05.601386 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:05.601401 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:05.601404 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:05.601419 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:05.601432 [info] prophet: client started
2021/09/03 14:06:05.601436 [info] prophet: client read loop started 
2021/09/03 14:06:05.601437 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:05.601456 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:05.601481 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649165 deployPath:"not set" 
2021/09/03 14:06:05.601490 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:05.601460 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:05.601525 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:05.601651 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:05.601701 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:05.601712 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:05.623807 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 6.2191936s
2021/09/03 14:06:05.623821 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:05.623823 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:06:05.625283 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:05.625294 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:05.626369 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:05.627263 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:05.627289 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:05.628159 [info] prophet: load 1 containers, cost 775.9µs
2021/09/03 14:06:05.628395 [info] prophet: load 1 resources, cost 224.7µs
2021/09/03 14:06:05.628940 [info] prophet: watcher notifier stopped
2021/09/03 14:06:05.628953 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:05.628959 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:05.629235 [info] prophet: load 0 jobs
2021/09/03 14:06:05.701941 [info] [raftstore]: create local store with id 5
2021/09/03 14:06:05.702402 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:05.704860 [info] prophet: container 5 limit added
2021/09/03 14:06:05.704948 [info] [raftstore]: prophet started
2021/09/03 14:06:05.704962 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:06:05.704999 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:06:05.705008 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:05.705010 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:05.705013 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:05.705014 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:05.705015 [info] [raftstore]: shards started
2021/09/03 14:06:05.705017 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:05.705021 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:06:05.705031 [info] [raftstore]: router started
2021/09/03 14:06:05.705076 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:05.705145 [info] [raftstore]: router event loop task started
2021/09/03 14:06:05.705166 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:05.705169 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:05.705211 [info] prophet: new watcher 127.0.0.1:41742 added
2021/09/03 14:06:05.705301 [info] [raftstore]: start init event
2021/09/03 14:06:05.716821 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:05.716963 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:05.716974 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:05.717004 [info] prophet: new watcher 127.0.0.1:41744 added
2021/09/03 14:06:05.717054 [info] [raftstore]: start init event
2021/09/03 14:06:05.721345 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:05.721457 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:05.721472 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:05.722755 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:06:05.725501 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:05.725515 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:05.725550 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:05.725555 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:05.725558 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:05.726138 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:05.726149 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:06:05.727185 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:06:05.729557 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:06:05.729569 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:06:08.629268 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:08.629279 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:08.630641 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:08.630646 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:06:08.730822 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:08.7307915 +0800 CST m=+11.969729701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:06:08.730848 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:06:08.730922 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.730973 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.731088 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.731102 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:08.731107 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:08.731110 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:08.731113 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.731126 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:06:08.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:06:08.731204 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 145 222 108 245 83 79 71 63 133 177 11 24 132 144 241 59 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.731222 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.731335 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:06:08.731707 [info] [transport]: connected to store 5
2021/09/03 14:06:08.731767 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:08.731783 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:06:08.731805 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.731818 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:08.731820 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:08.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:08.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:08.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:08.731851 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:06:08.731854 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:08.732+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:08.732+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:06:08.732068 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:06:08.733084 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:06:08.733129 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.733160 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.733193 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.733211 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:08.733+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:06:08.733253 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 247 129 115 224 92 111 70 250 163 183 54 101 183 185 232 129 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.733261 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:08.733281 [info] [transport]: connected to store 1
2021/09/03 14:06:08.733388 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:06:08.733437 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:08.733957 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:06:08.734443 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:08.7307915 +0800 CST m=+11.969729701, startAt:2021-09-03 14:06:08.7308386 +0800 CST m=+11.969776801, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 3.5939ms, 
2021/09/03 14:06:08.742775 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:08.769551 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:06:08.769676 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:06:08.769686 [info] [transport]: connected to store 5
2021/09/03 14:06:08.769726 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:08.769743 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
{"level":"info","ts":"2021-09-03T14:06:08.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:08.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:06:08.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:08.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:06:08.769864 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/09/03 14:06:08.824767 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:08.824780 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:06:08.825+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:445c6c58200d2788 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:08.825+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc002ca2000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:08.825880 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:08.969403 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:06:08.969427 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:06:08.969433 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:08.969443 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:08.969465 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:08.969620 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:08.969646 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:08.969675 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:06:08.969703 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(6571477614663069942 10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 switched to configuration voters=(6571477614663069942 10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"5b329412c76c70f6","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"cad228270929ed82","added-peer-id":"5b329412c76c70f6","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.327+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.328+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
2021/09/03 14:06:09.328139 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:10  Member:ID:6571477614663069942 peerURLs:"http://127.0.0.1:50002"  Members:[ID:6571477614663069942 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:14614787888893259138 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:09.328+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.328+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:06:09.328+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:09.328+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:09.329+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.3317ms"}
{"level":"info","ts":"2021-09-03T14:06:09.332+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"5b329412c76c70f6","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:09.332+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:09.332+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:09.332+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 5b329412c76c70f6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:09.334+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:09.335+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.337+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.339+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"5b329412c76c70f6","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"5b329412c76c70f6","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"5b329412c76c70f6","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"cad228270929ed82","to":"5b329412c76c70f6","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.340+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"cad228270929ed82","to":"5b329412c76c70f6","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"5b329412c76c70f6","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:06:09.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 elected leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5b329412c76c70f6","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"5b329412c76c70f6","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 switched to configuration voters=(10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5b329412c76c70f6","added-peer-id":"cad228270929ed82","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 switched to configuration voters=(6571477614663069942 10650127570946328820 14614787888893259138)"}
{"level":"info","ts":"2021-09-03T14:06:09.343+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5b329412c76c70f6","added-peer-id":"5b329412c76c70f6","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:09.344+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"5b329412c76c70f6","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/5b329412c76c70f6/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:09.344+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:09.345003 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:06:09.345+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:06:09.346402 [info] prophet: start system time monitor 
2021/09/03 14:06:09.346824 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:09.346840 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:09.346844 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:09.346875 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:09.346877 [info] prophet: client read loop started 
2021/09/03 14:06:09.346882 [info] prophet: client started
2021/09/03 14:06:09.346937 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:09.346938 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:09.346944 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:09.346939 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:09.346988 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649169 deployPath:"not set" 
2021/09/03 14:06:09.347000 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:09.347106 [info] [raftstore]: create local store with id 7
2021/09/03 14:06:09.347586 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:09.349917 [info] prophet: container 7 limit added
2021/09/03 14:06:09.349986 [info] [raftstore]: prophet started
2021/09/03 14:06:09.350028 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:06:09.350040 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:06:09.350053 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:09.350056 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:09.350060 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:09.350061 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:09.350062 [info] [raftstore]: shards started
2021/09/03 14:06:09.350063 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:09.350071 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:06:09.350093 [info] [raftstore]: router started
2021/09/03 14:06:09.350125 [info] [raftstore]: router event loop task started
2021/09/03 14:06:09.350128 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:09.350215 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:09.350229 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:09.350286 [info] prophet: new watcher 127.0.0.1:41808 added
2021/09/03 14:06:09.350372 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:06:09.374+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"cad228270929ed82","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:06:09.391+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"5b329412c76c70f6","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5b329412c76c70f6","to":"cad228270929ed82","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5b329412c76c70f6","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5b329412c76c70f6","to":"cad228270929ed82","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5b329412c76c70f6","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.428+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
2021/09/03 14:06:09.435163 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:06:09.4351327 +0800 CST m=+12.674071001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/09/03 14:06:09.435183 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/09/03 14:06:09.435273 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.435329 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.435617 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.435642 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.435+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:06:09.435737 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 12 86 22 223 69 116 73 112 146 6 111 174 49 86 206 142 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.435760 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.435771 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.435786 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.435+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:06:09.435891 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.435976 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:06:09.436021 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:09.436256 [info] [transport]: connected to store 7
2021/09/03 14:06:09.436316 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:09.436336 [info] [raftstore]: shard 2 peer 8 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:06:09.436351 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.436354 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.436365 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:09.436+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:09.436+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:09.436+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:09.436403 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:06:09.436406 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:09.436+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:09.436+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:06:09.436456 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:06:09.437232 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/09/03 14:06:09.437296 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.437338 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.437489 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.437510 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.437515 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.437524 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.437+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6 8)"}
2021/09/03 14:06:09.437582 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8}] Context:[10 32 10 16 239 51 41 93 109 121 74 54 140 238 67 97 253 183 156 115 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.437602 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.437+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6 8)"}
2021/09/03 14:06:09.437629 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.437655 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:06:09.437752 [info] [transport]: connected to store 1
2021/09/03 14:06:09.437882 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.438172 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<10> 
2021/09/03 14:06:09.438542 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:06:09.4351327 +0800 CST m=+12.674071001, startAt:2021-09-03 14:06:09.4351783 +0800 CST m=+12.674116601, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 3.3539ms, 
2021/09/03 14:06:09.452116 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:06:09.452214 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:10 >,size=<123>
2021/09/03 14:06:09.452295 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:06:09.452+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:09.452+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:06:09.452+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:09.452+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/09/03 14:06:09.452442 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:06:09.452686 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:09.452703 [info] [transport]: shard 2 pending snap sent succ, size=<123>, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:06:09.504434 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:06:09.504478 [info] [raftstore]: shard 2 try to split, size 40 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/09/03 14:06:09.504542 [info] prophet: alloc ids [10 11 12] for resource 9 split
2021/09/03 14:06:09.504823 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:06:09.504860 [info] [raftstore]: shard 9 peer 10 begin to create at store 1, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:06:09.504865 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:06:09.504878 [info] [raftstore]: shard 9 peer 11 begin to create at store 5, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:06:09.504880 [info] [raftstore]: shard 9 peer 10 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.504883 [info] [raftstore]: shard 9 change init applied index from 5 to 5
2021/09/03 14:06:09.504887 [info] [raftstore]: shard 9 peer 10 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.504889 [info] [raftstore]: shard 9 peer 10 init last term, last term=<5>
2021/09/03 14:06:09.504899 [info] [raftstore]: shard 9 peer 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.504913 [info] [raftstore]: shard 9 change init applied index from 5 to 5
2021/09/03 14:06:09.504918 [info] [raftstore]: shard 9 peer 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:06:09.504+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:06:09.504+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.504+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:09.504919 [info] [raftstore]: shard 9 peer 11 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:06:09.504+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:06:09.504+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:09.504941 [info] [raftstore]: shard 9 peer 10 delegate register completed
2021/09/03 14:06:09.505017 [info] [raftstore]: shard 9 peer 10 added, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:09.505029 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
2021/09/03 14:06:09.505005 [info] [raftstore]: shard 9 peer 11 delegate register completed
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to b at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to c at term 5"}
2021/09/03 14:06:09.505075 [info] [raftstore]: shard 9 peer 11 added, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:09.505096 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:09.505076 [info] [raftstore]: shard 9 peer 10 ********become follower now********
2021/09/03 14:06:09.505131 [info] prophet: resource 2 version changed from 1 to 2
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgPreVote for a [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from b at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from a at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to c at term 6"}
2021/09/03 14:06:09.505271 [info] [raftstore]: shard 9 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:09.505+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became leader at term 6"}
2021/09/03 14:06:09.505425 [info] [raftstore]: shard 9 peer 10 ********become leader now********
2021/09/03 14:06:09.505474 [info] [raftstore]: shard 9 peer 11 ********become follower now********
2021/09/03 14:06:09.505515 [info] [raftstore]: shard 9 target peer doesn't exist, peer=<{ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:09.553427 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:06:09.553502 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:41746->127.0.0.1:30000: use of closed network connection
2021/09/03 14:06:09.553523 [error] prophet: client read loop stopped
2021/09/03 14:06:09.554427 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:06:09.554451 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:06:09.554465 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:09.554468 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:09.554470 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
{"level":"info","ts":"2021-09-03T14:06:09.554+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:09.554498 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:09.554509 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:09.554511 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:09.554515 [info] prophet: coordinator is stopping
2021/09/03 14:06:09.554515 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:06:09.554528 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:06:09.554532 [info] prophet: coordinator has been stopped
2021/09/03 14:06:09.554533 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:09.554540 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:09.554544 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:09.554544 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:06:09.554537 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:09.554577 [info] prophet: watcher notifer exited
2021/09/03 14:06:09.554584 [info] prophet: metrics are reset
2021/09/03 14:06:09.554590 [info] prophet: background jobs has been stopped
2021/09/03 14:06:09.554643 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:09.554656 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:09.554663 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:09.554665 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:09.554670 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:09.554671 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:09.554673 [info] prophet: watcher notifier stopped
2021/09/03 14:06:09.554678 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:09.554886 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:06:09.554904 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:06:09.554945 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:09.554961 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:06:09.555+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.555+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 10] starts to transfer leadership to cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to cad228270929ed82 after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [term 10] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 received MsgVoteResp from cad228270929ed82 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 10, index: 44] sent MsgVote request to 5b329412c76c70f6 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 10, index: 44] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.556+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 lost leader 93ccda9956d988f4 at term 11"}
2021/09/03 14:06:09.556869 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [term: 10] received a MsgVote message with higher term from cad228270929ed82 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [logterm: 10, index: 44, vote: 0] cast MsgVote for cad228270929ed82 [logterm: 10, index: 44] at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 10] received a MsgVote message with higher term from cad228270929ed82 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 10, index: 44, vote: 0] cast MsgVote for cad228270929ed82 [logterm: 10, index: 44] at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.557+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 received MsgVoteResp from 5b329412c76c70f6 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 elected leader cad228270929ed82 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader cad228270929ed82 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:09.558+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 elected leader cad228270929ed82 at term 11"}
2021/09/03 14:06:09.559769 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:06:09.560653 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:06:09.560671 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:06:09.562779 [info] prophet: load 3 containers, cost 2.0373ms
2021/09/03 14:06:09.563136 [info] prophet: load 2 resources, cost 343.9µs
2021/09/03 14:06:09.563793 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:09.563808 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:09.564151 [info] prophet: load 0 jobs
2021/09/03 14:06:09.569428 [info] [raftstore]: shard 2 peer 8 received a snapshot at 10
2021/09/03 14:06:09.569444 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:06:09.569450 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:09.569459 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.569469 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:09.569598 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.569622 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.569682 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/09/03 14:06:09.569728 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10}
2021/09/03 14:06:09.603619 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.603640 [info] [raftstore]: shard 9 start split check job from [122 0 0 0 0 0 0 0 0 107 101 121 50] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:06:09.603688 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.619447 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:06:09.619468 [info] [raftstore]: shard 9 peer 12 begin to create at store 7, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:06:09.619485 [info] [raftstore]: shard 9 peer 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:09.619488 [info] [raftstore]: shard 9 change init applied index from 5 to 5
2021/09/03 14:06:09.619491 [info] [raftstore]: shard 9 peer 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:09.619492 [info] [raftstore]: shard 9 peer 12 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft c [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:09.619561 [info] [raftstore]: shard 9 peer 12 delegate register completed
2021/09/03 14:06:09.619570 [info] [raftstore]: shard 9 peer 12 added, epoch {ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:09.619591 [info] [raftstore]: shard 2 new shard added, new shards [{ID:9 Start:[107 101 121 50] End:[] Epoch:{ConfVer:5 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:06:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
2021/09/03 14:06:09.655548 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"cad228270929ed82","took":"100.9835ms"}
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"cad228270929ed82","error":"failed to read cad228270929ed82 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:09.656+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"5b329412c76c70f6","error":"failed to read 5b329412c76c70f6 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"cad228270929ed82","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"5b329412c76c70f6","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node cad228270929ed82)"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"5b329412c76c70f6","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"cad228270929ed82","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:09.657+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 5b329412c76c70f6)"}
{"level":"info","ts":"2021-09-03T14:06:09.658+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:06:09.669421 [info] [raftstore]: shard 9 peer 12 ********become follower now********
2021/09/03 14:06:09.703563 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.703584 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.706017 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:09.706108 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:09.706144 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:09.706174 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:06:09.803963 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.803981 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.904091 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:09.904109 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.004143 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.004160 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:10.013+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:10.103860 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.103877 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.204376 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.204393 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.304030 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.304047 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.304118 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:10.403942 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.403961 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.503588 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.503604 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.555071 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:10.555148 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:10.555158 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:06:10.555274 [info] prophet: new watcher 127.0.0.1:46008 added
2021/09/03 14:06:10.555434 [info] [raftstore]: start init event
2021/09/03 14:06:10.604377 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:06:10.604395 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:10.659+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:10.659+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:10.659326 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:06:10.659341 [info] [transport]: transfer stopped
2021/09/03 14:06:10.659343 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:06:10.659344 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:06:10.659348 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:06:10.659351 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:10.659354 [info] [transport]: send raft worker stopped
2021/09/03 14:06:10.659352 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:10.659358 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:10.659361 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:10.659362 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659364 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:06:10.659365 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659368 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659366 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659372 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659373 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:06:10.659369 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659375 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:06:10.659374 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659374 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:10.659414 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:45932->127.0.0.1:30001: use of closed network connection
2021/09/03 14:06:10.659424 [error] prophet: client read loop stopped
2021/09/03 14:06:10.660425 [info] prophet: [prophet-leader/node-1]/lease: closed
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:10.660471 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:06:10.660486 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:06:10.660542 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:10.660498 [info] prophet: coordinator stops running 
2021/09/03 14:06:10.660556 [info] prophet: coordinator is stopping
2021/09/03 14:06:10.660567 [info] prophet: coordinator has been stopped
2021/09/03 14:06:10.660557 [info] prophet: metrics are reset
2021/09/03 14:06:10.660573 [info] prophet: background jobs has been stopped
2021/09/03 14:06:10.660592 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:10.660595 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"cad228270929ed82","current-leader-member-id":"cad228270929ed82","transferee-member-id":"5b329412c76c70f6"}
2021/09/03 14:06:10.660602 [info] prophet: watcher notifier stopped
2021/09/03 14:06:10.660670 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [term 11] starts to transfer leadership to 5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 sends MsgTimeoutNow to 5b329412c76c70f6 immediately as 5b329412c76c70f6 already has up-to-date log"}
2021/09/03 14:06:10.660505 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/09/03 14:06:10.660551 [info] prophet: watcher notifer exited
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [term 11] received MsgTimeoutNow from cad228270929ed82 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 received MsgVoteResp from 5b329412c76c70f6 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [logterm: 11, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [logterm: 11, index: 48] sent MsgVote request to cad228270929ed82 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.660+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 lost leader cad228270929ed82 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [term: 11] received a MsgVote message with higher term from 5b329412c76c70f6 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:06:10.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"cad228270929ed82 [logterm: 11, index: 48, vote: 0] cast MsgVote for 5b329412c76c70f6 [logterm: 11, index: 48] at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 lost leader cad228270929ed82 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.662+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 received MsgVoteResp from cad228270929ed82 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.662+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:10.662+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.662+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 elected leader 5b329412c76c70f6 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:10.662+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: cad228270929ed82 elected leader 5b329412c76c70f6 at term 12"}
{"level":"warn","ts":"2021-09-03T14:06:10.663+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:06:10.663+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:06:10.705320 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"cad228270929ed82","old-leader-member-id":"cad228270929ed82","new-leader-member-id":"5b329412c76c70f6","took":"100.5762ms"}
2021/09/03 14:06:10.761129 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"5b329412c76c70f6","error":"failed to read 5b329412c76c70f6 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"cad228270929ed82","remote-peer-id":"5b329412c76c70f6"}
{"level":"info","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"5b329412c76c70f6"}
{"level":"warn","ts":"2021-09-03T14:06:10.761+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"cad228270929ed82","remote-peer-id-stream-handler":"cad228270929ed82","remote-peer-id-from":"5b329412c76c70f6","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:10.762+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"cad228270929ed82","error":"failed to dial cad228270929ed82 on stream MsgApp v2 (peer cad228270929ed82 failed to find local node 5b329412c76c70f6)"}
{"level":"warn","ts":"2021-09-03T14:06:10.762+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"cad228270929ed82","remote-peer-id-stream-handler":"cad228270929ed82","remote-peer-id-from":"5b329412c76c70f6","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:10.763+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
{"level":"warn","ts":"2021-09-03T14:06:10.933+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:11.033+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:11.618+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:11.618+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:11.618+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:11.618+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [logterm: 6, index: 13] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:11.618+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [logterm: 6, index: 13] sent MsgPreVote request to 8 at term 6"}
2021/09/03 14:06:11.618941 [info] [raftstore]: shard 2 peer 6 ********become follower now********
{"level":"warn","ts":"2021-09-03T14:06:11.619+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0009096c0/#initially=[http://127.0.0.1:40001]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:11.619101 [error] prophet: read /prophet/containers/00000000000000000007 from etcd failed with context canceled
2021/09/03 14:06:11.619194 [error] [transport]: shard 2 send msg shardID:2 from:<id:6 containerID:5 role:Learner > to:<id:8 containerID:7 > message:<type:MsgPreVoteMsgPreVote to:8 from:6 term:7 logTerm:6 index:13 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:2 >  from 6 to 8 failed with not connected
{"level":"warn","ts":"2021-09-03T14:06:11.633+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"5b329412c76c70f6 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:11.633+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:11.633+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5b329412c76c70f6 lost leader 5b329412c76c70f6 at term 12"}
2021/09/03 14:06:11.706168 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:11.763+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:11.763+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:11.763817 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:06:11.763842 [info] [transport]: transfer stopped
2021/09/03 14:06:11.763843 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:06:11.763845 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763846 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:06:11.763855 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763857 [info] [transport]: send raft worker stopped
2021/09/03 14:06:11.763857 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:06:11.763861 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763863 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763863 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:11.763867 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763868 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:11.763847 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763869 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.763865 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:11.763864 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:11.763907 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:06:11.763916 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:06:11.763918 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:06:11.763869 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:11.955851 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:06:11.955880 [error] prophet: client read loop stopped
2021/09/03 14:06:11.955900 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:06:11.955905 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:11.956102 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:11.959334 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 13] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 13] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:06:12.119284 [info] [raftstore]: shard 2 peer 8 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:12.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 no leader at term 12; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:06:12.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgPreVote request to a at term 6"}
{"level":"info","ts":"2021-09-03T14:06:12.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgPreVote request to b at term 6"}
2021/09/03 14:06:12.319491 [info] [raftstore]: shard 9 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:12.333+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:06:12.333+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:06:12.333+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 received MsgVoteResp from 5b329412c76c70f6 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:12.333+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [logterm: 12, index: 49] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:12.333+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5b329412c76c70f6 [logterm: 12, index: 49] sent MsgVote request to cad228270929ed82 at term 13"}
2021/09/03 14:06:12.350269 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:12.620+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":8139829347729388558,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:11.764+0800","time spent":"1.0005287s","remote":"127.0.0.1:53084","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:06:12.764658 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:06:12.764+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:53084->127.0.0.1:40002: use of closed network connection"}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"645.2502ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/containers/00000000000000000005\" ","response":"","error":"context canceled"}
2021/09/03 14:06:12.764770 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<3.2078836s> errors rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:53084->127.0.0.1:40002: use of closed network connection
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:12.764816 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:06:12.764819 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:53084->127.0.0.1:40002: use of closed network connection
{"level":"info","ts":"2021-09-03T14:06:12.764+0800","caller":"traceutil/trace.go:171","msg":"trace[39039790] range","detail":"{range_begin:/prophet/containers/00000000000000000005; range_end:; }","duration":"645.2759ms","start":"2021-09-03T14:06:12.119+0800","end":"2021-09-03T14:06:12.764+0800","steps":["trace[39039790] 'agreement among raft nodes before linearized reading'  (duration: 645.2496ms)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:53084->127.0.0.1:40002: use of closed network connection"}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:12.119+0800","time spent":"645.3506ms","remote":"127.0.0.1:53084","response type":"/etcdserverpb.KV/Range","request count":0,"request size":42,"response count":0,"response size":0,"request content":"key:\"/prophet/containers/00000000000000000005\" "}
{"level":"warn","ts":"2021-09-03T14:06:12.764+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:09.556+0800","time spent":"3.2078278s","remote":"127.0.0.1:53084","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
2021/09/03 14:06:12.764856 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:06:12.764921 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:13 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:2 >  from 8 to 6 failed with not connected
{"level":"warn","ts":"2021-09-03T14:06:12.765+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:12.765043 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:06:12.765060 [error] [transport]: shard 9 send msg shardID:9 from:<id:12 containerID:7 > to:<id:11 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:11 from:12 term:7 logTerm:6 index:6 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:2 >  from 12 to 11 failed with not connected
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"5b329412c76c70f6","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"warn","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5b329412c76c70f6","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.766+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"cad228270929ed82"}
{"level":"info","ts":"2021-09-03T14:06:12.767+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
2021/09/03 14:06:13.351331 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:13.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:13.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:13.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:13.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 13] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:13.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 13] sent MsgPreVote request to 6 at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:13.719+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005448c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:13.719352 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:06:13.719419 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:13 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:2 >  from 8 to 6 failed with not connected
{"level":"info","ts":"2021-09-03T14:06:13.768+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:13.768+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:06:13.768950 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:06:13.768971 [info] [transport]: transfer stopped
2021/09/03 14:06:13.768973 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:06:13.768975 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:06:13.768979 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:06:13.768984 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:13.768988 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768992 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768990 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768995 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768996 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768996 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.769000 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.769001 [info] [transport]: send raft worker stopped
2021/09/03 14:06:13.768989 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:13.769003 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:13.768994 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:13.768994 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:13.769010 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:06:13.769022 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestSyncData (15.90s)
=== RUN   TestIssue90
2021/09/03 14:06:13.770428 [info] prophet: prophet logger set
2021/09/03 14:06:13.776901 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:13.777045 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:13.782631 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:13.782769 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:13.788430 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:13.788512 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:13.788523 [info] [raftstore]: begin to start prophet
2021/09/03 14:06:13.788567 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:06:13.788+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:13.788+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:06:13.788+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:13.788+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:13.790+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3026ms"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:06:13.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:06:13.794+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:13.795+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:13.797+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:13.797+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:13.797+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:13.797+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:13.798+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:13.798+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:13.798+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:14.093750 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:06:14.093+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:14.094+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:06:14.094+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:14.094+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:06:14.095491 [info] prophet: start system time monitor 
2021/09/03 14:06:14.095862 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:06:14.095998 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:14.096011 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:14.096249 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:14.096725 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:14.096744 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:14.097404 [info] prophet: load 0 containers, cost 180.3µs
2021/09/03 14:06:14.097558 [info] prophet: load 0 resources, cost 142.6µs
2021/09/03 14:06:14.098174 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:14.098189 [info] prophet: client started
2021/09/03 14:06:14.098194 [info] prophet: client read loop started 
2021/09/03 14:06:14.098196 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:14.098198 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:14.098185 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:14.098203 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:14.098204 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:14.098214 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649174 deployPath:"not set" 
2021/09/03 14:06:14.098226 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:14.098227 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:14.098244 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:14.098619 [info] prophet: load 0 jobs
2021/09/03 14:06:14.098882 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:14.098902 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:06:14.099462 [info] [raftstore]: create local store with id 1
2021/09/03 14:06:14.099894 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:06:14.099904 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:06:14.100097 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:06:14.101440 [info] prophet: container 1 limit added
2021/09/03 14:06:14.101520 [info] [raftstore]: prophet started
2021/09/03 14:06:14.101552 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:06:14.101571 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:14.101573 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:14.101583 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:06:14.101603 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:14.101614 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:14.101616 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
2021/09/03 14:06:14.101649 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:14.101696 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:06:14.101706 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:14.101708 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:14.101+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:06:14.101749 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:14.101758 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:14.101759 [info] [raftstore]: shards started
2021/09/03 14:06:14.101761 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:14.101771 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:06:14.101779 [info] [raftstore]: router started
2021/09/03 14:06:14.101788 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:14.101808 [info] [raftstore]: router event loop task started
2021/09/03 14:06:14.101786 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:06:14.101856 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:14.101869 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:14.101902 [info] prophet: new watcher 127.0.0.1:42142 added
2021/09/03 14:06:14.101939 [info] [raftstore]: start init event
2021/09/03 14:06:14.103298 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:14.103311 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"df0309da034f18a9","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
2021/09/03 14:06:14.104773 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:16069698727351097513 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:16069698727351097513 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:14.104+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:14.106+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.2289ms"}
{"level":"warn","ts":"2021-09-03T14:06:14.607+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:15.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:15.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:15.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:06:15.101620 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:06:15.101637 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:15.101653 [info] prophet: coordinator is stopping
2021/09/03 14:06:15.101658 [info] prophet: watcher notifer exited
2021/09/03 14:06:15.101664 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:15.101668 [info] prophet: metrics are reset
2021/09/03 14:06:15.101671 [info] prophet: background jobs has been stopped
2021/09/03 14:06:15.101680 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:15.101687 [info] prophet: coordinator has been stopped
2021/09/03 14:06:15.101728 [info] prophet: watcher notifier stopped
2021/09/03 14:06:15.101740 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:15.101764 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:06:15.101773 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:06:15.101774 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:06:15.101729 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:15.101779 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"warn","ts":"2021-09-03T14:06:15.108+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:15.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:06:15.608+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:15.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
2021/09/03 14:06:15.765172 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:15.892+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:06:15.892+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:06:15.892+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:06:15.892+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 3"}
{"level":"warn","ts":"2021-09-03T14:06:16.109+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:16.392+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:06:16.392+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:06:16.392+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:06:16.392+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 4"}
{"level":"warn","ts":"2021-09-03T14:06:16.609+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:16.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:06:16.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:16.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:16.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 5"}
{"level":"warn","ts":"2021-09-03T14:06:17.109+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:17.610+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:17.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:17.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:17.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:17.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:18.111+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:18.593+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:18.593+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:18.593+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:18.593+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 7"}
{"level":"warn","ts":"2021-09-03T14:06:18.612+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:19.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:19.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:19.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:19.093+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 8"}
{"level":"warn","ts":"2021-09-03T14:06:19.104+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"df0309da034f18a9","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:19.104+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"df0309da034f18a9","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:19.112+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:19.613+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379485,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:19.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:06:19.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:06:19.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:06:19.793+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 9"}
{"level":"warn","ts":"2021-09-03T14:06:20.107+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:06:20.107+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:06:20.107+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:06:20.110+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"df0309da034f18a9","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:20.110+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:20.110+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:20.110+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft df0309da034f18a9 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:20.111+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:20.113+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:20.115+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.115+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:20.115+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.115+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.115+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.116+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"df0309da034f18a9","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"df0309da034f18a9","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"df0309da034f18a9","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:20.117+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"df0309da034f18a9","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"df0309da034f18a9","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"df0309da034f18a9","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.118+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.119+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from df0309da034f18a9 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:20.293+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:06:20.293+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:06:20.293+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:20.293+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:20.293+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 4)"}
{"level":"warn","ts":"2021-09-03T14:06:20.608+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654687379487,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:20.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:06:20.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to df0309da034f18a9 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from df0309da034f18a9 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:06:20.994+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.7926966s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","caller":"traceutil/trace.go:171","msg":"trace[2031208551] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.7927369s","start":"2021-09-03T14:06:15.202+0800","end":"2021-09-03T14:06:20.994+0800","steps":["trace[2031208551] 'agreement among raft nodes before linearized reading'  (duration: 5.7926957s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:06:20.994+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:15.202+0800","time spent":"5.7927749s","remote":"127.0.0.1:42568","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:06:20.994+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:06:20.995+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908380/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:20.995+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:20.995+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"df0309da034f18a9","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:20.995+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"df0309da034f18a9","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:20.995+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 switched to configuration voters=(10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:20.995+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"df0309da034f18a9","added-peer-id":"df0309da034f18a9","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:20.996+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"df0309da034f18a9","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/df0309da034f18a9/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:06:20.996825 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:06:20.996+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:06:20.997+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:06:20.998252 [info] prophet: start system time monitor 
2021/09/03 14:06:20.998490 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:20.998504 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:20.998506 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:20.998522 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:20.998539 [info] prophet: client started
2021/09/03 14:06:20.998543 [info] prophet: client read loop started 
2021/09/03 14:06:20.998571 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:20.998561 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:20.998576 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:20.998578 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:20.998597 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649180 deployPath:"not set" 
2021/09/03 14:06:20.998608 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:20.998778 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:20.998828 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:20.998838 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:21.020979 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.818935s
2021/09/03 14:06:21.020997 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:21.020999 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:06:21.022393 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:21.022403 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:21.023249 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:21.024119 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:21.024132 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:21.024997 [info] prophet: load 1 containers, cost 763.9µs
2021/09/03 14:06:21.025272 [info] prophet: load 1 resources, cost 263.4µs
2021/09/03 14:06:21.025843 [info] prophet: watcher notifier stopped
2021/09/03 14:06:21.025859 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:21.025877 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:21.026126 [info] prophet: load 0 jobs
2021/09/03 14:06:21.099840 [info] [raftstore]: create local store with id 5
2021/09/03 14:06:21.100384 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:21.103178 [info] prophet: container 5 limit added
2021/09/03 14:06:21.103238 [info] [raftstore]: prophet started
2021/09/03 14:06:21.103263 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:06:21.103299 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:06:21.103311 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:21.103313 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:21.103316 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:21.103317 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:21.103318 [info] [raftstore]: shards started
2021/09/03 14:06:21.103320 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:21.103325 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:06:21.103340 [info] [raftstore]: router started
2021/09/03 14:06:21.103371 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:21.103389 [info] [raftstore]: router event loop task started
2021/09/03 14:06:21.103486 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:21.103496 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:21.103567 [info] prophet: new watcher 127.0.0.1:42192 added
2021/09/03 14:06:21.104887 [info] [raftstore]: start init event
2021/09/03 14:06:21.104895 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:21.104908 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:06:21.105+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:507180eb84c3a3f1 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:21.105+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:21.105816 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:21.117125 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:21.117241 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:21.117253 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:21.117313 [info] prophet: new watcher 127.0.0.1:42196 added
2021/09/03 14:06:21.117384 [info] [raftstore]: start init event
2021/09/03 14:06:21.118577 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:21.118587 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:21.118607 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:21.118610 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:21.118611 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:21.118892 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:21.118921 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:21.118925 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:06:21.118954 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:21.118970 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:21.120635 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:06:21.120713 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:06:21.123005 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:06:21.123018 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
{"level":"warn","ts":"2021-09-03T14:06:21.606+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:507180eb84c3a3f1 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:21.606+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:21.606181 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:22.107+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a96227ee8bbf6e8c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:22.107+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:22.107392 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:22.607+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a96227ee8bbf6e8c RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:22.607+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:22.607892 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:23.108+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:3f3bf196d50c0894 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:23.108+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:23.108927 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:23.609+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:3f3bf196d50c0894 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:23.610+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:23.610121 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:24.026176 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:24.026188 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:24.027999 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:24.028027 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:06:24.111+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a60115afd161d44b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:24.111+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:24.111462 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:24.123771 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:24.123783 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:24.123786 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:24.123790 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:24.128413 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:24.1283947 +0800 CST m=+27.367332901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:06:24.128434 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:06:24.128528 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.128585 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.128680 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.128700 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:24.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:06:24.128788 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 217 131 83 244 169 11 64 251 174 0 243 52 145 70 191 118 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.128806 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.128946 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:06:24.130607 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:06:24.130643 [info] [transport]: connected to store 5
2021/09/03 14:06:24.130671 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.130681 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:24.130687 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:06:24.130704 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.130721 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:24.130722 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:24.130768 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:06:24.130771 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:06:24.130706 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.130850 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.130867 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.130810 [info] [raftstore]: shard 2 peer 6 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:24.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:06:24.130901 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 219 93 238 177 151 164 66 176 156 181 51 145 24 218 224 95 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.130907 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:24.130980 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:06:24.131878 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:24.1283947 +0800 CST m=+27.367332901, startAt:2021-09-03 14:06:24.1284275 +0800 CST m=+27.367365701, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 3.4347ms, 
2021/09/03 14:06:24.132113 [info] [transport]: connected to store 1
2021/09/03 14:06:24.132288 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:24.132672 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:06:24.135590 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:24.169565 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:06:24.169741 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:06:24.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:24.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:06:24.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:24.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:06:24.169988 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/09/03 14:06:24.170553 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:06:24.170600 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:24.170615 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:06:24.369583 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:06:24.369600 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:06:24.369606 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:24.369615 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:24.369635 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:24.369840 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:24.369869 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:24.369847 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:06:24.369935 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"warn","ts":"2021-09-03T14:06:24.612+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a60115afd161d44b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:24.612+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:24.612644 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:25.113+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:938070e7a3169275 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:25.113+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:25.113609 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10628619260770292341 10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"938070e7a3169275","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 switched to configuration voters=(10628619260770292341 10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"df0309da034f18a9","added-peer-id":"938070e7a3169275","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.614+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.615+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.615+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.615+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.615+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
2021/09/03 14:06:25.616298 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:11  Member:ID:10628619260770292341 peerURLs:"http://127.0.0.1:50002"  Members:[ID:10628619260770292341 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:16069698727351097513 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:25.616+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:25.618+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.5183ms"}
{"level":"info","ts":"2021-09-03T14:06:25.622+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"938070e7a3169275","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:25.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:25.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:25.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 938070e7a3169275 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:25.623+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:25.625+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"938070e7a3169275","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.627+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.628+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.628+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"938070e7a3169275","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:25.628+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.628+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"938070e7a3169275","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"df0309da034f18a9","to":"938070e7a3169275","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"df0309da034f18a9","to":"938070e7a3169275","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"938070e7a3169275","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 elected leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"938070e7a3169275","to":"df0309da034f18a9","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:25.629+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"938070e7a3169275","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"938070e7a3169275","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 switched to configuration voters=(10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"938070e7a3169275","added-peer-id":"df0309da034f18a9","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 switched to configuration voters=(10628619260770292341 10650127570946328820 16069698727351097513)"}
{"level":"info","ts":"2021-09-03T14:06:25.631+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"938070e7a3169275","added-peer-id":"938070e7a3169275","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:25.632+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"938070e7a3169275","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/938070e7a3169275/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:25.632+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:25.632929 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:06:25.633+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:06:25.634455 [info] prophet: start system time monitor 
2021/09/03 14:06:25.634861 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:25.634875 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:25.634878 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:25.634904 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:25.634925 [info] prophet: client read loop started 
2021/09/03 14:06:25.634937 [info] prophet: client started
2021/09/03 14:06:25.634944 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:25.634946 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:25.634984 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649185 deployPath:"not set" 
2021/09/03 14:06:25.634989 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:25.635002 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:25.635059 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:25.635132 [info] [raftstore]: create local store with id 7
2021/09/03 14:06:25.635594 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:25.638042 [info] prophet: container 7 limit added
2021/09/03 14:06:25.638123 [info] [raftstore]: prophet started
2021/09/03 14:06:25.638130 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:06:25.638166 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:06:25.638185 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:25.638188 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:25.638191 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:25.638192 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:25.638193 [info] [raftstore]: shards started
2021/09/03 14:06:25.638195 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:25.638199 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:06:25.638207 [info] [raftstore]: router started
2021/09/03 14:06:25.638262 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:25.638285 [info] [raftstore]: router event loop task started
2021/09/03 14:06:25.638351 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:25.638367 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:25.638432 [info] prophet: new watcher 127.0.0.1:42260 added
2021/09/03 14:06:25.638501 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:06:25.679+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"938070e7a3169275","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"938070e7a3169275","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"938070e7a3169275","to":"df0309da034f18a9","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.716+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:25.717+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"938070e7a3169275","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:25.717+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:25.725419 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:25.736925 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:06:25.7369033 +0800 CST m=+28.975841501, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/09/03 14:06:25.736946 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/09/03 14:06:25.737039 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:25.737099 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:25.737501 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:25.737529 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:25.737+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:06:25.737634 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:25.802494 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:25.802587 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:25.802631 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:25.902690 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:25.902798 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:25.902825 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.002617 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.002687 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.002717 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.102218 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.102310 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.102350 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.202092 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.202176 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.202207 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.302006 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.302092 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.302122 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.402310 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.402386 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.402412 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.502389 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.502452 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.502477 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.602533 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.602629 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.602670 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.702251 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.702344 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.702377 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.802927 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.803029 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.803062 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:26.902352 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:26.902443 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:26.902468 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.002770 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.002915 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.002984 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.102718 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.102820 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.102854 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.202618 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.202710 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.202742 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.302119 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.302187 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.302208 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.402713 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.402812 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.402860 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.502131 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.502212 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.502243 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.602681 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.602795 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.602830 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.702378 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.702492 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.702526 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.802616 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.802698 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.802724 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:27.901884 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:27.901961 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:27.901987 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.002150 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.002227 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.002252 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.103018 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.103087 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.103115 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.201879 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.201971 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.202007 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.302146 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.302292 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.302326 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.402609 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.402710 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.402740 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.502843 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.502940 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.502980 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.602200 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.602271 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.602304 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.702146 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.702228 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.702257 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.802718 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.802803 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.802835 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:28.902287 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:28.902412 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:28.902445 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.002599 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.002719 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.002752 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.102845 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.102936 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.102965 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.202216 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.202309 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.202339 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.302652 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.302756 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.302789 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.402605 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.402700 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.402734 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.501890 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.501980 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.502022 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.602815 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.602928 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.602962 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.701985 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.702077 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.702121 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.802708 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.802832 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.802868 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:29.902192 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:29.902305 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:29.902344 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.002868 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.002962 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.002994 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.102898 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.102983 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.103016 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.202312 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.202432 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.202467 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.302392 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.302488 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.302519 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.401919 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.402004 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.402033 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.502866 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.502942 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.502967 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.602325 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source heartbeat
2021/09/03 14:06:30.602410 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.602439 [error] [raftstore]: shard-2 there is a pending conf change, try later
2021/09/03 14:06:30.640955 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:30.640980 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:06:30.640991 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:30.641039 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:42198->127.0.0.1:30000: use of closed network connection
2021/09/03 14:06:30.641052 [error] prophet: client read loop stopped
{"level":"info","ts":"2021-09-03T14:06:30.641+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:06:30.641089 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 165 190 32 12 21 34 76 196 161 97 74 34 176 80 127 104 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.641120 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:30.641217 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:30.642578 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:06:30.642628 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:30.642634 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:30.642636 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:30.642641 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:06:30.642647 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:30.642649 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:06:30.642650 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:06:30.642660 [info] prophet: coordinator is stopping
2021/09/03 14:06:30.642680 [info] prophet: coordinator has been stopped
2021/09/03 14:06:30.642661 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:30.642689 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:30.642694 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:30.642649 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:30.642670 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:30.642708 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:30.642709 [info] prophet: watcher notifer exited
2021/09/03 14:06:30.642710 [info] prophet: metrics are reset
2021/09/03 14:06:30.642711 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:30.642714 [info] prophet: background jobs has been stopped
2021/09/03 14:06:30.642726 [info] [transport]: connected to store 7
2021/09/03 14:06:30.642756 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:30.642759 [info] prophet: watcher notifier stopped
2021/09/03 14:06:30.642760 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:30.642761 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:30.642767 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:30.642790 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:30.642793 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:30.642768 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:30.642796 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:30.642803 [info] [raftstore]: shard 2 peer 8 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:06:30.642825 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.642844 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:30.642846 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:30.642924 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:06:30.642928 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:30.642+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:06:30.642978 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:06:30.643156 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:30.643174 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:06:30.643179 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:06:30.643183 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-09-03T14:06:30.643+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.643+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 11] starts to transfer leadership to df0309da034f18a9"}
2021/09/03 14:06:30.644212 [info] [transport]: connected to store 1
2021/09/03 14:06:30.644352 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:30.644649 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<11> 
2021/09/03 14:06:30.644861 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:06:30.644+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to df0309da034f18a9 after received MsgAppResp"}
2021/09/03 14:06:30.644995 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:06:30.644+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [term 11] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 received MsgVoteResp from df0309da034f18a9 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 11, index: 40] sent MsgVote request to 938070e7a3169275 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 11, index: 40] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [term: 11] received a MsgVote message with higher term from df0309da034f18a9 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 11] received a MsgVote message with higher term from df0309da034f18a9 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [logterm: 11, index: 40, vote: 0] cast MsgVote for df0309da034f18a9 [logterm: 11, index: 40] at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 11, index: 40, vote: 0] cast MsgVote for df0309da034f18a9 [logterm: 11, index: 40] at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.645+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 received MsgVoteResp from 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 elected leader df0309da034f18a9 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader df0309da034f18a9 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:30.646+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 elected leader df0309da034f18a9 at term 12"}
2021/09/03 14:06:30.649008 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:06:30.649021 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:06:30.651055 [info] prophet: load 3 containers, cost 1.7758ms
2021/09/03 14:06:30.651361 [info] prophet: load 1 resources, cost 289.9µs
2021/09/03 14:06:30.651956 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:30.652027 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:30.652198 [info] prophet: load 0 jobs
2021/09/03 14:06:30.702505 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:30.742954 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"df0309da034f18a9","took":"100.1181ms"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"df0309da034f18a9"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"df0309da034f18a9","error":"failed to read df0309da034f18a9 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"warn","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:30.744+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"938070e7a3169275","error":"failed to read 938070e7a3169275 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"df0309da034f18a9","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"938070e7a3169275","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"df0309da034f18a9","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node df0309da034f18a9)"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 938070e7a3169275)"}
{"level":"warn","ts":"2021-09-03T14:06:30.745+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"938070e7a3169275","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:30.746+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:06:30.769238 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<11>
2021/09/03 14:06:30.769334 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:06:30.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:30.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:06:30.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 11, lastindex: 11, lastterm: 6] restored snapshot [index: 11, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:30.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 11] restored snapshot [index: 11, term: 6]"}
2021/09/03 14:06:30.769619 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:06:30.769974 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 role:Learner > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:11 >,size=<139>
2021/09/03 14:06:30.770023 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:30.770032 [info] [transport]: shard 2 pending snap sent succ, size=<139>, epoch=<confVer:4 version:1 > term=<6> index=<11>
2021/09/03 14:06:30.801960 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:30.902188 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:30.968717 [info] [raftstore]: shard 2 peer 8 received a snapshot at 11
2021/09/03 14:06:30.968732 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:06:30.968740 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:30.968750 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:30.968760 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:30.968908 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:30.968935 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:30.968998 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_11.gz, header is shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:11 
2021/09/03 14:06:30.969041 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:11}
2021/09/03 14:06:31.002701 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.102995 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:31.103030 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.104297 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:31.104397 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:31.104411 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:31.104496 [info] prophet: container 5 heartbeat stream binded
{"level":"warn","ts":"2021-09-03T14:06:31.111+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:31.202849 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.302012 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.401829 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.502721 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.601854 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:31.643031 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:31.643133 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:31.643150 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:06:31.643216 [info] prophet: new watcher 127.0.0.1:46476 added
2021/09/03 14:06:31.643354 [info] [raftstore]: start init event
2021/09/03 14:06:31.702573 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:31.747+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:31.747+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:31.747272 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:06:31.747306 [info] [transport]: transfer stopped
2021/09/03 14:06:31.747308 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747311 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747314 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747315 [info] [transport]: send raft worker stopped
2021/09/03 14:06:31.747319 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747308 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:06:31.747323 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:06:31.747326 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747310 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747328 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:06:31.747311 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747331 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:31.747332 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:31.747334 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:31.747339 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:31.747334 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:31.747381 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:06:31.747401 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:06:31.747415 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:06:31.747491 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:46426->127.0.0.1:30001: use of closed network connection
2021/09/03 14:06:31.747502 [error] prophet: client read loop stopped
2021/09/03 14:06:31.748759 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:06:31.748790 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:06:31.748794 [info] prophet: coordinator stops running 
2021/09/03 14:06:31.748911 [info] prophet: coordinator is stopping
2021/09/03 14:06:31.748913 [info] prophet: coordinator has been stopped
2021/09/03 14:06:31.748794 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:06:31.748918 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:31.748925 [info] prophet: watcher notifer exited
2021/09/03 14:06:31.748799 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
{"level":"info","ts":"2021-09-03T14:06:31.748+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:31.748934 [info] prophet: metrics are reset
2021/09/03 14:06:31.748953 [info] prophet: background jobs has been stopped
2021/09/03 14:06:31.748986 [info] prophet: watcher notifier stopped
2021/09/03 14:06:31.748997 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:31.749002 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:31.748999 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"df0309da034f18a9","current-leader-member-id":"df0309da034f18a9","transferee-member-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [term 12] starts to transfer leadership to 938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 sends MsgTimeoutNow to 938070e7a3169275 immediately as 938070e7a3169275 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [term 12] received MsgTimeoutNow from df0309da034f18a9 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 received MsgVoteResp from 938070e7a3169275 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [logterm: 12, index: 44] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [logterm: 12, index: 44] sent MsgVote request to df0309da034f18a9 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 lost leader df0309da034f18a9 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [term: 12] received a MsgVote message with higher term from 938070e7a3169275 [term: 13]"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"df0309da034f18a9 [logterm: 12, index: 44, vote: 0] cast MsgVote for 938070e7a3169275 [logterm: 12, index: 44] at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.750+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 lost leader df0309da034f18a9 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.751+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 received MsgVoteResp from df0309da034f18a9 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.751+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:31.751+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became leader at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.751+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 elected leader 938070e7a3169275 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:31.751+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: df0309da034f18a9 elected leader 938070e7a3169275 at term 13"}
{"level":"warn","ts":"2021-09-03T14:06:31.752+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:06:31.752+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:06:31.849049 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"df0309da034f18a9","old-leader-member-id":"df0309da034f18a9","new-leader-member-id":"938070e7a3169275","took":"101.0301ms"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"938070e7a3169275","error":"failed to read 938070e7a3169275 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:31.851+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"df0309da034f18a9","remote-peer-id":"938070e7a3169275"}
{"level":"info","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"938070e7a3169275"}
{"level":"warn","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"df0309da034f18a9","remote-peer-id-stream-handler":"df0309da034f18a9","remote-peer-id-from":"938070e7a3169275","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"df0309da034f18a9","remote-peer-id-stream-handler":"df0309da034f18a9","remote-peer-id-from":"938070e7a3169275","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:31.852+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"df0309da034f18a9","error":"failed to dial df0309da034f18a9 on stream Message (peer df0309da034f18a9 failed to find local node 938070e7a3169275)"}
{"level":"info","ts":"2021-09-03T14:06:31.853+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
{"level":"warn","ts":"2021-09-03T14:06:32.023+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:32.103749 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:32.223+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:32.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:32.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:32.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:32.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [logterm: 6, index: 11] sent MsgPreVote request to 3 at term 6"}
2021/09/03 14:06:32.719684 [info] [raftstore]: shard 2 peer 6 ********become follower now********
{"level":"warn","ts":"2021-09-03T14:06:32.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"938070e7a3169275 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:32.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:06:32.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 938070e7a3169275 lost leader 938070e7a3169275 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:32.854+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:32.854+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:32.854327 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:06:32.854354 [info] [transport]: transfer stopped
2021/09/03 14:06:32.854356 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:06:32.854358 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:06:32.854362 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:06:32.854363 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854366 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:32.854370 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854373 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:32.854375 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854378 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:32.854382 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854382 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854384 [info] [transport]: send raft worker stopped
2021/09/03 14:06:32.854373 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854383 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854376 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:32.854404 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:32.854435 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:06:32.854463 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:06:32.854477 [info] [raftstore]: store 7 begin to stop
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 11] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 11] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:06:33.019464 [info] [raftstore]: shard 2 peer 8 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:33.019+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 no leader at term 13; dropping index reading msg"}
2021/09/03 14:06:33.043425 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:06:33.043454 [error] prophet: client read loop stopped
2021/09/03 14:06:33.043470 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:06:33.043474 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:33.043704 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:33.047952 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"warn","ts":"2021-09-03T14:06:33.520+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":10553477273027433998,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:33.520+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 no leader at term 13; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:06:33.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:06:33.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:06:33.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 received MsgVoteResp from 938070e7a3169275 at term 14"}
{"level":"info","ts":"2021-09-03T14:06:33.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [logterm: 13, index: 45] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:06:33.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"938070e7a3169275 [logterm: 13, index: 45] sent MsgVote request to df0309da034f18a9 at term 14"}
2021/09/03 14:06:33.638629 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:33.854+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:32.854+0800","time spent":"1.0001263s","remote":"127.0.0.1:53536","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:06:33.854+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908a80/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:06:33.854901 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:06:33.854+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:06:33.854+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908a80/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:33.854+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908a80/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:33.855+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"835.2502ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/containers/00000000000000000005\" ","response":"","error":"context canceled"}
2021/09/03 14:06:33.855000 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<3.2100983s> errors context canceled
{"level":"info","ts":"2021-09-03T14:06:33.855+0800","caller":"traceutil/trace.go:171","msg":"trace[1159056477] range","detail":"{range_begin:/prophet/containers/00000000000000000005; range_end:; }","duration":"835.2823ms","start":"2021-09-03T14:06:33.019+0800","end":"2021-09-03T14:06:33.855+0800","steps":["trace[1159056477] 'agreement among raft nodes before linearized reading'  (duration: 835.2501ms)"],"step_count":1}
2021/09/03 14:06:33.855015 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
{"level":"warn","ts":"2021-09-03T14:06:33.855+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:30.644+0800","time spent":"3.2100667s","remote":"127.0.0.1:53536","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
{"level":"warn","ts":"2021-09-03T14:06:33.855+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:33.019+0800","time spent":"835.3228ms","remote":"127.0.0.1:53536","response type":"/etcdserverpb.KV/Range","request count":0,"request size":42,"response count":0,"response size":0,"request content":"key:\"/prophet/containers/00000000000000000005\" "}
{"level":"warn","ts":"2021-09-03T14:06:33.855+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908a80/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:33.855067 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:06:33.855069 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
2021/09/03 14:06:33.855094 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:11 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:4 version:1 >  from 8 to 6 failed with not connected
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"938070e7a3169275","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"warn","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"938070e7a3169275","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.856+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"df0309da034f18a9"}
{"level":"info","ts":"2021-09-03T14:06:33.858+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:34.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:34.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:34.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:34.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 11] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:34.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 11] sent MsgPreVote request to 6 at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:34.518+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908a80/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:34.518774 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:06:34.518826 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:11 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:4 version:1 >  from 8 to 6 failed with not connected
2021/09/03 14:06:34.638498 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:34.858+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:34.858+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:06:34.858643 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:06:34.858674 [info] [transport]: transfer stopped
2021/09/03 14:06:34.858677 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:06:34.858679 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:06:34.858688 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:06:34.858695 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:34.858700 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:34.858705 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858710 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858706 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:34.858715 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858712 [info] [transport]: send raft worker stopped
2021/09/03 14:06:34.858718 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858718 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:34.858721 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858721 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:06:34.858721 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858728 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.858734 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestIssue90 (21.09s)
=== RUN   TestIssue133
2021/09/03 14:06:34.858734 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:34.859457 [info] prophet: prophet logger set
2021/09/03 14:06:34.865672 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:34.865824 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:34.871371 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:34.871499 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:34.877009 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:34.877086 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:34.877115 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:34.877117 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:06:34.877+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:34.877+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:06:34.877+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:34.877+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:34.878+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.4272ms"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:06:34.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:06:34.883+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:34.884+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:34.886+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:35.082617 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:06:35.082+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:35.083+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:06:35.083+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:35.083+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:06:35.084439 [info] prophet: start system time monitor 
2021/09/03 14:06:35.084759 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:06:35.084942 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:35.084952 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:35.085175 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:35.085777 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:35.085797 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:35.086276 [info] prophet: load 0 containers, cost 384.6µs
2021/09/03 14:06:35.086459 [info] prophet: load 0 resources, cost 168.8µs
2021/09/03 14:06:35.087097 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:35.087107 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:35.087113 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:35.087115 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:35.087144 [info] prophet: client started
2021/09/03 14:06:35.087155 [info] prophet: client read loop started 
2021/09/03 14:06:35.087157 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:35.087161 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:35.087178 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649195 deployPath:"not set" 
2021/09/03 14:06:35.087188 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:35.087198 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:35.087252 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:35.087599 [info] prophet: load 0 jobs
2021/09/03 14:06:35.087883 [info] [raftstore]: create local store with id 1
2021/09/03 14:06:35.088387 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:35.088404 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:06:35.088408 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:06:35.088412 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:06:35.088900 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:06:35.088920 [info] [raftstore]: create init shard id:4 start:"b" end:"c" epoch:<confVer:1 version:1 > peers:<id:5 containerID:1 > 
2021/09/03 14:06:35.088926 [info] [raftstore]: create init shard id:6 start:"c" end:"d" epoch:<confVer:1 version:1 > peers:<id:7 containerID:1 > 
2021/09/03 14:06:35.090257 [info] prophet: container 1 limit added
2021/09/03 14:06:35.090324 [info] [raftstore]: prophet started
2021/09/03 14:06:35.090360 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:06:35.090369 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:35.090371 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:35.090382 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:06:35.090402 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:35.090406 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:35.090407 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
2021/09/03 14:06:35.090417 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:35.090446 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:06:35.090452 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:35.090467 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:06:35.090500 [info] [raftstore]: shard 4 peer 5 begin to create at store 1, peers: [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:06:35.090532 [info] [raftstore]: shard 4 peer 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:35.090551 [info] [raftstore]: shard 4 peer 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:35.090559 [info] [raftstore]: shard 4 peer 5 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5)"}
2021/09/03 14:06:35.090533 [info] [raftstore]: shard 2 peer 3 ********become leader now********
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 5 [peers: [5], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:35.090579 [info] [raftstore]: shard 4 peer 5 delegate register completed
2021/09/03 14:06:35.090583 [info] [raftstore]: shard 4 peer 5 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:35.090584 [info] [raftstore]: shard 4 peer 5 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgPreVoteResp from 5 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgVoteResp from 5 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became leader at term 6"}
2021/09/03 14:06:35.090616 [info] [raftstore]: shard 6 peer 7 begin to create at store 1, peers: [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:06:35.090627 [info] [raftstore]: shard 6 peer 7 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:35.090640 [info] [raftstore]: shard 6 peer 7 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:35.090641 [info] [raftstore]: shard 6 peer 7 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7)"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 7 [peers: [7], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:35.090659 [info] [raftstore]: shard 6 peer 7 delegate register completed
2021/09/03 14:06:35.090662 [info] [raftstore]: shard 6 peer 7 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:35.090671 [info] [raftstore]: shard 6 peer 7 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:35.090+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became leader at term 6"}
2021/09/03 14:06:35.090691 [info] [raftstore]: starts with 3 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:35.090693 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:35.090694 [info] [raftstore]: shards started
2021/09/03 14:06:35.090697 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:35.090705 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:06:35.090631 [info] [raftstore]: shard 4 peer 5 ********become leader now********
2021/09/03 14:06:35.090728 [info] [raftstore]: router event loop task started
2021/09/03 14:06:35.090742 [info] [raftstore]: shard 6 peer 7 ********become leader now********
2021/09/03 14:06:35.090745 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:35.090724 [info] [raftstore]: router started
2021/09/03 14:06:35.090812 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:35.090825 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:35.090876 [info] prophet: new watcher 127.0.0.1:42618 added
2021/09/03 14:06:35.090943 [info] [raftstore]: start init event
2021/09/03 14:06:35.094188 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:35.094202 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:06:35.094+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"f0e1a783f97d1f00","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"f0e1a783f97d1f00"}
2021/09/03 14:06:35.095735 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:17357338624130883328 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:17357338624130883328 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:35.095+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:35.097+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.252ms"}
{"level":"warn","ts":"2021-09-03T14:06:35.598+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:36.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:36.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:36.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:06:36.090433 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:06:36.090448 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:36.090464 [info] prophet: coordinator is stopping
2021/09/03 14:06:36.090470 [info] prophet: watcher notifer exited
2021/09/03 14:06:36.090474 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:36.090480 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:36.090482 [info] prophet: metrics are reset
2021/09/03 14:06:36.090484 [info] prophet: coordinator has been stopped
2021/09/03 14:06:36.090485 [info] prophet: background jobs has been stopped
2021/09/03 14:06:36.090530 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:36.090544 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:36.090533 [info] prophet: watcher notifier stopped
2021/09/03 14:06:36.090553 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:36.090590 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:06:36.090630 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:06:36.090641 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"warn","ts":"2021-09-03T14:06:36.098+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:36.098+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:06:36.598+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:36.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:06:36.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:06:36.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:06:36.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:06:36.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 3"}
2021/09/03 14:06:36.856049 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"warn","ts":"2021-09-03T14:06:37.099+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:37.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:06:37.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:06:37.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:06:37.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 4"}
{"level":"warn","ts":"2021-09-03T14:06:37.600+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:37.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:06:37.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:37.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:37.881+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 5"}
{"level":"warn","ts":"2021-09-03T14:06:38.101+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:38.581+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:38.581+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:38.581+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:38.581+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:38.601+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:39.101+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:39.382+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:39.382+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:39.382+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:39.382+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 7"}
{"level":"warn","ts":"2021-09-03T14:06:39.602+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:40.096+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"f0e1a783f97d1f00","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:40.096+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"f0e1a783f97d1f00","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:06:40.102+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:40.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:40.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:40.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:40.281+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 8"}
{"level":"warn","ts":"2021-09-03T14:06:40.603+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778273,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:41.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:06:41.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:06:41.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:06:41.081+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 9"}
{"level":"warn","ts":"2021-09-03T14:06:41.098+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:06:41.098+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:06:41.098+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:06:41.101+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"f0e1a783f97d1f00","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:41.101+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:41.101+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:41.101+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft f0e1a783f97d1f00 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:41.103+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:41.104+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"f0e1a783f97d1f00","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:41.106+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"f0e1a783f97d1f00","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"f0e1a783f97d1f00","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"f0e1a783f97d1f00","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"f0e1a783f97d1f00","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"f0e1a783f97d1f00","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:41.107+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 18] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:06:41.108+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from f0e1a783f97d1f00 [term: 2]"}
{"level":"warn","ts":"2021-09-03T14:06:41.599+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654692778275,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:41.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:06:41.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.781+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 18] sent MsgVote request to f0e1a783f97d1f00 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.782+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:06:41.782+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.782+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 18] at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.782+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 lost leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from f0e1a783f97d1f00 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 10"}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:06:41.783+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.5918249s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","caller":"traceutil/trace.go:171","msg":"trace[1762036511] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.5918635s","start":"2021-09-03T14:06:36.191+0800","end":"2021-09-03T14:06:41.783+0800","steps":["trace[1762036511] 'agreement among raft nodes before linearized reading'  (duration: 5.5918238s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:06:41.783+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:36.191+0800","time spent":"5.5918958s","remote":"127.0.0.1:43044","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:06:41.783+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:06:41.783+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4540/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:06:41.784+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:41.784+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"f0e1a783f97d1f00","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:41.784+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"f0e1a783f97d1f00","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:41.784+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 switched to configuration voters=(10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:41.784+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"f0e1a783f97d1f00","added-peer-id":"f0e1a783f97d1f00","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:41.785+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"f0e1a783f97d1f00","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/f0e1a783f97d1f00/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:06:41.785+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:06:41.785623 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:06:41.786+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:06:41.787254 [info] prophet: start system time monitor 
2021/09/03 14:06:41.787579 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:41.787593 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:41.787596 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:41.787615 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:41.787631 [info] prophet: client read loop started 
2021/09/03 14:06:41.787663 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:41.787676 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:41.787679 [info] prophet: client started
2021/09/03 14:06:41.787682 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:41.787683 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:41.787703 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649201 deployPath:"not set" 
2021/09/03 14:06:41.787714 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:41.787991 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:41.788040 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:41.788050 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:41.808459 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.6170951s
2021/09/03 14:06:41.808476 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:41.808479 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:06:41.810249 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:41.810259 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:41.811474 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:41.812592 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:41.812609 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:41.813581 [info] prophet: load 1 containers, cost 873.9µs
2021/09/03 14:06:41.813863 [info] prophet: load 3 resources, cost 270.1µs
2021/09/03 14:06:41.814458 [info] prophet: watcher notifier stopped
2021/09/03 14:06:41.814473 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:41.814519 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:41.814780 [info] prophet: load 0 jobs
2021/09/03 14:06:41.889056 [info] [raftstore]: create local store with id 9
2021/09/03 14:06:41.889579 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:41.893227 [info] prophet: container 9 limit added
2021/09/03 14:06:41.893349 [info] [raftstore]: prophet started
2021/09/03 14:06:41.893353 [info] prophet: container 9 heartbeat stream binded
2021/09/03 14:06:41.893427 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:06:41.893437 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:41.893451 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:41.893455 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:41.893456 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:41.893457 [info] [raftstore]: shards started
2021/09/03 14:06:41.893459 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:41.893464 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:06:41.893479 [info] [raftstore]: router started
2021/09/03 14:06:41.893511 [info] [raftstore]: router event loop task started
2021/09/03 14:06:41.893996 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:41.894111 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:41.894133 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:41.894214 [info] prophet: new watcher 127.0.0.1:42670 added
2021/09/03 14:06:41.894384 [info] [raftstore]: start init event
2021/09/03 14:06:41.895827 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:41.895839 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:06:41.896+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:ff30980430a86968 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:41.896+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:41.896851 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:41.903162 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:41.903272 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:41.903285 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:41.903353 [info] prophet: new watcher 127.0.0.1:42674 added
2021/09/03 14:06:41.903452 [info] [raftstore]: start init event
2021/09/03 14:06:41.908717 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:41.908796 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:41.908830 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:41.908862 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:41.908879 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:41.908921 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:41.908936 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:41.908940 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:41.910503 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:06:41.910572 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:41.910592 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:06:41.911690 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:06:41.914145 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:06:41.914160 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
{"level":"warn","ts":"2021-09-03T14:06:42.398+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:eaf6f4cdf9371dee RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:42.398+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:42.398248 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:42.898+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:eaf6f4cdf9371dee RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:42.899+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:42.899083 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:43.399+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:f7bec1d442f73503 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:43.399+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:43.399999 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:43.900+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:f7bec1d442f73503 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:43.900+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:43.900819 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:44.401+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:90be75bfe4267f78 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:44.401+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:44.401368 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:44.814726 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:44.814738 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:44.816959 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:44.816967 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:06:44.901+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:90be75bfe4267f78 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:44.901+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:44.901701 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:06:44.915470 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:44.915492 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:44.915496 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:44.915499 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:44.917903 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:44.9178858 +0800 CST m=+48.156824001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]), 
2021/09/03 14:06:44.917920 [info] prophet: resource 2 send schedule command, step add learner peer 10 on container 9, source create
2021/09/03 14:06:44.917954 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,1), createAt:2021-09-03 14:06:44.9179475 +0800 CST m=+48.156885701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 11 on container 9, promote learner peer 11 on container 9 to voter]), 
2021/09/03 14:06:44.917965 [info] prophet: resource 4 send schedule command, step add learner peer 11 on container 9, source create
2021/09/03 14:06:44.917984 [info] prophet: resource 6 add operator add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:6(1,1), createAt:2021-09-03 14:06:44.9179792 +0800 CST m=+48.156917401, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]), 
2021/09/03 14:06:44.917995 [info] prophet: resource 6 send schedule command, step add learner peer 12 on container 9, source create
2021/09/03 14:06:44.918054 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918099 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918115 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918137 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918172 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:10 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918188 [info] [raftstore]: shard-2 add learner peer {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918178 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918228 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:11 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918249 [info] [raftstore]: shard-4 add learner peer {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918300 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(10)"}
2021/09/03 14:06:44.918372 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:10}] Context:[10 32 10 16 214 125 149 53 10 107 71 28 189 137 173 90 125 10 136 42 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 10 16 9 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918393 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918405 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:12 containerID:9 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918430 [info] [raftstore]: shard-6 add learner peer {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7) learners=(12)"}
2021/09/03 14:06:44.918557 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:12}] Context:[10 32 10 16 54 94 115 234 129 75 65 24 179 34 93 238 74 200 206 24 16 6 26 4 8 7 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 12 16 9 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918567 [info] [raftstore]: shard 6 peer 7 applied changes [{ChangeType:AddLearnerNode Peer:{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5) learners=(11)"}
2021/09/03 14:06:44.918605 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:06:44.918630 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:11}] Context:[10 32 10 16 243 208 46 221 31 239 73 235 187 74 123 81 70 137 207 183 16 4 26 4 8 5 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 11 16 9 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.918753 [info] [raftstore]: shard 4 peer 5 applied changes [{ChangeType:AddLearnerNode Peer:{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.918879 [info] [transport]: connected to store 9
2021/09/03 14:06:44.918995 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:44.919017 [info] [raftstore]: shard 2 peer 10 begin to create at store 9, peers: [], because receive raft message
2021/09/03 14:06:44.919036 [info] [raftstore]: shard 2 peer 10 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.919052 [info] [raftstore]: shard 2 peer 10 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.919053 [info] [raftstore]: shard 2 peer 10 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:44.919102 [info] [raftstore]: shard 2 peer 10 delegate register completed
2021/09/03 14:06:44.919118 [info] [raftstore]: shard 2 peer 10 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:44.919145 [info] [raftstore]: shard 6 target peer doesn't exist, peer=<{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:44.919161 [info] [raftstore]: shard 6 peer 12 begin to create at store 9, peers: [], because receive raft message
2021/09/03 14:06:44.919179 [info] [raftstore]: shard 6 peer 12 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.919193 [info] [raftstore]: shard 6 peer 12 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.919195 [info] [raftstore]: shard 6 peer 12 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft c [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:44.919217 [info] [raftstore]: shard 6 peer 12 delegate register completed
2021/09/03 14:06:44.919220 [info] [raftstore]: shard 6 peer 12 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:44.919232 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:44.919252 [info] [raftstore]: shard 4 peer 11 begin to create at store 9, peers: [], because receive raft message
2021/09/03 14:06:44.919262 [info] [raftstore]: shard 4 peer 11 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.919265 [info] [raftstore]: shard 4 peer 11 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.919267 [info] [raftstore]: shard 4 peer 11 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [term: 0] received a MsgHeartbeat message with higher term from 7 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 6"}
2021/09/03 14:06:44.919285 [info] [raftstore]: shard 6 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 6"}
2021/09/03 14:06:44.919373 [info] [raftstore]: shard 2 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:44.919397 [info] [raftstore]: shard 4 peer 11 delegate register completed
2021/09/03 14:06:44.919401 [info] [raftstore]: shard 4 peer 11 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 6"}
2021/09/03 14:06:44.919428 [info] [raftstore]: shard 4 peer 11 ********become follower now********
2021/09/03 14:06:44.919776 [info] prophet: resource 2 send schedule command, step promote learner peer 10 on container 9 to voter, source heartbeat
2021/09/03 14:06:44.919817 [info] prophet: resource 6 ConfVer changed from 1 to 2
2021/09/03 14:06:44.919865 [info] [raftstore]: shard-2 AddNode peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.919915 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.919966 [info] [transport]: connected to store 1
2021/09/03 14:06:44.919966 [info] [raftstore]: shard 2 do apply change peer peer:<id:10 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.920007 [info] [raftstore]: shard-2 add peer {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.920+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 10)"}
2021/09/03 14:06:44.920064 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:10}] Context:[10 32 10 16 203 204 53 102 184 128 69 175 174 194 90 243 180 254 192 154 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 10 16 9]} with changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.920072 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.920225 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.920303 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.920311 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:44.920464 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:06:44.920665 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:2 version:1 > term=<6> index=<7> 
2021/09/03 14:06:44.920868 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:2 version:1 > term=<6> index=<7> 
2021/09/03 14:06:44.921371 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:44.921409 [info] prophet: resource 6 send schedule command, step promote learner peer 12 on container 9 to voter, source heartbeat
2021/09/03 14:06:44.921461 [info] prophet: resource 4 ConfVer changed from 1 to 2
2021/09/03 14:06:44.921571 [info] [raftstore]: shard-6 AddNode peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.921606 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.921634 [info] [transport]: shard 6 start send pending snap, epoch=<confVer:2 version:1 > term=<6> index=<7>
2021/09/03 14:06:44.921777 [info] [raftstore]: shard 6 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.921798 [info] [raftstore]: shard-6 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.921+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7 12)"}
2021/09/03 14:06:44.921857 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:12}] Context:[10 32 10 16 188 24 145 140 49 4 79 80 189 18 89 70 173 199 179 129 16 6 26 4 8 7 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 12 16 9]} with changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.921902 [info] [raftstore]: shard 6 peer 7 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.921787 [info] [transport]: connected to store 9
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 7, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(7 12)"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [commit: 7, lastindex: 7, lastterm: 6] restored snapshot [index: 7, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [commit: 7] restored snapshot [index: 7, term: 6]"}
2021/09/03 14:06:44.922112 [info] [raftstore]: shard 6 peer 12 receiving snapshot, skip further handling
2021/09/03 14:06:44.922131 [info] [raftstore]: shard 6 peer 12 receiving snapshot, skip further handling
2021/09/03 14:06:44.922395 [info] prophet: resource 4 send schedule command, step promote learner peer 11 on container 9 to voter, source heartbeat
2021/09/03 14:06:44.922438 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:06:44.922465 [info] [raftstore]: shard-4 AddNode peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.922518 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.922519 [info] [raftstore]: shard 6 try to send snap, header=<shard:<id:6 start:"c" end:"d" epoch:<confVer:2 version:1 > peers:<id:7 containerID:1 > peers:<id:12 containerID:9 role:Learner > > from:<id:7 containerID:1 > to:<id:12 containerID:9 role:Learner > term:6 index:7 >,size=<125>
2021/09/03 14:06:44.922583 [info] [raftstore]: shard 6 send snap complete
2021/09/03 14:06:44.922593 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.922600 [info] [transport]: shard 6 pending snap sent succ, size=<125>, epoch=<confVer:2 version:1 > term=<6> index=<7>
2021/09/03 14:06:44.922602 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 7, term: 6]"}
2021/09/03 14:06:44.922609 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:2 version:1 > term=<6> index=<7>
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(5 11)"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [commit: 7, lastindex: 7, lastterm: 6] restored snapshot [index: 7, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [commit: 7] restored snapshot [index: 7, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:44.922+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5 11)"}
2021/09/03 14:06:44.922655 [info] [raftstore]: shard 4 peer 11 receiving snapshot, skip further handling
2021/09/03 14:06:44.922697 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:11}] Context:[10 32 10 16 47 233 167 135 233 216 73 97 134 76 146 150 190 235 34 168 16 4 26 4 8 5 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 11 16 9]} with changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:44.922724 [info] [raftstore]: shard 4 peer 5 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:44.922794 [info] [raftstore]: shard 4 peer 11 receiving snapshot, skip further handling
2021/09/03 14:06:44.923155 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"b" end:"c" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 role:Learner > > from:<id:5 containerID:1 > to:<id:11 containerID:9 role:Learner > term:6 index:7 >,size=<125>
2021/09/03 14:06:44.923194 [info] [raftstore]: shard 4 send snap complete
2021/09/03 14:06:44.923208 [info] [transport]: shard 4 pending snap sent succ, size=<125>, epoch=<confVer:2 version:1 > term=<6> index=<7>
2021/09/03 14:06:44.923351 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:06:44.9178858 +0800 CST m=+48.156824001, startAt:2021-09-03 14:06:44.9179148 +0800 CST m=+48.156853001, currentStep:2, steps:[add learner peer 10 on container 9, promote learner peer 10 on container 9 to voter]) finished) finish, takes 5.4238ms, 
2021/09/03 14:06:44.923392 [info] prophet: resource 6 ConfVer changed from 2 to 3
2021/09/03 14:06:44.924261 [info] prophet: resource 6 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:6(1,1), createAt:2021-09-03 14:06:44.9179792 +0800 CST m=+48.156917401, startAt:2021-09-03 14:06:44.9179929 +0800 CST m=+48.156931201, currentStep:2, steps:[add learner peer 12 on container 9, promote learner peer 12 on container 9 to voter]) finished) finish, takes 6.2592ms, 
2021/09/03 14:06:44.924298 [info] prophet: resource 4 ConfVer changed from 2 to 3
2021/09/03 14:06:44.925389 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [9]} (kind:resource,replica, resource:4(1,1), createAt:2021-09-03 14:06:44.9179475 +0800 CST m=+48.156885701, startAt:2021-09-03 14:06:44.9179634 +0800 CST m=+48.156901701, currentStep:2, steps:[add learner peer 11 on container 9, promote learner peer 11 on container 9 to voter]) finished) finish, takes 7.4139ms, 
2021/09/03 14:06:44.969666 [info] [raftstore]: shard 4 peer 11 received a snapshot at 7
2021/09/03 14:06:44.969681 [info] [raftstore]: shard 4 peer 11 begin to apply snapshot
2021/09/03 14:06:44.969687 [info] [raftstore]: shard 4 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:44.969696 [info] [raftstore]: shard 4 peer 11 apply snapshot state completed, apply state {AppliedIndex:7 TruncatedState:{Index:7 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"warn","ts":"2021-09-03T14:06:45.401+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a6cb220ce12ac290 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:45.402+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:45.402136 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:45.902+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:a6cb220ce12ac290 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:06:45.902+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:06:45.902894 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:85","msg":"3 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 6"}
2021/09/03 14:06:45.968655 [info] [raftstore]: shard 2 peer 3 ********become follower now********
{"level":"warn","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:85","msg":"5 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became follower at term 6"}
2021/09/03 14:06:45.968668 [info] [raftstore]: shard 4 peer 5 ********become follower now********
{"level":"warn","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:85","msg":"7 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:45.968+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 6"}
2021/09/03 14:06:45.968677 [info] [raftstore]: shard 6 peer 7 ********become follower now********
2021/09/03 14:06:45.970749 [info] [raftstore]: shard 4 begin apply snapshot data
2021/09/03 14:06:45.970847 [info] [raftstore]: shard 4 snapshot is applied, shard=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:45.970867 [info] [raftstore]: shard 4 shard changed after apply snapshot, from=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:45.970908 [info] [raftstore]: shard 6 peer 12 received a snapshot at 7
2021/09/03 14:06:45.970910 [info] [raftstore]: shard 6 peer 12 begin to apply snapshot
2021/09/03 14:06:45.970914 [info] [raftstore]: shard 6 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:45.970920 [info] [raftstore]: shard 6 peer 12 apply snapshot state completed, apply state {AppliedIndex:7 TruncatedState:{Index:7 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:45.971020 [info] [raftstore]: shard 4 delete exists snap gz file /tmp/cube/node-1/snapshots/4_6_7.gz, header is shard:<id:4 start:"b" end:"c" epoch:<confVer:2 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 role:Learner > > from:<> to:<> term:6 index:7 
2021/09/03 14:06:45.971072 [info] [raftstore]: shard 4 apply snapshot data complete, {Term:6 Vote:0 Commit:7}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(8059581275970677410 10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"6fd96278109f2aa2","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 switched to configuration voters=(8059581275970677410 10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"f0e1a783f97d1f00","added-peer-id":"6fd96278109f2aa2","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.404+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
2021/09/03 14:06:46.405735 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:10  Member:ID:8059581275970677410 peerURLs:"http://127.0.0.1:50002"  Members:[ID:8059581275970677410 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:17357338624130883328 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:46.405+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:46.407+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.2944ms"}
{"level":"info","ts":"2021-09-03T14:06:46.410+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"6fd96278109f2aa2","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:46.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:46.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:46.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6fd96278109f2aa2 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:06:46.412+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:46.413+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.415+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"6fd96278109f2aa2","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"6fd96278109f2aa2","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:46.416+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"6fd96278109f2aa2","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"f0e1a783f97d1f00","to":"6fd96278109f2aa2","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"6fd96278109f2aa2","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:06:46.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 elected leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:06:46.418+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"f0e1a783f97d1f00","to":"6fd96278109f2aa2","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:46.418+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6fd96278109f2aa2","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"6fd96278109f2aa2","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 switched to configuration voters=(10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6fd96278109f2aa2","added-peer-id":"f0e1a783f97d1f00","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 switched to configuration voters=(8059581275970677410 10650127570946328820 17357338624130883328)"}
{"level":"info","ts":"2021-09-03T14:06:46.419+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6fd96278109f2aa2","added-peer-id":"6fd96278109f2aa2","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:06:46.420+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"6fd96278109f2aa2","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/6fd96278109f2aa2/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:06:46.420540 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:06:46.420+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:06:46.420+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:06:46.421966 [info] prophet: start system time monitor 
2021/09/03 14:06:46.424339 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:06:46.424345 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:46.424349 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:46.424484 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:46.424657 [info] prophet: client read loop started 
2021/09/03 14:06:46.424672 [info] prophet: client started
2021/09/03 14:06:46.424676 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:46.424678 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:46.424680 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:46.424683 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:46.424695 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649206 deployPath:"not set" 
2021/09/03 14:06:46.424705 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:46.424832 [info] [raftstore]: create local store with id 13
2021/09/03 14:06:46.425282 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:06:46.428246 [info] prophet: container 13 limit added
2021/09/03 14:06:46.428298 [info] [raftstore]: prophet started
2021/09/03 14:06:46.428334 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:06:46.428342 [info] prophet: container 13 heartbeat stream binded
2021/09/03 14:06:46.428355 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:46.428359 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:46.428364 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:46.428366 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:46.428367 [info] [raftstore]: shards started
2021/09/03 14:06:46.428373 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:46.428381 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:06:46.428391 [info] [raftstore]: router started
2021/09/03 14:06:46.428407 [info] [raftstore]: router event loop task started
2021/09/03 14:06:46.428400 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:46.428508 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:46.428517 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:46.428573 [info] prophet: new watcher 127.0.0.1:42736 added
2021/09/03 14:06:46.428660 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:06:46.467+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"6fd96278109f2aa2","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6fd96278109f2aa2","to":"f0e1a783f97d1f00","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.505+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6fd96278109f2aa2","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6fd96278109f2aa2","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6fd96278109f2aa2","to":"f0e1a783f97d1f00","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:46.506+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
2021/09/03 14:06:46.513640 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:06:46.524207 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:06:46.5241836 +0800 CST m=+49.763121801, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 14 on container 13, promote learner peer 14 on container 13 to voter]), 
2021/09/03 14:06:46.524238 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source create
2021/09/03 14:06:46.524293 [info] prophet: resource 4 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:4(1,3), createAt:2021-09-03 14:06:46.5242827 +0800 CST m=+49.763220901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 15 on container 13, promote learner peer 15 on container 13 to voter]), 
2021/09/03 14:06:46.524315 [info] prophet: resource 4 send schedule command, step add learner peer 15 on container 13, source create
2021/09/03 14:06:46.524353 [info] prophet: resource 6 add operator add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:6(1,3), createAt:2021-09-03 14:06:46.5243451 +0800 CST m=+49.763283401, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 16 on container 13, promote learner peer 16 on container 13 to voter]), 
2021/09/03 14:06:46.524371 [info] prophet: resource 6 send schedule command, step add learner peer 16 on container 13, source create
2021/09/03 14:06:46.524413 [info] [raftstore]: shard-2 is not leader, skip heartbeat resp
2021/09/03 14:06:46.524432 [info] [raftstore]: shard-4 is not leader, skip heartbeat resp
2021/09/03 14:06:46.524435 [info] [raftstore]: shard-6 is not leader, skip heartbeat resp
2021/09/03 14:06:46.971231 [info] [raftstore]: shard 6 begin apply snapshot data
2021/09/03 14:06:46.971484 [info] [raftstore]: shard 6 delete exists snap gz file /tmp/cube/node-1/snapshots/6_6_7.gz, header is shard:<id:6 start:"c" end:"d" epoch:<confVer:2 version:1 > peers:<id:12 containerID:9 role:Learner > peers:<id:7 containerID:1 > > from:<> to:<> term:6 index:7 
2021/09/03 14:06:46.971533 [info] [raftstore]: shard 6 snapshot is applied, shard=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:46.971535 [info] [raftstore]: shard 6 apply snapshot data complete, {Term:6 Vote:0 Commit:7}
2021/09/03 14:06:46.971558 [info] [raftstore]: shard 6 shard changed after apply snapshot, from=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:6 Start:[99] End:[100] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:06:47.168+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.168+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.168+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.168+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 [logterm: 6, index: 8] sent MsgPreVote request to a at term 6"}
2021/09/03 14:06:47.168797 [info] [raftstore]: shard 2 peer 3 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:47.168+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 0, index: 0, vote: 0] cast MsgPreVote for 3 [logterm: 6, index: 8] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from a at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 [logterm: 6, index: 8] sent MsgVote request to a at term 7"}
2021/09/03 14:06:47.169121 [info] [raftstore]: shard 2 peer 3 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [term: 6] received a MsgVote message with higher term from 3 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 7"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 0, index: 0, vote: 0] cast MsgVote for 3 [logterm: 6, index: 8] at term 7"}
2021/09/03 14:06:47.169309 [info] [raftstore]: shard 2 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from a at term 7"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 7"}
2021/09/03 14:06:47.169426 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:06:47.169491 [info] [raftstore]: shard 2 peer 10 ********become follower now********
2021/09/03 14:06:47.169519 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.169569 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:06:47.169580 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
2021/09/03 14:06:47.169660 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(3 10)"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:06:47.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:06:47.169714 [info] [raftstore]: shard 2 peer 10 receiving snapshot, skip further handling
2021/09/03 14:06:47.169910 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:10 containerID:9 > > from:<id:3 containerID:1 > to:<id:10 containerID:9 role:Learner > term:6 index:8 >,size=<125>
2021/09/03 14:06:47.169950 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:47.169956 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:06:47.190856 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.190966 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.190997 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:47.291550 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.291642 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.291689 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
{"level":"info","ts":"2021-09-03T14:06:47.318+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.318+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.318+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.318+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 7] sent MsgPreVote request to 5 at term 6"}
2021/09/03 14:06:47.318930 [info] [raftstore]: shard 4 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:47.318+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 [logterm: 6, index: 8, vote: 5] rejected MsgPreVote from b [logterm: 6, index: 7] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp rejection from 5 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b has received 1 MsgPreVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:47.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 6"}
2021/09/03 14:06:47.319106 [info] [raftstore]: shard 4 peer 11 ********become follower now********
2021/09/03 14:06:47.369424 [info] [raftstore]: shard 2 peer 10 received a snapshot at 8
2021/09/03 14:06:47.369440 [info] [raftstore]: shard 2 peer 10 begin to apply snapshot
2021/09/03 14:06:47.369447 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:47.369458 [info] [raftstore]: shard 2 peer 10 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.391162 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.391243 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.391272 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:47.491382 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.491467 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.491499 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:47.591859 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.591938 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.591962 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
{"level":"info","ts":"2021-09-03T14:06:47.668+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.668+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.668+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgPreVoteResp from 5 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.668+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 [logterm: 6, index: 8] sent MsgPreVote request to b at term 6"}
2021/09/03 14:06:47.668841 [info] [raftstore]: shard 4 peer 5 ********become follower now********
2021/09/03 14:06:47.691841 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.691933 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.691959 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
{"level":"info","ts":"2021-09-03T14:06:47.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:47.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 8] sent MsgPreVote request to c at term 6"}
2021/09/03 14:06:47.769711 [info] [raftstore]: shard 6 peer 7 ********become follower now********
2021/09/03 14:06:47.791895 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.792011 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.792046 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:47.891248 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.891337 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.891378 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:47.990877 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:47.990966 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:47.990996 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.091751 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:48.091802 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.091813 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.191473 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:48.191571 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.191604 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.291359 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:48.291429 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.291456 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.370312 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:48.370377 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:48.370392 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:10 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 7, vote: 0] ignored MsgPreVote from 7 [logterm: 6, index: 8] at term 6: lease is not expired (remaining ticks: 6)"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 7, vote: 0] cast MsgPreVote for 5 [logterm: 6, index: 8] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 7] sent MsgPreVote request to 5 at term 6"}
2021/09/03 14:06:48.370491 [info] [raftstore]: shard 4 peer 11 ********become follower now********
2021/09/03 14:06:48.370575 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:10 containerID:9 > > from:<> to:<> term:6 index:8 
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgVoteResp from 5 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 [logterm: 6, index: 8] sent MsgVote request to b at term 7"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 [logterm: 6, index: 8, vote: 5] rejected MsgPreVote from b [logterm: 6, index: 7] at term 7"}
2021/09/03 14:06:48.370623 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:7 Vote:3 Commit:8}
2021/09/03 14:06:48.370666 [info] [raftstore]: shard 4 peer 5 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 6] received a MsgVote message with higher term from 5 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 7"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 7, vote: 0] cast MsgVote for 5 [logterm: 6, index: 8] at term 7"}
2021/09/03 14:06:48.370802 [info] [raftstore]: shard 4 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgVoteResp from b at term 7"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:48.370+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became leader at term 7"}
2021/09/03 14:06:48.370925 [info] [raftstore]: shard 4 peer 5 ********become leader now********
2021/09/03 14:06:48.371007 [info] [raftstore]: shard 4 peer 11 ********become follower now********
2021/09/03 14:06:48.371023 [info] prophet: resource 4 send schedule command, step add learner peer 15 on container 13, source heartbeat
2021/09/03 14:06:48.371081 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.371215 [error] [raftstore]: shard-4 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.371374 [info] [raftstore]: shard 4 do apply change peer peer:<id:11 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.371392 [info] [raftstore]: shard-4 add peer {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.371+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(5 11)"}
2021/09/03 14:06:48.371460 [info] [raftstore]: shard 4 peer 11 applied changes [{ChangeType:AddNode Peer:{ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.391492 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:48.391580 [info] prophet: resource 4 send schedule command, step add learner peer 15 on container 13, source heartbeat
2021/09/03 14:06:48.391627 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.391647 [info] [raftstore]: shard-4 AddLearnerNode peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.391659 [error] [raftstore]: shard-2 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:48.391682 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.391879 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:15 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.391902 [info] [raftstore]: shard-4 add learner peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.391920 [info] [raftstore]: shard 4 do apply change peer changeType:AddLearnerNode peer:<id:15 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.391953 [info] [raftstore]: shard-4 add learner peer {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.391+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5 11) learners=(15)"}
{"level":"info","ts":"2021-09-03T14:06:48.391+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(5 11) learners=(15)"}
2021/09/03 14:06:48.392020 [info] [raftstore]: shard 4 peer 11 applied changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.392031 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:15}] Context:[10 32 10 16 114 5 13 54 21 227 67 37 172 62 199 188 133 123 126 226 16 4 26 4 8 5 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 15 16 13 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.392046 [info] [raftstore]: shard 4 peer 5 applied changes [{ChangeType:AddLearnerNode Peer:{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.392235 [info] prophet: resource 4 ConfVer changed from 3 to 4
2021/09/03 14:06:48.393592 [info] prophet: resource 4 send schedule command, step promote learner peer 15 on container 13 to voter, source heartbeat
2021/09/03 14:06:48.393604 [info] [transport]: connected to store 13
2021/09/03 14:06:48.393660 [info] [raftstore]: shard 4 target peer doesn't exist, peer=<{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:48.393675 [info] [raftstore]: shard-4 AddNode peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.393685 [info] [raftstore]: shard 4 peer 15 begin to create at store 13, peers: [], because receive raft message
2021/09/03 14:06:48.393696 [info] [raftstore]: shard-4 propose conf change peer [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.393706 [info] [raftstore]: shard 4 peer 15 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.393712 [info] [raftstore]: shard 4 peer 15 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:48.393715 [info] [raftstore]: shard 4 peer 15 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"f switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft f [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:48.393759 [info] [raftstore]: shard 4 peer 15 delegate register completed
2021/09/03 14:06:48.393762 [info] [raftstore]: shard 4 peer 15 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [term: 0] received a MsgHeartbeat message with higher term from 5 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became follower at term 7"}
2021/09/03 14:06:48.393800 [info] [raftstore]: shard 4 peer 15 ********become follower now********
2021/09/03 14:06:48.393842 [info] [raftstore]: shard 4 do apply change peer peer:<id:15 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.393862 [info] [raftstore]: shard-4 add peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.393880 [info] [raftstore]: shard 4 do apply change peer peer:<id:15 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.393888 [info] [raftstore]: shard-4 add peer {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5 11 15)"}
{"level":"info","ts":"2021-09-03T14:06:48.393+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(5 11 15)"}
2021/09/03 14:06:48.393910 [info] [raftstore]: shard 4 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:15}] Context:[10 32 10 16 178 181 167 227 112 182 65 218 187 207 111 230 220 215 221 198 16 4 26 4 8 5 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 15 16 13]} with changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.393935 [info] [raftstore]: shard 4 peer 11 applied changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.393965 [info] [raftstore]: shard 4 peer 5 applied changes [{ChangeType:AddNode Peer:{ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.394050 [info] prophet: resource 4 ConfVer changed from 4 to 5
2021/09/03 14:06:48.394311 [info] [transport]: connected to store 1
2021/09/03 14:06:48.394537 [info] [raftstore]: shard 4 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:48.394776 [info] [raftstore]: shard 4 snapshot created, epoch=<confVer:5 version:1 > term=<7> index=<11> 
2021/09/03 14:06:48.395203 [info] prophet: resource 4 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:4(1,3), createAt:2021-09-03 14:06:46.5242827 +0800 CST m=+49.763220901, startAt:2021-09-03 14:06:46.5243095 +0800 CST m=+49.763247701, currentStep:2, steps:[add learner peer 15 on container 13, promote learner peer 15 on container 13 to voter]) finished) finish, takes 1.870883s, 
2021/09/03 14:06:48.491653 [info] prophet: resource 2 send schedule command, step add learner peer 14 on container 13, source heartbeat
2021/09/03 14:06:48.491745 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.491786 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.491950 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:14 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.491974 [info] [raftstore]: shard-2 add learner peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 10) learners=(14)"}
2021/09/03 14:06:48.492041 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:14 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.492055 [info] [raftstore]: shard-2 add learner peer {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.492057 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:14}] Context:[10 32 10 16 76 94 0 203 185 112 68 72 157 127 78 10 147 30 206 47 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 14 16 13 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.492105 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(3 10) learners=(14)"}
2021/09/03 14:06:48.492174 [info] [raftstore]: shard 2 peer 10 applied changes [{ChangeType:AddLearnerNode Peer:{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.492175 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:48.492218 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:06:48.492235 [info] [raftstore]: shard 2 peer 14 begin to create at store 13, peers: [], because receive raft message
2021/09/03 14:06:48.492257 [info] [raftstore]: shard 2 peer 14 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.492263 [info] [raftstore]: shard 2 peer 14 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:48.492264 [info] [raftstore]: shard 2 peer 14 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"e switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft e [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:48.492308 [info] [raftstore]: shard 2 peer 14 delegate register completed
2021/09/03 14:06:48.492314 [info] [raftstore]: shard 2 peer 14 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:48.492+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became follower at term 7"}
2021/09/03 14:06:48.492364 [info] [raftstore]: shard 2 peer 14 ********become follower now********
2021/09/03 14:06:48.492527 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:48.492882 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<7> index=<10> 
2021/09/03 14:06:48.493285 [info] prophet: resource 2 send schedule command, step promote learner peer 14 on container 13 to voter, source heartbeat
2021/09/03 14:06:48.493380 [info] [raftstore]: shard-2 AddNode peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.493412 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.493476 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<7> index=<10>
2021/09/03 14:06:48.493583 [info] [transport]: connected to store 13
2021/09/03 14:06:48.493588 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:10 containerID:9 > peers:<id:14 containerID:13 role:Learner > > from:<id:3 containerID:1 > to:<id:14 containerID:13 role:Learner > term:7 index:10 >,size=<125>
2021/09/03 14:06:48.493635 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:06:48.493653 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:4 version:1 > term=<7> index=<10>
2021/09/03 14:06:48.493595 [info] [raftstore]: shard 2 do apply change peer peer:<id:14 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.493668 [info] [raftstore]: shard 2 do apply change peer peer:<id:14 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.493668 [info] [raftstore]: shard-2 add peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.493677 [info] [raftstore]: shard-2 add peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 10 14)"}
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 7]"}
2021/09/03 14:06:48.493711 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:14}] Context:[10 32 10 16 212 147 46 217 39 139 64 204 131 51 137 65 177 62 189 171 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 14 16 13]} with changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.493720 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"e switched to configuration voters=(3 10 14)"}
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(3 10 14)"}
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [commit: 10, lastindex: 10, lastterm: 7] restored snapshot [index: 10, term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:48.493+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [commit: 10] restored snapshot [index: 10, term: 7]"}
2021/09/03 14:06:48.493746 [info] [raftstore]: shard 2 peer 10 applied changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:48.493751 [info] [raftstore]: shard 2 peer 14 received a snapshot at 10
2021/09/03 14:06:48.493761 [info] [raftstore]: shard 2 peer 14 begin to apply snapshot
2021/09/03 14:06:48.493764 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:48.493768 [info] [raftstore]: shard 2 peer 14 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:7 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:48.493787 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:06:48.494924 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:06:46.5241836 +0800 CST m=+49.763121801, startAt:2021-09-03 14:06:46.5242304 +0800 CST m=+49.763168601, currentStep:2, steps:[add learner peer 14 on container 13, promote learner peer 14 on container 13 to voter]) finished) finish, takes 1.9706835s, 
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 7] sent MsgPreVote request to 7 at term 6"}
2021/09/03 14:06:48.519152 [info] [raftstore]: shard 6 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 8, vote: 7] rejected MsgPreVote from c [logterm: 6, index: 7] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp rejection from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c has received 1 MsgPreVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:48.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 6"}
2021/09/03 14:06:48.519407 [info] [raftstore]: shard 6 peer 12 ********become follower now********
2021/09/03 14:06:49.494215 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:06:49.494314 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:49.494341 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:49.494425 [info] [transport]: shard 4 start send pending snap, epoch=<confVer:5 version:1 > term=<7> index=<11>
2021/09/03 14:06:49.494479 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_7_10.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:10 containerID:9 > peers:<id:14 containerID:13 role:Learner > > from:<> to:<> term:7 index:10 
2021/09/03 14:06:49.494517 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:7 Vote:0 Commit:10}
2021/09/03 14:06:49.494550 [info] [raftstore]: shard 4 try to send snap, header=<shard:<id:4 start:"b" end:"c" epoch:<confVer:5 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 > peers:<id:15 containerID:13 > > from:<id:5 containerID:1 > to:<id:15 containerID:13 role:Learner > term:7 index:11 >,size=<127>
{"level":"info","ts":"2021-09-03T14:06:49.494+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:49.494+0800","caller":"etcdserver/zap_raft.go:77","msg":"f switched to configuration voters=(5 11 15)"}
{"level":"info","ts":"2021-09-03T14:06:49.494+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [commit: 11, lastindex: 11, lastterm: 7] restored snapshot [index: 11, term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:49.494+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [commit: 11] restored snapshot [index: 11, term: 7]"}
2021/09/03 14:06:49.494693 [info] [raftstore]: shard 4 peer 15 receiving snapshot, skip further handling
2021/09/03 14:06:49.494756 [info] [raftstore]: shard 4 send snap complete
2021/09/03 14:06:49.494774 [info] [transport]: shard 4 pending snap sent succ, size=<127>, epoch=<confVer:5 version:1 > term=<7> index=<11>
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 6"}
2021/09/03 14:06:49.569507 [info] [raftstore]: shard 2 do apply change peer peer:<id:14 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 8] sent MsgPreVote request to c at term 6"}
2021/09/03 14:06:49.569525 [info] [raftstore]: shard-2 add peer {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e switched to configuration voters=(3 10 14)"}
2021/09/03 14:06:49.569593 [info] [raftstore]: shard 2 peer 14 applied changes [{ChangeType:AddNode Peer:{ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:10 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.569635 [info] [raftstore]: shard 4 peer 15 received a snapshot at 11
2021/09/03 14:06:49.569649 [info] [raftstore]: shard 4 peer 15 begin to apply snapshot
2021/09/03 14:06:49.569654 [info] [raftstore]: shard 4 clear 0 meta keys and 0 raft keys
2021/09/03 14:06:49.569663 [info] [raftstore]: shard 4 peer 15 apply snapshot state completed, apply state {AppliedIndex:11 TruncatedState:{Index:11 Term:7 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 7, vote: 0] cast MsgPreVote for 7 [logterm: 6, index: 8] at term 6"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgVoteResp from 7 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 8] sent MsgVote request to c at term 7"}
2021/09/03 14:06:49.569822 [info] [raftstore]: shard 6 peer 7 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [term: 6] received a MsgVote message with higher term from 7 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 7"}
{"level":"info","ts":"2021-09-03T14:06:49.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 7, vote: 0] cast MsgVote for 7 [logterm: 6, index: 8] at term 7"}
{"level":"info","ts":"2021-09-03T14:06:49.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgVoteResp from c at term 7"}
{"level":"info","ts":"2021-09-03T14:06:49.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:49.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became leader at term 7"}
2021/09/03 14:06:49.570113 [info] [raftstore]: shard 6 peer 7 ********become leader now********
2021/09/03 14:06:49.570218 [info] [raftstore]: shard 6 peer 12 ********become follower now********
2021/09/03 14:06:49.570335 [info] prophet: resource 6 send schedule command, step add learner peer 16 on container 13, source heartbeat
2021/09/03 14:06:49.570443 [info] [raftstore]: shard 6 do apply change peer peer:<id:12 containerID:9 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.570473 [info] [raftstore]: shard-6 add peer {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.570457 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:49.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(7 12)"}
2021/09/03 14:06:49.570519 [info] [raftstore]: shard 6 peer 12 applied changes [{ChangeType:AddNode Peer:{ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.570523 [error] [raftstore]: shard-6 has not applied to current term, applied_term 6, current_term 7
2021/09/03 14:06:49.591757 [info] prophet: resource 6 send schedule command, step add learner peer 16 on container 13, source heartbeat
2021/09/03 14:06:49.591807 [info] [raftstore]: shard-6 AddLearnerNode peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:49.591835 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.592097 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.592121 [info] [raftstore]: shard-6 add learner peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.592+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7 12) learners=(16)"}
2021/09/03 14:06:49.592159 [info] [raftstore]: shard 6 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:13 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.592213 [info] [raftstore]: shard-6 add learner peer {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.592195 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:16}] Context:[10 32 10 16 95 27 123 191 63 95 67 56 166 128 147 84 192 35 222 253 16 6 26 4 8 7 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 16 16 13 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:49.592269 [info] [raftstore]: shard 6 peer 7 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.592+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(7 12) learners=(16)"}
2021/09/03 14:06:49.592337 [info] [raftstore]: shard 6 target peer doesn't exist, peer=<{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:06:49.592361 [info] prophet: resource 6 ConfVer changed from 3 to 4
2021/09/03 14:06:49.592395 [info] [raftstore]: shard 6 peer 16 begin to create at store 13, peers: [], because receive raft message
2021/09/03 14:06:49.592425 [info] [raftstore]: shard 6 peer 16 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:49.592443 [info] [raftstore]: shard 6 peer 16 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:49.592445 [info] [raftstore]: shard 6 peer 16 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:06:49.592+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:49.592+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:49.592+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 10 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:06:49.592364 [info] [raftstore]: shard 6 peer 12 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.592499 [info] [raftstore]: shard 6 peer 16 delegate register completed
2021/09/03 14:06:49.592556 [info] [raftstore]: shard 6 peer 16 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:49.593946 [info] prophet: resource 6 send schedule command, step promote learner peer 16 on container 13 to voter, source heartbeat
2021/09/03 14:06:49.593994 [info] [raftstore]: shard-6 AddNode peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:49.594024 [info] [raftstore]: shard-6 propose conf change peer [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.594199 [info] [raftstore]: shard 6 do apply change peer peer:<id:16 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.594215 [info] [raftstore]: shard-6 add peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.594229 [info] [raftstore]: shard 6 do apply change peer peer:<id:16 containerID:13 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.594255 [info] [raftstore]: shard-6 add peer {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.594+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(7 12 16)"}
2021/09/03 14:06:49.594309 [info] [raftstore]: shard 6 peer 12 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:06:49.594+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7 12 16)"}
2021/09/03 14:06:49.594328 [info] [raftstore]: shard 6 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:16}] Context:[10 32 10 16 11 24 39 238 220 102 71 223 191 149 179 79 68 113 188 10 16 6 26 4 8 7 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 16 16 13]} with changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:49.594346 [info] [raftstore]: shard 6 peer 7 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:06:49.594463 [info] prophet: resource 6 ConfVer changed from 4 to 5
2021/09/03 14:06:49.595738 [info] prophet: resource 6 operator(add-rule-peer {add peer: container [13]} (kind:resource,replica, resource:6(1,3), createAt:2021-09-03 14:06:46.5243451 +0800 CST m=+49.763283401, startAt:2021-09-03 14:06:46.5243667 +0800 CST m=+49.763304901, currentStep:2, steps:[add learner peer 16 on container 13, promote learner peer 16 on container 13 to voter]) finished) finish, takes 3.071358s, 
2021/09/03 14:06:49.648786 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:06:49.648832 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:42676->127.0.0.1:30000: use of closed network connection
2021/09/03 14:06:49.648835 [error] prophet: client read loop stopped
2021/09/03 14:06:49.649795 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:06:49.649847 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"info","ts":"2021-09-03T14:06:49.649+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:49.649860 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:06:49.649869 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:06:49.649872 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:06:49.649874 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:49.649878 [info] prophet: watcher notifer exited
2021/09/03 14:06:49.649850 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:49.649853 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:49.649908 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:06:49.649856 [info] prophet: coordinator is stopping
2021/09/03 14:06:49.649933 [info] prophet: coordinator has been stopped
2021/09/03 14:06:49.649935 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:49.649885 [info] prophet: metrics are reset
2021/09/03 14:06:49.649939 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:49.649938 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:06:49.649944 [info] prophet: background jobs has been stopped
2021/09/03 14:06:49.649947 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:49.649942 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:49.649963 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:49.649978 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:49.649985 [info] prophet: watcher notifier stopped
2021/09/03 14:06:49.649987 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:49.649992 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:49.649995 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:49.649999 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:49.650001 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:49.649949 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:06:49.650400 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:06:49.650430 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:06:49.650412 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:06:49.650459 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:06:49.651+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.651+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 10] starts to transfer leadership to f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to f0e1a783f97d1f00 after received MsgAppResp"}
2021/09/03 14:06:49.652428 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [term 10] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 received MsgVoteResp from f0e1a783f97d1f00 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 10, index: 52] sent MsgVote request to 6fd96278109f2aa2 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 10, index: 52] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.652+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 lost leader 93ccda9956d988f4 at term 11"}
2021/09/03 14:06:49.652570 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [term: 10] received a MsgVote message with higher term from f0e1a783f97d1f00 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [logterm: 10, index: 52, vote: 0] cast MsgVote for f0e1a783f97d1f00 [logterm: 10, index: 52] at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 10] received a MsgVote message with higher term from f0e1a783f97d1f00 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 10, index: 52, vote: 0] cast MsgVote for f0e1a783f97d1f00 [logterm: 10, index: 52] at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 received MsgVoteResp from 6fd96278109f2aa2 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 elected leader f0e1a783f97d1f00 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.653+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader f0e1a783f97d1f00 at term 11"}
{"level":"info","ts":"2021-09-03T14:06:49.654+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 elected leader f0e1a783f97d1f00 at term 11"}
2021/09/03 14:06:49.655626 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:06:49.655641 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:06:49.657657 [info] prophet: load 3 containers, cost 1.9125ms
2021/09/03 14:06:49.657994 [info] prophet: load 3 resources, cost 324.6µs
2021/09/03 14:06:49.658573 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:49.658580 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:49.658906 [info] prophet: load 0 jobs
2021/09/03 14:06:49.691049 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.691072 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.691078 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.750661 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:49.751+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"f0e1a783f97d1f00","took":"100.645ms"}
{"level":"info","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:49.751+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"f0e1a783f97d1f00","error":"failed to read f0e1a783f97d1f00 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"6fd96278109f2aa2","error":"failed to read 6fd96278109f2aa2 on stream MsgApp v2 (context canceled)"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"f0e1a783f97d1f00","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"f0e1a783f97d1f00","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"6fd96278109f2aa2","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node f0e1a783f97d1f00)"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"6fd96278109f2aa2","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:49.752+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 6fd96278109f2aa2)"}
{"level":"info","ts":"2021-09-03T14:06:49.753+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:06:49.791415 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.791434 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.791440 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.891775 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.891796 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.891802 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.894250 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:49.894334 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:49.894343 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:49.894420 [info] prophet: container 9 heartbeat stream binded
2021/09/03 14:06:49.990983 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.991000 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:49.991007 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.091642 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:50.091676 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.091682 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.091688 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:50.102+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:50.191096 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.191118 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.191123 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.291463 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.291484 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.291489 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.390994 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.391015 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.391023 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.491085 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.491105 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.491110 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.570135 [info] [raftstore]: shard 4 begin apply snapshot data
2021/09/03 14:06:50.570194 [info] [raftstore]: shard 4 snapshot is applied, shard=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:50.570224 [info] [raftstore]: shard 4 shard changed after apply snapshot, from=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:15 ContainerID:13 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:4 Start:[98] End:[99] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:9 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:13 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:06:50.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [term: 0] received a MsgHeartbeat message with higher term from 7 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:50.570+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became follower at term 7"}
2021/09/03 14:06:50.570315 [info] [raftstore]: shard 6 peer 16 ********become follower now********
2021/09/03 14:06:50.570344 [info] [raftstore]: shard 4 delete exists snap gz file /tmp/cube/node-2/snapshots/4_7_11.gz, header is shard:<id:4 start:"b" end:"c" epoch:<confVer:5 version:1 > peers:<id:5 containerID:1 > peers:<id:11 containerID:9 > peers:<id:15 containerID:13 > > from:<> to:<> term:7 index:11 
2021/09/03 14:06:50.570382 [info] [raftstore]: shard 4 apply snapshot data complete, {Term:7 Vote:0 Commit:11}
2021/09/03 14:06:50.570624 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:50.570933 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:5 version:1 > term=<7> index=<11> 
2021/09/03 14:06:50.591066 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.591088 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.591094 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.650506 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:06:50.650605 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:06:50.650615 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:06:50.650698 [info] prophet: new watcher 127.0.0.1:46952 added
2021/09/03 14:06:50.650832 [info] [raftstore]: start init event
2021/09/03 14:06:50.691669 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.691689 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:50.691695 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:50.754+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:50.754+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:06:50.754355 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:06:50.754379 [info] [transport]: transfer stopped
2021/09/03 14:06:50.754382 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:06:50.754383 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:06:50.754387 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:06:50.754391 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754392 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:50.754398 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754392 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:50.754401 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754396 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:50.754406 [info] [transport]: send raft worker stopped
2021/09/03 14:06:50.754407 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754400 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754409 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754403 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754401 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:50.754416 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:50.754441 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:06:50.754459 [info] [raftstore]: store 1 rpc stopped
{"level":"info","ts":"2021-09-03T14:06:50.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"e is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:50.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became pre-candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:50.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"e received MsgPreVoteResp from e at term 7"}
{"level":"info","ts":"2021-09-03T14:06:50.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 7, index: 11] sent MsgPreVote request to 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:50.769+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 7, index: 11] sent MsgPreVote request to a at term 7"}
2021/09/03 14:06:50.769691 [info] [raftstore]: shard 2 peer 14 ********become follower now********
2021/09/03 14:06:50.770426 [info] [transport]: connected to store 9
{"level":"info","ts":"2021-09-03T14:06:50.770+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 7, index: 11, vote: 3] ignored MsgPreVote from e [logterm: 7, index: 11] at term 7: lease is not expired (remaining ticks: 8)"}
{"level":"warn","ts":"2021-09-03T14:06:51.416+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"93ccda9956d988f4","rtt":"0s","error":"dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:06:51.416+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"93ccda9956d988f4","rtt":"0s","error":"dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"info","ts":"2021-09-03T14:06:51.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgPreVote request to 7 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgPreVote request to 10 at term 7"}
2021/09/03 14:06:51.519053 [info] [raftstore]: shard 6 peer 12 ********become follower now********
2021/09/03 14:06:51.519737 [info] [transport]: connected to store 13
{"level":"info","ts":"2021-09-03T14:06:51.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [logterm: 0, index: 0, vote: 0] ignored MsgPreVote from c [logterm: 7, index: 11] at term 7: lease is not expired (remaining ticks: 1)"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 7, index: 11] sent MsgPreVote request to 5 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 7, index: 11] sent MsgPreVote request to f at term 7"}
2021/09/03 14:06:51.719468 [info] [raftstore]: shard 4 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 7, index: 11, vote: 0] cast MsgPreVote for b [logterm: 7, index: 11] at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from f at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgVoteResp from b at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 7, index: 11] sent MsgVote request to 5 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 7, index: 11] sent MsgVote request to f at term 8"}
2021/09/03 14:06:51.719744 [info] [raftstore]: shard 4 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [term: 7] received a MsgVote message with higher term from b [term: 8]"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became follower at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 7, index: 11, vote: 0] cast MsgVote for b [logterm: 7, index: 11] at term 8"}
2021/09/03 14:06:51.719886 [info] [raftstore]: shard 4 peer 15 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgVoteResp from f at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:51.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became leader at term 8"}
2021/09/03 14:06:51.720010 [info] [raftstore]: shard 4 peer 11 ********become leader now********
2021/09/03 14:06:51.720094 [info] [raftstore]: shard 4 peer 15 ********become follower now********
2021/09/03 14:06:51.755526 [info] [raftstore]: store 9 begin to stop
2021/09/03 14:06:51.755596 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:46874->127.0.0.1:30001: use of closed network connection
2021/09/03 14:06:51.755608 [error] prophet: client read loop stopped
{"level":"warn","ts":"2021-09-03T14:06:51.755+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:51.756644 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:06:51.756691 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
{"level":"info","ts":"2021-09-03T14:06:51.756+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:51.756704 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:06:51.756719 [info] prophet: coordinator stops running 
2021/09/03 14:06:51.756724 [info] prophet: coordinator is stopping
2021/09/03 14:06:51.756725 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:06:51.756726 [info] prophet: coordinator has been stopped
2021/09/03 14:06:51.756729 [info] prophet: watcher notifer exited
2021/09/03 14:06:51.756710 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:06:51.756735 [info] prophet: metrics are reset
2021/09/03 14:06:51.756739 [info] prophet: background jobs has been stopped
2021/09/03 14:06:51.756768 [info] prophet: watcher notifier stopped
2021/09/03 14:06:51.756778 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:51.756782 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:51.756780 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"f0e1a783f97d1f00","current-leader-member-id":"f0e1a783f97d1f00","transferee-member-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [term 11] starts to transfer leadership to 6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 sends MsgTimeoutNow to 6fd96278109f2aa2 immediately as 6fd96278109f2aa2 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [term 11] received MsgTimeoutNow from f0e1a783f97d1f00 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 received MsgVoteResp from 6fd96278109f2aa2 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [logterm: 11, index: 56] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [logterm: 11, index: 56] sent MsgVote request to f0e1a783f97d1f00 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 lost leader f0e1a783f97d1f00 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [term: 11] received a MsgVote message with higher term from 6fd96278109f2aa2 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"f0e1a783f97d1f00 [logterm: 11, index: 56, vote: 0] cast MsgVote for 6fd96278109f2aa2 [logterm: 11, index: 56] at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.758+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 lost leader f0e1a783f97d1f00 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.759+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 received MsgVoteResp from f0e1a783f97d1f00 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.759+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:51.759+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.759+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 elected leader 6fd96278109f2aa2 at term 12"}
{"level":"info","ts":"2021-09-03T14:06:51.759+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: f0e1a783f97d1f00 elected leader 6fd96278109f2aa2 at term 12"}
{"level":"warn","ts":"2021-09-03T14:06:51.760+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:06:51.760+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:06:51.794331 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 7, index: 11] sent MsgPreVote request to 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 7, index: 11] sent MsgPreVote request to e at term 7"}
2021/09/03 14:06:51.819619 [info] [raftstore]: shard 2 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 7, index: 11, vote: 0] cast MsgPreVote for a [logterm: 7, index: 11] at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from e at term 7"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from a at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 7, index: 11] sent MsgVote request to 3 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 7, index: 11] sent MsgVote request to e at term 8"}
2021/09/03 14:06:51.819928 [info] [raftstore]: shard 2 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [term: 7] received a MsgVote message with higher term from a [term: 8]"}
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became follower at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 7, index: 11, vote: 0] cast MsgVote for a [logterm: 7, index: 11] at term 8"}
2021/09/03 14:06:51.820067 [info] [raftstore]: shard 2 peer 14 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from e at term 8"}
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:51.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became leader at term 8"}
2021/09/03 14:06:51.820171 [info] [raftstore]: shard 2 peer 10 ********become leader now********
2021/09/03 14:06:51.820231 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:51.820268 [info] [raftstore]: shard 2 peer 14 ********become follower now********
2021/09/03 14:06:51.857700 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"f0e1a783f97d1f00","old-leader-member-id":"f0e1a783f97d1f00","new-leader-member-id":"6fd96278109f2aa2","took":"100.7811ms"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:51.858+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"6fd96278109f2aa2","error":"failed to read 6fd96278109f2aa2 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"f0e1a783f97d1f00","remote-peer-id":"6fd96278109f2aa2"}
{"level":"info","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"6fd96278109f2aa2"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"f0e1a783f97d1f00","remote-peer-id-stream-handler":"f0e1a783f97d1f00","remote-peer-id-from":"6fd96278109f2aa2","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"f0e1a783f97d1f00","remote-peer-id-stream-handler":"f0e1a783f97d1f00","remote-peer-id-from":"6fd96278109f2aa2","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:06:51.859+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"f0e1a783f97d1f00","error":"failed to dial f0e1a783f97d1f00 on stream Message (peer f0e1a783f97d1f00 failed to find local node 6fd96278109f2aa2)"}
{"level":"info","ts":"2021-09-03T14:06:51.860+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:06:51.893762 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:51.893782 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:51.893924 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:51.910+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:06:51.994347 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:51.994366 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.094390 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.094408 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.193686 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.193704 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:52.211+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
2021/09/03 14:06:52.293732 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.293750 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.393579 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.393597 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.493806 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.493827 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgPreVote request to 7 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgPreVote request to 10 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [logterm: 0, index: 0, vote: 0] cast MsgPreVote for c [logterm: 7, index: 11] at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.518+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from 10 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgVoteResp from c at term 8"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgVote request to 7 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 7, index: 11] sent MsgVote request to 10 at term 8"}
2021/09/03 14:06:52.519076 [info] [raftstore]: shard 6 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [term: 7] received a MsgVote message with higher term from c [term: 8]"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became follower at term 8"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [logterm: 0, index: 0, vote: 0] cast MsgVote for c [logterm: 7, index: 11] at term 8"}
2021/09/03 14:06:52.519236 [info] [raftstore]: shard 6 peer 16 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgVoteResp from 10 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:06:52.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became leader at term 8"}
2021/09/03 14:06:52.519363 [info] [raftstore]: shard 6 peer 12 ********become leader now********
2021/09/03 14:06:52.519451 [info] [raftstore]: shard 6 peer 16 ********become follower now********
2021/09/03 14:06:52.519451 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.519514 [info] [raftstore]: shard 6 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:52.520095 [info] [raftstore]: shard 6 snapshot created, epoch=<confVer:5 version:1 > term=<7> index=<11> 
2021/09/03 14:06:52.594408 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.594429 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.594435 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.694349 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.694368 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.694373 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:06:52.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"6fd96278109f2aa2 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:52.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:06:52.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6fd96278109f2aa2 lost leader 6fd96278109f2aa2 at term 12"}
2021/09/03 14:06:52.719403 [info] [transport]: shard 6 start send pending snap, epoch=<confVer:5 version:1 > term=<7> index=<11>
2021/09/03 14:06:52.719518 [info] [transport]: connected to store 13
2021/09/03 14:06:52.719549 [info] [raftstore]: shard 6 try to send snap, header=<shard:<id:6 start:"c" end:"d" epoch:<confVer:5 version:1 > peers:<id:7 containerID:1 > peers:<id:12 containerID:9 > peers:<id:16 containerID:13 > > from:<id:12 containerID:9 role:Learner > to:<id:16 containerID:13 role:Learner > term:7 index:11 >,size=<127>
2021/09/03 14:06:52.719582 [info] [raftstore]: shard 6 send snap complete
2021/09/03 14:06:52.719589 [info] [transport]: shard 6 pending snap sent succ, size=<127>, epoch=<confVer:5 version:1 > term=<7> index=<11>
{"level":"info","ts":"2021-09-03T14:06:52.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 11, term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:52.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 switched to configuration voters=(7 12 16)"}
{"level":"info","ts":"2021-09-03T14:06:52.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [commit: 11, lastindex: 11, lastterm: 7] restored snapshot [index: 11, term: 7]"}
{"level":"info","ts":"2021-09-03T14:06:52.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [commit: 11] restored snapshot [index: 11, term: 7]"}
2021/09/03 14:06:52.719676 [info] [raftstore]: shard 6 peer 16 receiving snapshot, skip further handling
2021/09/03 14:06:52.794452 [error] [raftstore]: shard 6 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.794471 [error] [raftstore]: shard 4 heartbeat to prophet failed with client is closed
2021/09/03 14:06:52.794481 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:52.860+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:06:52.860+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:06:52.860797 [info] [raftstore]: store 9 pd stopped
2021/09/03 14:06:52.860821 [info] [transport]: transfer stopped
2021/09/03 14:06:52.860823 [info] [raftstore]: store 9 transport stopped
2021/09/03 14:06:52.860825 [info] [raftstore]: store 9 all shards stopped
2021/09/03 14:06:52.860828 [info] [raftstore]: store 9 all snapshot manager stopped
2021/09/03 14:06:52.860831 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:52.860831 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860835 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860839 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860837 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:52.860842 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860843 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860846 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860848 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860851 [info] [transport]: send raft worker stopped
2021/09/03 14:06:52.860849 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:52.860842 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:52.860842 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:52.860882 [info] [raftstore]: store 9 task runner stopped
2021/09/03 14:06:52.860894 [info] [raftstore]: store 9 rpc stopped
2021/09/03 14:06:52.860905 [info] [raftstore]: store 13 begin to stop
2021/09/03 14:06:52.975180 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:06:52.975214 [error] prophet: container 13 heartbeat failed with client is closed
2021/09/03 14:06:52.975218 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:52.975219 [error] prophet: client read loop stopped
2021/09/03 14:06:52.975443 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:06:53.057669 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/09/03 14:06:53.429605 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:53.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:06:53.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:06:53.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 received MsgVoteResp from 6fd96278109f2aa2 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:53.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [logterm: 12, index: 57] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:06:53.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6fd96278109f2aa2 [logterm: 12, index: 57] sent MsgVote request to f0e1a783f97d1f00 at term 13"}
{"level":"warn","ts":"2021-09-03T14:06:53.861+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:52.861+0800","time spent":"1.0006725s","remote":"127.0.0.1:54012","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:06:53.861+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029df340/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:06:53.861791 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:06:53.861+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:06:53.861+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029df340/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:53.861890 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<4.2092911s> errors context canceled
{"level":"warn","ts":"2021-09-03T14:06:53.861+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029df340/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:06:53.861927 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:06:53.861929 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:06:53.861+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:49.652+0800","time spent":"4.2092174s","remote":"127.0.0.1:54012","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"6fd96278109f2aa2","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"warn","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6fd96278109f2aa2","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.863+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"f0e1a783f97d1f00"}
{"level":"info","ts":"2021-09-03T14:06:53.864+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:54.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"f is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.069+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became pre-candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.069+0800","caller":"etcdserver/zap_raft.go:77","msg":"f received MsgPreVoteResp from f at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.069+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 8, index: 12] sent MsgPreVote request to 5 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.069+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 8, index: 12] sent MsgPreVote request to b at term 8"}
2021/09/03 14:06:54.069034 [info] [raftstore]: shard 4 peer 15 ********become follower now********
2021/09/03 14:06:54.429016 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:06:54.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became pre-candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e received MsgPreVoteResp from e at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 8, index: 12] sent MsgPreVote request to 3 at term 8"}
{"level":"info","ts":"2021-09-03T14:06:54.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 8, index: 12] sent MsgPreVote request to a at term 8"}
2021/09/03 14:06:54.569409 [info] [raftstore]: shard 2 peer 14 ********become follower now********
{"level":"info","ts":"2021-09-03T14:06:54.865+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:06:54.865+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:06:54.865258 [info] [raftstore]: store 13 pd stopped
2021/09/03 14:06:54.865276 [info] [transport]: transfer stopped
2021/09/03 14:06:54.865278 [info] [raftstore]: store 13 transport stopped
2021/09/03 14:06:54.865280 [info] [raftstore]: store 13 all shards stopped
2021/09/03 14:06:54.865284 [info] [raftstore]: store 13 all snapshot manager stopped
2021/09/03 14:06:54.865289 [info] [raftstore]: router event loop task stopped
2021/09/03 14:06:54.865294 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865295 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865296 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865296 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:06:54.865300 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865298 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865305 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865298 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865306 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:06:54.865306 [info] [transport]: send snapshot worker stopped
2021/09/03 14:06:54.865303 [info] [transport]: send raft worker stopped
2021/09/03 14:06:54.865304 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:06:54.865321 [info] [raftstore]: store 13 task runner stopped
2021/09/03 14:06:54.865334 [info] [raftstore]: store 13 rpc stopped
--- PASS: TestIssue133 (20.01s)
=== RUN   TestShardPool
2021/09/03 14:06:54.866100 [info] prophet: prophet logger set
2021/09/03 14:06:54.872347 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:54.872508 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:54.878283 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:54.878407 [info] [raftstore]: start scan gc snap files
2021/09/03 14:06:54.883884 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:06:54.883968 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:54.883979 [info] [raftstore]: begin to start prophet
2021/09/03 14:06:54.884040 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:06:54.884+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:54.884+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:06:54.884+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:54.884+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:54.885+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.363ms"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:06:54.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:06:54.890+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:06:54.891+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:06:54.893+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:06:54.893+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:54.894+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:06:54.894+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:06:54.894+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:54.894+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:06:54.894+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:06:55.288953 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:06:55.288+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:55.289+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:06:55.289+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:06:55.289+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:06:55.290807 [info] prophet: start system time monitor 
2021/09/03 14:06:55.291271 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:06:55.291452 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:06:55.291467 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:06:55.291708 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:06:55.292215 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:06:55.292235 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:06:55.292683 [info] prophet: load 0 containers, cost 399.3µs
2021/09/03 14:06:55.292862 [info] prophet: load 0 resources, cost 165.3µs
2021/09/03 14:06:55.293453 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:55.293470 [info] prophet: client read loop started 
2021/09/03 14:06:55.293521 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:55.293535 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:06:55.293454 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:06:55.293541 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:06:55.293542 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:06:55.293458 [info] prophet: client started
2021/09/03 14:06:55.293562 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:06:55.293572 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:06:55.293590 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649215 deployPath:"not set" 
2021/09/03 14:06:55.293592 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:06:55.294088 [info] prophet: load 0 jobs
2021/09/03 14:06:55.294324 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:06:55.294353 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:06:55.294935 [info] [raftstore]: create local store with id 1
2021/09/03 14:06:55.295415 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:06:55.295424 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:06:55.295659 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:06:55.296871 [info] prophet: container 1 limit added
2021/09/03 14:06:55.296908 [info] [raftstore]: prophet started
2021/09/03 14:06:55.296945 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:06:55.296954 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:06:55.296956 [info] [raftstore]: raft shards workers started
2021/09/03 14:06:55.296968 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:06:55.297008 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:06:55.297013 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:06:55.297014 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
2021/09/03 14:06:55.297016 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:06:55.297067 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:06:55.297072 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:06:55.297074 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:55.297+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:06:55.297109 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:06:55.297119 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:06:55.297120 [info] [raftstore]: shards started
2021/09/03 14:06:55.297122 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:06:55.297128 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:06:55.297138 [info] [raftstore]: router started
2021/09/03 14:06:55.297144 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:06:55.297154 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:06:55.297165 [info] [raftstore]: router event loop task started
2021/09/03 14:06:55.297229 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:06:55.297242 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:06:55.297302 [info] prophet: new watcher 127.0.0.1:43200 added
2021/09/03 14:06:55.297374 [info] [raftstore]: start init event
2021/09/03 14:06:55.298964 [info] [raftstore]: begin start raftstore
2021/09/03 14:06:55.298977 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"b47fe891348258ab","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:06:55.299+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
2021/09/03 14:06:55.300063 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:13006369959218141355 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:13006369959218141355 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:06:55.300+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:06:55.300+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:06:55.300+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:06:55.300+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:06:55.301+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.3002ms"}
{"level":"warn","ts":"2021-09-03T14:06:55.802+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:56.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:06:56.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:06:56.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:06:56.297576 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:06:56.297593 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:06:56.297609 [info] prophet: metrics are reset
2021/09/03 14:06:56.297612 [info] prophet: background jobs has been stopped
2021/09/03 14:06:56.297615 [info] prophet: watcher notifer exited
2021/09/03 14:06:56.297618 [info] prophet: drive push operator has been stopped 
2021/09/03 14:06:56.297621 [info] prophet: patrol resources has been stopped 
2021/09/03 14:06:56.297623 [info] prophet: coordinator is stopping
2021/09/03 14:06:56.297624 [info] prophet: coordinator has been stopped
2021/09/03 14:06:56.297680 [info] prophet: watcher notifier stopped
2021/09/03 14:06:56.297695 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:06:56.297699 [error] prophet: watcher read events failed with EOF
2021/09/03 14:06:56.297703 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:06:56.297720 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:06:56.297725 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:06:56.297730 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"warn","ts":"2021-09-03T14:06:56.303+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:56.303+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:06:56.803+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:56.803+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
2021/09/03 14:06:56.862555 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-09-03T14:06:56.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:06:56.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:06:56.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:06:56.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 3"}
{"level":"warn","ts":"2021-09-03T14:06:57.304+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:57.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:06:57.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:06:57.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:06:57.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 4"}
{"level":"warn","ts":"2021-09-03T14:06:57.804+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:58.305+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:58.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:06:58.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:06:58.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:06:58.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 5"}
{"level":"warn","ts":"2021-09-03T14:06:58.805+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:59.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:06:59.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:06:59.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:06:59.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 6"}
{"level":"warn","ts":"2021-09-03T14:06:59.306+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:06:59.806+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:06:59.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:06:59.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:06:59.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:06:59.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 7"}
{"level":"warn","ts":"2021-09-03T14:07:00.300+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"b47fe891348258ab","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:00.300+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"b47fe891348258ab","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:00.307+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:00.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:07:00.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:07:00.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:07:00.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 8"}
{"level":"warn","ts":"2021-09-03T14:07:00.808+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900061,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:01.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:07:01.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:07:01.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:07:01.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 9"}
{"level":"warn","ts":"2021-09-03T14:07:01.303+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:07:01.303+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:07:01.303+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:07:01.306+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"b47fe891348258ab","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:01.306+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:01.306+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:01.306+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b47fe891348258ab [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:01.308+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:01.309+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"b47fe891348258ab","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"b47fe891348258ab","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:01.312+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"b47fe891348258ab","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"b47fe891348258ab","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"b47fe891348258ab","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"b47fe891348258ab","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.313+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:01.314+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from b47fe891348258ab [term: 2]"}
{"level":"warn","ts":"2021-09-03T14:07:01.804+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654697900063,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to b47fe891348258ab at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.089+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab lost leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from b47fe891348258ab at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 10"}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:07:02.090+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.6923882s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","caller":"traceutil/trace.go:171","msg":"trace[1252651794] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.6924504s","start":"2021-09-03T14:06:56.398+0800","end":"2021-09-03T14:07:02.090+0800","steps":["trace[1252651794] 'agreement among raft nodes before linearized reading'  (duration: 5.6923874s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:02.090+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:06:56.398+0800","time spent":"5.6924854s","remote":"127.0.0.1:43626","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:07:02.090+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:07:02.090+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000545c00/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:02.091+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:02.091+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"b47fe891348258ab","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:02.091+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"b47fe891348258ab","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:02.091+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab switched to configuration voters=(10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:07:02.091+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"b47fe891348258ab","added-peer-id":"b47fe891348258ab","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:02.093+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"b47fe891348258ab","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/b47fe891348258ab/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:07:02.093+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:07:02.093060 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:07:02.093+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:07:02.094608 [info] prophet: start system time monitor 
2021/09/03 14:07:02.094946 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:02.094958 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:02.094961 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:02.094981 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:02.095009 [info] prophet: client started
2021/09/03 14:07:02.095019 [info] prophet: client read loop started 
2021/09/03 14:07:02.095027 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:02.095030 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:02.095038 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:02.095042 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:02.095049 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649222 deployPath:"not set" 
2021/09/03 14:07:02.095061 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:02.095188 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:02.095238 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:02.095251 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:02.118819 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.7206626s
2021/09/03 14:07:02.118832 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:02.118833 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:07:02.120138 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:02.120148 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:02.120976 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:02.122077 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:02.122089 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:02.123034 [info] prophet: load 1 containers, cost 843.4µs
2021/09/03 14:07:02.123292 [info] prophet: load 1 resources, cost 245.2µs
2021/09/03 14:07:02.123902 [info] prophet: watcher notifier stopped
2021/09/03 14:07:02.123913 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:02.123914 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:02.124150 [info] prophet: load 0 jobs
2021/09/03 14:07:02.196227 [info] [raftstore]: create local store with id 5
2021/09/03 14:07:02.196840 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:02.199257 [info] prophet: container 5 limit added
2021/09/03 14:07:02.199305 [info] [raftstore]: prophet started
2021/09/03 14:07:02.199323 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:07:02.199387 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:07:02.199414 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:02.199417 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:02.199422 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:02.199423 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:02.199424 [info] [raftstore]: shards started
2021/09/03 14:07:02.199426 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:02.199433 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:07:02.199447 [info] [raftstore]: router started
2021/09/03 14:07:02.199493 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:02.199560 [info] [raftstore]: router event loop task started
2021/09/03 14:07:02.199576 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:02.199578 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:02.199635 [info] prophet: new watcher 127.0.0.1:43252 added
2021/09/03 14:07:02.199723 [info] [raftstore]: start init event
2021/09/03 14:07:02.200686 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:02.200698 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:07:02.201+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:8fd326f058596a85 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:02.201+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:02.201537 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:02.212917 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:02.212931 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:07:02.212953 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:02.212957 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:02.212960 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:02.213490 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:02.213502 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:07:02.214967 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:07:02.217042 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:07:02.217056 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:07:02.309244 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:02.309358 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:02.309371 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:02.309444 [info] prophet: new watcher 127.0.0.1:43256 added
2021/09/03 14:07:02.309575 [info] [raftstore]: start init event
2021/09/03 14:07:02.311683 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:02.311761 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:02.311775 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:02.313007 [info] prophet: container 1 heartbeat stream binded
{"level":"warn","ts":"2021-09-03T14:07:02.702+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:8fd326f058596a85 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:02.702+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:02.702752 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:03.203+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:6d4a2ae13a2a4ab6 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:03.203+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:03.203915 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:03.704+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:6d4a2ae13a2a4ab6 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:03.705+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:03.705071 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:04.205+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:1ac6e17b6c6ce533 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:04.205+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:04.205653 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:04.706+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:1ac6e17b6c6ce533 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:04.707+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:04.707050 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:05.124851 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:05.124866 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:05.126436 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:05.126468 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:07:05.207+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:30eba4d85b640815 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:05.207+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:05.207995 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:05.218585 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:05.218600 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:05.218603 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:05.218615 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:05.227302 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:05.2272821 +0800 CST m=+68.466220301, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:07:05.227322 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:07:05.227418 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.227478 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.227565 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.227586 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:05.227+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:07:05.227666 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 44 12 108 192 198 108 71 174 132 188 111 32 146 163 8 199 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.227684 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.227854 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:07:05.228164 [info] [transport]: connected to store 5
2021/09/03 14:07:05.228295 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:07:05.228319 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:07:05.228365 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.228384 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:05.228385 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:07:05.228+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:05.228+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:05.228+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:07:05.228435 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:07:05.228439 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:05.228+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:05.228+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:07:05.228496 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:07:05.228752 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:05.229734 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:07:05.229797 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.229845 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.229909 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.229926 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:05.229+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:07:05.229969 [info] [transport]: connected to store 1
2021/09/03 14:07:05.229971 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 204 223 124 169 201 160 76 26 165 1 146 152 112 115 192 11 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.230038 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:05.230142 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:07:05.230204 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:05.230448 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:07:05.231417 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:05.2272821 +0800 CST m=+68.466220301, startAt:2021-09-03 14:07:05.2273165 +0800 CST m=+68.466254801, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 4.0856ms, 
2021/09/03 14:07:05.369043 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:05.369271 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:07:05.369+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:05.369+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:07:05.369+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:05.369+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:07:05.369424 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:07:05.369460 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/09/03 14:07:05.369462 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:07:05.369502 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:05.569120 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:07:05.569138 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:07:05.569145 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:07:05.569153 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:05.569163 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:07:05.569298 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:05.569324 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:05.569364 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:07:05.569410 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"warn","ts":"2021-09-03T14:07:05.708+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:30eba4d85b640815 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:05.709+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:05.709139 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:06.209+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:896d907d0af21082 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:06.209+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0003f96c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:06.209668 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(9902730022386536578 10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab switched to configuration voters=(9902730022386536578 10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"b47fe891348258ab","added-peer-id":"896d907d0af21082","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"896d907d0af21082","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.715+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.716+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
2021/09/03 14:07:06.717110 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:10  Member:ID:9902730022386536578 peerURLs:"http://127.0.0.1:50002"  Members:[ID:9902730022386536578 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:13006369959218141355 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:06.717+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:06.719+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.5651ms"}
{"level":"info","ts":"2021-09-03T14:07:06.722+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"896d907d0af21082","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:06.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:06.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:06.722+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 896d907d0af21082 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:06.724+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:06.725+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.728+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"896d907d0af21082","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"896d907d0af21082","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.729+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"896d907d0af21082","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"b47fe891348258ab","to":"896d907d0af21082","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.730+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"896d907d0af21082","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 elected leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:06.731+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.732+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"896d907d0af21082","to":"b47fe891348258ab","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:06.732+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.732+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"b47fe891348258ab","to":"896d907d0af21082","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:06.732+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.734+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:06.734+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"896d907d0af21082","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:06.734+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"896d907d0af21082","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:06.734+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 switched to configuration voters=(10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:07:06.734+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"896d907d0af21082","added-peer-id":"b47fe891348258ab","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:06.735+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 switched to configuration voters=(9902730022386536578 10650127570946328820 13006369959218141355)"}
{"level":"info","ts":"2021-09-03T14:07:06.735+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"896d907d0af21082","added-peer-id":"896d907d0af21082","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:06.736+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"896d907d0af21082","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/896d907d0af21082/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:07:06.736+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:07:06.736511 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:07:06.736+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:07:06.738308 [info] prophet: start system time monitor 
2021/09/03 14:07:06.738909 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:06.738919 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:06.738922 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:07:06.738948 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:06.738970 [info] prophet: client read loop started 
2021/09/03 14:07:06.738980 [info] prophet: client started
2021/09/03 14:07:06.738990 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:06.738993 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:06.739010 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:06.739024 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:06.739014 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649226 deployPath:"not set" 
2021/09/03 14:07:06.739032 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:06.739148 [info] [raftstore]: create local store with id 7
2021/09/03 14:07:06.739626 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:06.742065 [info] prophet: container 7 limit added
2021/09/03 14:07:06.742115 [info] [raftstore]: prophet started
2021/09/03 14:07:06.742136 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:07:06.742178 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:07:06.742201 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:06.742203 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:06.742207 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:06.742209 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:06.742209 [info] [raftstore]: shards started
2021/09/03 14:07:06.742211 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:06.742216 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:07:06.742224 [info] [raftstore]: router started
2021/09/03 14:07:06.742258 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:06.742322 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:06.742334 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:06.742354 [info] [raftstore]: router event loop task started
2021/09/03 14:07:06.742384 [info] prophet: new watcher 127.0.0.1:43318 added
2021/09/03 14:07:06.742466 [info] [raftstore]: start init event
2021/09/03 14:07:06.744856 [info] [raftstore]: dynamic shards pool job started
2021/09/03 14:07:06.747584 [info] prophet: resource 8 created with peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.747614 [info] prophet: resource 9 created with peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.749045 [info] [raftstore]: shard 8 peer 12 begin to create at store 5, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749069 [info] [raftstore]: shard 8 peer 11 begin to create at store 7, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749093 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:1 > peers:<id:11 containerID:7 > peers:<id:12 containerID:5 > unique:"1-0-1" 
2021/09/03 14:07:06.749101 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:1 > peers:<id:11 containerID:7 > peers:<id:12 containerID:5 > unique:"1-0-1" 
2021/09/03 14:07:06.749120 [info] [raftstore]: shard 8 peer 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.749052 [info] [raftstore]: shard 8 peer 10 begin to create at store 1, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749160 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:1 > peers:<id:11 containerID:7 > peers:<id:12 containerID:5 > unique:"1-0-1" 
2021/09/03 14:07:06.749199 [info] [raftstore]: shard 8 peer 10 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.749203 [info] [raftstore]: shard 8 peer 10 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749204 [info] [raftstore]: shard 8 peer 10 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 5"}
2021/09/03 14:07:06.749120 [info] [raftstore]: shard 8 peer 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.749265 [info] [raftstore]: shard 8 peer 10 delegate register completed
2021/09/03 14:07:06.749269 [info] [raftstore]: shard 8 peer 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749272 [info] [raftstore]: shard 8 peer 11 init last term, last term=<5>
2021/09/03 14:07:06.749274 [info] [raftstore]: shard 8 peer 10 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749275 [info] [raftstore]: shard 8 peer 10 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to b at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to c at term 5"}
2021/09/03 14:07:06.749133 [info] [raftstore]: shard 8 peer 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749337 [info] [raftstore]: shard 8 peer 12 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft c [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.749324 [info] [raftstore]: shard 9 peer 15 begin to create at store 1, peers: [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749444 [info] [raftstore]: create init shard id:9 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/09/03 14:07:06.749468 [info] [raftstore]: shard 9 peer 15 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.749472 [info] [raftstore]: shard 9 peer 15 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749473 [info] [raftstore]: shard 9 peer 15 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"f switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft f [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.749331 [info] [raftstore]: shard 8 peer 10 ********become follower now********
2021/09/03 14:07:06.749409 [info] [raftstore]: shard 8 peer 11 delegate register completed
2021/09/03 14:07:06.749552 [info] [raftstore]: shard 8 peer 11 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749569 [info] [raftstore]: shard 9 peer 13 begin to create at store 7, peers: [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749424 [info] [raftstore]: shard 8 peer 12 delegate register completed
2021/09/03 14:07:06.749614 [info] [raftstore]: shard 8 peer 12 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749629 [info] [raftstore]: shard 9 peer 14 begin to create at store 5, peers: [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.749517 [info] [raftstore]: shard 9 peer 15 delegate register completed
2021/09/03 14:07:06.749654 [info] [raftstore]: create init shard id:9 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/09/03 14:07:06.749667 [info] [raftstore]: shard 9 peer 14 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.749684 [info] [raftstore]: shard 9 peer 14 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749685 [info] [raftstore]: shard 9 peer 14 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"e switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft e [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.749669 [info] [raftstore]: shard 9 peer 15 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749588 [info] [raftstore]: create init shard id:9 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:13 containerID:7 > peers:<id:14 containerID:5 > peers:<id:15 containerID:1 > unique:"1-0-2" 
2021/09/03 14:07:06.749750 [info] [raftstore]: shard 9 peer 13 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.749753 [info] [raftstore]: shard 9 peer 13 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.749754 [info] [raftstore]: shard 9 peer 13 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d switched to configuration voters=(13 14 15)"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft d [peers: [d,e,f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.749723 [info] [raftstore]: shard 9 peer 14 delegate register completed
2021/09/03 14:07:06.749793 [info] [raftstore]: shard 9 peer 14 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749787 [info] [raftstore]: shard 9 peer 13 delegate register completed
2021/09/03 14:07:06.749815 [info] [raftstore]: shard 9 peer 13 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:13 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:14 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:15 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.749817 [info] [raftstore]: shard 9 peer 13 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d received MsgPreVoteResp from d at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d [logterm: 5, index: 5] sent MsgPreVote request to e at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.749+0800","caller":"etcdserver/zap_raft.go:77","msg":"d [logterm: 5, index: 5] sent MsgPreVote request to f at term 5"}
2021/09/03 14:07:06.749855 [info] [raftstore]: shard 9 peer 13 ********become follower now********
2021/09/03 14:07:06.750422 [info] [transport]: connected to store 7
2021/09/03 14:07:06.750475 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgPreVote for a [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgPreVote for a [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 5, index: 5, vote: 0] cast MsgPreVote for d [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from c at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from a at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to c at term 6"}
2021/09/03 14:07:06.750623 [info] [raftstore]: shard 8 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
2021/09/03 14:07:06.750939 [info] [transport]: connected to store 1
2021/09/03 14:07:06.750991 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:07:06.750+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became leader at term 6"}
2021/09/03 14:07:06.751023 [info] [raftstore]: shard 8 peer 10 ********become leader now********
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 5, index: 5, vote: 0] cast MsgPreVote for d [logterm: 5, index: 5] at term 5"}
2021/09/03 14:07:06.751060 [info] [raftstore]: shard 8 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d received MsgPreVoteResp from e at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d has received 2 MsgPreVoteResp votes and 0 vote rejections"}
2021/09/03 14:07:06.751135 [info] [raftstore]: shard 8 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d received MsgVoteResp from d at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d [logterm: 5, index: 5] sent MsgVote request to e at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d [logterm: 5, index: 5] sent MsgVote request to f at term 6"}
2021/09/03 14:07:06.751174 [info] [raftstore]: shard 9 peer 13 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [term: 5] received a MsgVote message with higher term from d [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"f became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"f [logterm: 5, index: 5, vote: 0] cast MsgVote for d [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [term: 5] received a MsgVote message with higher term from d [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"e became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"e [logterm: 5, index: 5, vote: 0] cast MsgVote for d [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d received MsgVoteResp from f at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.751+0800","caller":"etcdserver/zap_raft.go:77","msg":"d became leader at term 6"}
2021/09/03 14:07:06.751353 [info] [raftstore]: shard 9 peer 13 ********become leader now********
2021/09/03 14:07:06.751421 [info] [raftstore]: shard 9 peer 14 ********become follower now********
2021/09/03 14:07:06.751467 [info] [raftstore]: shard 9 peer 15 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.781+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"896d907d0af21082","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"896d907d0af21082","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"896d907d0af21082","to":"b47fe891348258ab","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"896d907d0af21082","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:06.817+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:06.826452 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:06.835783 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:07:06.8357629 +0800 CST m=+70.074701101, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 16 on container 7, promote learner peer 16 on container 7 to voter]), 
2021/09/03 14:07:06.835802 [info] prophet: resource 2 send schedule command, step add learner peer 16 on container 7, source create
2021/09/03 14:07:06.835896 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.835958 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836295 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836319 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(16)"}
2021/09/03 14:07:06.836400 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:16}] Context:[10 32 10 16 137 177 71 131 91 1 75 149 166 5 105 149 174 24 108 210 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 16 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.836424 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836442 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:16 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836457 [info] [raftstore]: shard-2 add learner peer {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836486 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(16)"}
2021/09/03 14:07:06.836523 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.836524 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:07:06.836526 [info] [raftstore]: shard 2 peer 16 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:07:06.836697 [info] [raftstore]: shard 2 peer 16 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.836712 [info] [raftstore]: shard 2 peer 16 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.836714 [info] [raftstore]: shard 2 peer 16 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 10 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:07:06.836763 [info] [raftstore]: shard 2 peer 16 delegate register completed
2021/09/03 14:07:06.836767 [info] [raftstore]: shard 2 peer 16 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.836+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became follower at term 6"}
2021/09/03 14:07:06.836805 [info] [raftstore]: shard 2 peer 16 ********become follower now********
2021/09/03 14:07:06.836897 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.837363 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<9> 
2021/09/03 14:07:06.837950 [info] prophet: resource 2 send schedule command, step promote learner peer 16 on container 7 to voter, source heartbeat
2021/09/03 14:07:06.838015 [info] [raftstore]: shard-2 AddNode peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.838067 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.838155 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:4 version:1 > term=<6> index=<9>
2021/09/03 14:07:06.838277 [info] [transport]: connected to store 7
2021/09/03 14:07:06.838280 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 9, term: 6]"}
2021/09/03 14:07:06.838335 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 switched to configuration voters=(3 6 16)"}
2021/09/03 14:07:06.838403 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.838421 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [commit: 9, lastindex: 9, lastterm: 6] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [commit: 9] restored snapshot [index: 9, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6 16)"}
2021/09/03 14:07:06.838460 [info] [raftstore]: shard 2 peer 16 receiving snapshot, skip further handling
{"level":"info","ts":"2021-09-03T14:07:06.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6 16)"}
2021/09/03 14:07:06.838468 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.838486 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:16}] Context:[10 32 10 16 53 127 241 244 79 23 72 72 190 151 161 243 115 183 114 239 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 16 16 7]} with changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.838508 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.838574 [info] [raftstore]: shard 2 peer 16 receiving snapshot, skip further handling
2021/09/03 14:07:06.838584 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:07:06.838765 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:16 containerID:7 role:Learner > > from:<id:3 containerID:1 > to:<id:16 containerID:7 role:Learner > term:6 index:9 >,size=<126>
2021/09/03 14:07:06.838793 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:07:06.838799 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:4 version:1 > term=<6> index=<9>
2021/09/03 14:07:06.839854 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:07:06.8357629 +0800 CST m=+70.074701101, startAt:2021-09-03 14:07:06.8357965 +0800 CST m=+70.074734701, currentStep:2, steps:[add learner peer 16 on container 7, promote learner peer 16 on container 7 to voter]) finished) finish, takes 4.0478ms, 
2021/09/03 14:07:06.849910 [info] prophet: resource 17 created with peers [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.851090 [info] [raftstore]: shard 17 peer 19 begin to create at store 5, peers: [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.851102 [info] [raftstore]: shard 17 peer 20 begin to create at store 1, peers: [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.851106 [info] [raftstore]: shard 17 peer 18 begin to create at store 7, peers: [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.851127 [info] [raftstore]: create init shard id:17 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:18 containerID:7 > peers:<id:19 containerID:5 > peers:<id:20 containerID:1 > unique:"1-0-3" 
2021/09/03 14:07:06.851127 [info] [raftstore]: create init shard id:17 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:18 containerID:7 > peers:<id:19 containerID:5 > peers:<id:20 containerID:1 > unique:"1-0-3" 
2021/09/03 14:07:06.851137 [info] [raftstore]: create init shard id:17 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:18 containerID:7 > peers:<id:19 containerID:5 > peers:<id:20 containerID:1 > unique:"1-0-3" 
2021/09/03 14:07:06.851142 [info] [raftstore]: shard 17 peer 20 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.851143 [info] [raftstore]: shard 17 peer 19 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.851147 [info] [raftstore]: shard 17 peer 19 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.851147 [info] [raftstore]: shard 17 peer 20 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.851148 [info] [raftstore]: shard 17 peer 19 init last term, last term=<5>
2021/09/03 14:07:06.851149 [info] [raftstore]: shard 17 peer 20 init last term, last term=<5>
2021/09/03 14:07:06.851152 [info] [raftstore]: shard 17 peer 18 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.851156 [info] [raftstore]: shard 17 peer 18 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.851157 [info] [raftstore]: shard 17 peer 18 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 switched to configuration voters=(18 19 20)"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 switched to configuration voters=(18 19 20)"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 switched to configuration voters=(18 19 20)"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 13 [peers: [12,13,14], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 12 [peers: [12,13,14], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.851212 [info] [raftstore]: shard 17 peer 19 delegate register completed
2021/09/03 14:07:06.851216 [info] [raftstore]: shard 17 peer 18 delegate register completed
2021/09/03 14:07:06.851218 [info] [raftstore]: shard 17 peer 19 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.851222 [info] [raftstore]: shard 17 peer 18 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.851223 [info] [raftstore]: shard 17 peer 18 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 14 [peers: [12,13,14], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became pre-candidate at term 5"}
2021/09/03 14:07:06.851232 [info] [raftstore]: shard 17 peer 20 delegate register completed
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgPreVoteResp from 12 at term 5"}
2021/09/03 14:07:06.851243 [info] [raftstore]: shard 17 peer 20 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:18 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:19 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 [logterm: 5, index: 5] sent MsgPreVote request to 13 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 [logterm: 5, index: 5] sent MsgPreVote request to 14 at term 5"}
2021/09/03 14:07:06.851261 [info] [raftstore]: shard 17 peer 18 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 [logterm: 5, index: 5, vote: 0] cast MsgPreVote for 12 [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 [logterm: 5, index: 5, vote: 0] cast MsgPreVote for 12 [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgPreVoteResp from 14 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgVoteResp from 12 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 [logterm: 5, index: 5] sent MsgVote request to 13 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 [logterm: 5, index: 5] sent MsgVote request to 14 at term 6"}
2021/09/03 14:07:06.851402 [info] [raftstore]: shard 17 peer 18 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 [term: 5] received a MsgVote message with higher term from 12 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 [logterm: 5, index: 5, vote: 0] cast MsgVote for 12 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 [term: 5] received a MsgVote message with higher term from 12 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgVoteResp from 13 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 [logterm: 5, index: 5, vote: 0] cast MsgVote for 12 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.851+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became leader at term 6"}
2021/09/03 14:07:06.851625 [info] [raftstore]: shard 17 peer 18 ********become leader now********
2021/09/03 14:07:06.851663 [info] [raftstore]: shard 17 peer 19 ********become follower now********
2021/09/03 14:07:06.851671 [info] [raftstore]: shard 17 peer 20 ********become follower now********
2021/09/03 14:07:06.854771 [info] prophet: resource 21 created with peers [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:06.855765 [info] [raftstore]: shard 21 peer 23 begin to create at store 5, peers: [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.855786 [info] [raftstore]: shard 21 peer 22 begin to create at store 7, peers: [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.855791 [info] [raftstore]: shard 21 peer 24 begin to create at store 1, peers: [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:06.855794 [info] [raftstore]: create init shard id:21 start:"b\000\000\000\000\000\000\000\004" end:"b\000\000\000\000\000\000\000\005" epoch:<confVer:3 > state:WaittingCreate peers:<id:22 containerID:7 > peers:<id:23 containerID:5 > peers:<id:24 containerID:1 > unique:"1-0-4" 
2021/09/03 14:07:06.855810 [info] [raftstore]: shard 21 peer 23 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.855813 [info] [raftstore]: shard 21 peer 23 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.855814 [info] [raftstore]: shard 21 peer 23 init last term, last term=<5>
2021/09/03 14:07:06.855817 [info] [raftstore]: create init shard id:21 start:"b\000\000\000\000\000\000\000\004" end:"b\000\000\000\000\000\000\000\005" epoch:<confVer:3 > state:WaittingCreate peers:<id:22 containerID:7 > peers:<id:23 containerID:5 > peers:<id:24 containerID:1 > unique:"1-0-4" 
2021/09/03 14:07:06.855818 [info] [raftstore]: create init shard id:21 start:"b\000\000\000\000\000\000\000\004" end:"b\000\000\000\000\000\000\000\005" epoch:<confVer:3 > state:WaittingCreate peers:<id:22 containerID:7 > peers:<id:23 containerID:5 > peers:<id:24 containerID:1 > unique:"1-0-4" 
2021/09/03 14:07:06.855833 [info] [raftstore]: shard 21 peer 24 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 switched to configuration voters=(22 23 24)"}
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 became follower at term 5"}
2021/09/03 14:07:06.855849 [info] [raftstore]: shard 21 peer 24 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 17 [peers: [16,17,18], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.855897 [info] [raftstore]: shard 21 peer 23 delegate register completed
2021/09/03 14:07:06.855900 [info] [raftstore]: shard 21 peer 24 init last term, last term=<5>
2021/09/03 14:07:06.855905 [info] [raftstore]: shard 21 peer 23 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 switched to configuration voters=(22 23 24)"}
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.855+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 18 [peers: [16,17,18], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.855968 [info] [raftstore]: shard 21 peer 24 delegate register completed
2021/09/03 14:07:06.855981 [info] [raftstore]: shard 21 peer 24 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.855839 [info] [raftstore]: shard 21 peer 22 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.856011 [info] [raftstore]: shard 21 peer 22 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.856014 [info] [raftstore]: shard 21 peer 22 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 switched to configuration voters=(22 23 24)"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 16 [peers: [16,17,18], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:06.856074 [info] [raftstore]: shard 21 peer 22 delegate register completed
2021/09/03 14:07:06.856084 [info] [raftstore]: shard 21 peer 22 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:22 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:23 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:24 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:06.856096 [info] [raftstore]: shard 21 peer 22 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 received MsgPreVoteResp from 16 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 [logterm: 5, index: 5] sent MsgPreVote request to 17 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 [logterm: 5, index: 5] sent MsgPreVote request to 18 at term 5"}
2021/09/03 14:07:06.856156 [info] [raftstore]: shard 21 peer 22 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 [logterm: 5, index: 5, vote: 0] cast MsgPreVote for 16 [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 [logterm: 5, index: 5, vote: 0] cast MsgPreVote for 16 [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 received MsgPreVoteResp from 17 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 received MsgVoteResp from 16 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 [logterm: 5, index: 5] sent MsgVote request to 17 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 [logterm: 5, index: 5] sent MsgVote request to 18 at term 6"}
2021/09/03 14:07:06.856385 [info] [raftstore]: shard 21 peer 22 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 [term: 5] received a MsgVote message with higher term from 16 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 [term: 5] received a MsgVote message with higher term from 16 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"17 [logterm: 5, index: 5, vote: 0] cast MsgVote for 16 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"18 [logterm: 5, index: 5, vote: 0] cast MsgVote for 16 [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 received MsgVoteResp from 17 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.856+0800","caller":"etcdserver/zap_raft.go:77","msg":"16 became leader at term 6"}
2021/09/03 14:07:06.856564 [info] [raftstore]: shard 21 peer 22 ********become leader now********
2021/09/03 14:07:06.856610 [info] [raftstore]: shard 21 peer 23 ********become follower now********
2021/09/03 14:07:06.856683 [info] [raftstore]: shard 21 peer 24 ********become follower now********
2021/09/03 14:07:06.958348 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:07:06.958411 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:43258->127.0.0.1:30000: use of closed network connection
2021/09/03 14:07:06.958416 [error] prophet: client read loop stopped
2021/09/03 14:07:06.959279 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:07:06.959335 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:06.959349 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:06.959352 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:06.959374 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:07:06.959383 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:07:06.959420 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:06.959430 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:07:06.959436 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:06.959440 [info] prophet: watcher notifer exited
2021/09/03 14:07:06.959441 [info] prophet: ********node-2 become to follower now********
{"level":"info","ts":"2021-09-03T14:07:06.959+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:06.959448 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:06.959483 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:06.959451 [info] prophet: metrics are reset
2021/09/03 14:07:06.959536 [info] prophet: background jobs has been stopped
2021/09/03 14:07:06.959457 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:06.959459 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:06.959460 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:06.959461 [info] prophet: coordinator is stopping
2021/09/03 14:07:06.959554 [info] prophet: coordinator has been stopped
2021/09/03 14:07:06.959582 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:06.959595 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:06.959608 [info] prophet: watcher notifier stopped
2021/09/03 14:07:06.959611 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:06.959613 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:06.959615 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:06.959616 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:06.959619 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:06.959620 [info] [raftstore]: dynamic shards pool job stopped
2021/09/03 14:07:06.959713 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:06.959728 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:07:06.959868 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:07:06.959882 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 10] starts to transfer leadership to b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sends MsgTimeoutNow to b47fe891348258ab immediately as b47fe891348258ab already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [term 10] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab received MsgVoteResp from b47fe891348258ab at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 10, index: 56] sent MsgVote request to 896d907d0af21082 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 10, index: 56] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.960+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab lost leader 93ccda9956d988f4 at term 11"}
2021/09/03 14:07:06.960923 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [term: 10] received a MsgVote message with higher term from b47fe891348258ab [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [logterm: 10, index: 56, vote: 0] cast MsgVote for b47fe891348258ab [logterm: 10, index: 56] at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 10] received a MsgVote message with higher term from b47fe891348258ab [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 10, index: 56, vote: 0] cast MsgVote for b47fe891348258ab [logterm: 10, index: 56] at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.961+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab received MsgVoteResp from 896d907d0af21082 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab elected leader b47fe891348258ab at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 elected leader b47fe891348258ab at term 11"}
{"level":"info","ts":"2021-09-03T14:07:06.962+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader b47fe891348258ab at term 11"}
2021/09/03 14:07:06.963751 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:07:06.963769 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:07:06.965568 [info] prophet: load 3 containers, cost 1.698ms
2021/09/03 14:07:06.965878 [info] prophet: load 5 resources, cost 297µs
2021/09/03 14:07:06.966485 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:06.966496 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:06.966843 [info] prophet: load 1 jobs
2021/09/03 14:07:06.967105 [info] [raftstore]: dynamic shards pool job started
2021/09/03 14:07:06.968661 [info] [raftstore]: shard 2 peer 16 received a snapshot at 9
2021/09/03 14:07:06.968678 [info] [raftstore]: shard 2 peer 16 begin to apply snapshot
2021/09/03 14:07:06.968688 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:07:06.968701 [info] [raftstore]: shard 2 peer 16 apply snapshot state completed, apply state {AppliedIndex:9 TruncatedState:{Index:9 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:06.968729 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:07:06.968884 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.968908 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:06.969135 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_9.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:16 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:9 
2021/09/03 14:07:06.969172 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:9}
2021/09/03 14:07:06.997551 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:06.997575 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.019645 [info] [raftstore]: shard 2 do apply change peer peer:<id:16 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:07.019671 [info] [raftstore]: shard-2 add peer {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:07.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 switched to configuration voters=(3 6 16)"}
2021/09/03 14:07:07.019793 [info] [raftstore]: shard 2 peer 16 applied changes [{ChangeType:AddNode Peer:{ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:16 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:07.059631 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:07.061+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"b47fe891348258ab","took":"101.0028ms"}
{"level":"info","ts":"2021-09-03T14:07:07.061+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:07.061+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"896d907d0af21082","error":"failed to read 896d907d0af21082 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"b47fe891348258ab","error":"failed to read b47fe891348258ab on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:07.062+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"896d907d0af21082","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"896d907d0af21082","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"b47fe891348258ab","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"b47fe891348258ab","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 896d907d0af21082)"}
{"level":"warn","ts":"2021-09-03T14:07:07.063+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node b47fe891348258ab)"}
{"level":"info","ts":"2021-09-03T14:07:07.064+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:07:07.098074 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.098096 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.198045 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.198066 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.200613 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:07.200682 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:07.200693 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:07.200740 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:07:07.298115 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.298159 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.298314 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:07.397589 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.397610 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:07.407+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:07.497263 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.497284 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.598182 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.598202 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.698109 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.698129 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.797520 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.797541 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.897718 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.897737 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.959902 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:07.959987 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:07.959998 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:07:07.960103 [info] prophet: new watcher 127.0.0.1:47524 added
2021/09/03 14:07:07.960259 [info] [raftstore]: start init event
2021/09/03 14:07:07.997461 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:07.997481 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:08.065+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:08.065+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:08.065290 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:07:08.065317 [info] [transport]: transfer stopped
2021/09/03 14:07:08.065319 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:07:08.065321 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:07:08.065325 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:07:08.065328 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065330 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:08.065335 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065331 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:08.065335 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065339 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065342 [info] [transport]: send raft worker stopped
2021/09/03 14:07:08.065343 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065344 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:08.065342 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065337 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:08.065354 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:07:08.065364 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:07:08.065375 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:07:08.065343 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065344 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:08.065415 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:47456->127.0.0.1:30001: use of closed network connection
2021/09/03 14:07:08.065424 [error] prophet: client read loop stopped
{"level":"warn","ts":"2021-09-03T14:07:08.065+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:08.066522 [info] prophet: [prophet-leader/node-1]/keepalive: exit with lease expired
2021/09/03 14:07:08.066543 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:08.066573 [info] prophet: metrics are reset
2021/09/03 14:07:08.066577 [info] prophet: background jobs has been stopped
2021/09/03 14:07:08.066581 [info] prophet: coordinator stops running 
2021/09/03 14:07:08.066584 [info] prophet: coordinator is stopping
2021/09/03 14:07:08.066585 [info] prophet: coordinator has been stopped
2021/09/03 14:07:08.066588 [info] prophet: watcher notifer exited
2021/09/03 14:07:08.066625 [info] prophet: watcher notifier stopped
2021/09/03 14:07:08.066639 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:08.066649 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:07:08.066651 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:08.066654 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:08.066655 [info] [raftstore]: dynamic shards pool job stopped
2021/09/03 14:07:08.066658 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:07:08.066664 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
{"level":"info","ts":"2021-09-03T14:07:08.066+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:07:08.067+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"b47fe891348258ab","current-leader-member-id":"b47fe891348258ab","transferee-member-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.067+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [term 11] starts to transfer leadership to 896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.067+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab sends MsgTimeoutNow to 896d907d0af21082 immediately as 896d907d0af21082 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [term 11] received MsgTimeoutNow from b47fe891348258ab and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 received MsgVoteResp from 896d907d0af21082 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [logterm: 11, index: 61] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [logterm: 11, index: 61] sent MsgVote request to b47fe891348258ab at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 lost leader b47fe891348258ab at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [term: 11] received a MsgVote message with higher term from 896d907d0af21082 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"b47fe891348258ab [logterm: 11, index: 61, vote: 0] cast MsgVote for 896d907d0af21082 [logterm: 11, index: 61] at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.068+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab lost leader b47fe891348258ab at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.069+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 received MsgVoteResp from b47fe891348258ab at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.069+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:08.069+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.069+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 elected leader 896d907d0af21082 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:08.069+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: b47fe891348258ab elected leader 896d907d0af21082 at term 12"}
{"level":"warn","ts":"2021-09-03T14:07:08.070+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:07:08.070+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:07:08.167356 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"b47fe891348258ab","old-leader-member-id":"b47fe891348258ab","new-leader-member-id":"896d907d0af21082","took":"100.526ms"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.168+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"896d907d0af21082","error":"failed to read 896d907d0af21082 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"b47fe891348258ab","remote-peer-id":"896d907d0af21082"}
{"level":"info","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"896d907d0af21082"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"b47fe891348258ab","remote-peer-id-stream-handler":"b47fe891348258ab","remote-peer-id-from":"896d907d0af21082","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"b47fe891348258ab","remote-peer-id-stream-handler":"b47fe891348258ab","remote-peer-id-from":"896d907d0af21082","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:08.169+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"b47fe891348258ab","error":"failed to dial b47fe891348258ab on stream MsgApp v2 (peer b47fe891348258ab failed to find local node 896d907d0af21082)"}
{"level":"info","ts":"2021-09-03T14:07:08.170+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:07:08.200439 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:08.323+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:08.423+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:09.022+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"896d907d0af21082 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:07:09.022+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:09.022+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 896d907d0af21082 lost leader 896d907d0af21082 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgPreVote request to a at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgPreVote request to b at term 6"}
2021/09/03 14:07:09.118736 [info] [raftstore]: shard 8 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6, vote: a] cast MsgPreVote for c [logterm: 6, index: 6] at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgVoteResp from c at term 7"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgVote request to a at term 7"}
{"level":"info","ts":"2021-09-03T14:07:09.118+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 6, index: 6] sent MsgVote request to b at term 7"}
2021/09/03 14:07:09.118946 [info] [raftstore]: shard 8 peer 12 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 6] received a MsgVote message with higher term from c [term: 7]"}
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 7"}
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6, vote: 0] cast MsgVote for c [logterm: 6, index: 6] at term 7"}
2021/09/03 14:07:09.119187 [info] [raftstore]: shard 8 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgVoteResp from b at term 7"}
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"c has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:09.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became leader at term 7"}
2021/09/03 14:07:09.119321 [info] [raftstore]: shard 8 peer 12 ********become leader now********
2021/09/03 14:07:09.119372 [error] [raftstore]: shard 8 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.119400 [info] [raftstore]: shard 8 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:09.171+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:09.171+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:07:09.171247 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:07:09.171270 [info] [transport]: transfer stopped
2021/09/03 14:07:09.171272 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:07:09.171274 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:07:09.171278 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:07:09.171283 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:09.171293 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171286 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171298 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171300 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171302 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:09.171298 [info] [transport]: send raft worker stopped
2021/09/03 14:07:09.171287 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:09.171291 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171293 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:09.171326 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:07:09.171337 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:07:09.171339 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:07:09.171289 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171298 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.171313 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:09.249041 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:07:09.249073 [error] prophet: client read loop stopped
2021/09/03 14:07:09.249096 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:07:09.249101 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:09.249159 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.249178 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.249185 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.249328 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:09.343123 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.343145 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.343150 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.363916 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/09/03 14:07:09.443304 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.443322 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.443329 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.543331 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.543350 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.543355 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 received MsgPreVoteResp from 10 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:09.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"10 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:07:09.619584 [info] [raftstore]: shard 2 peer 16 ********become follower now********
{"level":"info","ts":"2021-09-03T14:07:09.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:07:09.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:07:09.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 received MsgVoteResp from 896d907d0af21082 at term 13"}
{"level":"info","ts":"2021-09-03T14:07:09.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [logterm: 12, index: 62] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:07:09.622+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"896d907d0af21082 [logterm: 12, index: 62] sent MsgVote request to b47fe891348258ab at term 13"}
2021/09/03 14:07:09.643264 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.643282 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.643287 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.742764 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:09.742802 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.742808 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.742814 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.842288 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.842307 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.842312 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.943143 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.943165 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:09.943170 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.043288 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.043313 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.043320 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.143210 [error] [raftstore]: shard 17 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.143230 [error] [raftstore]: shard 21 heartbeat to prophet failed with client is closed
2021/09/03 14:07:10.143240 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:10.172+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:09.171+0800","time spent":"1.0008777s","remote":"127.0.0.1:54594","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:07:10.172+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000370c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:07:10.172436 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:07:10.172+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:07:10.172+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:06.959+0800","time spent":"3.2125301s","remote":"127.0.0.1:54594","response type":"/etcdserverpb.Lease/LeaseGrant","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:07:10.172+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000370c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:54594->127.0.0.1:40002: use of closed network connection"}
2021/09/03 14:07:10.172610 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
{"level":"info","ts":"2021-09-03T14:07:10.173+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"896d907d0af21082","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:07:10.173+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.173+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.173+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"warn","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"896d907d0af21082","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.174+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"b47fe891348258ab"}
{"level":"info","ts":"2021-09-03T14:07:10.175+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:10.177+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:10.177+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:07:10.177107 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:07:10.177134 [info] [transport]: transfer stopped
2021/09/03 14:07:10.177136 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:07:10.177138 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:07:10.177141 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177141 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:07:10.177147 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177148 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177151 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177155 [info] [transport]: send raft worker stopped
2021/09/03 14:07:10.177156 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:10.177159 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177161 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177158 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:10.177163 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:10.177153 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177151 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.177173 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:10.177194 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:07:10.177211 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestShardPool (15.31s)
=== RUN   TestShardPoolWithFactory
2021/09/03 14:07:10.178464 [info] prophet: prophet logger set
2021/09/03 14:07:10.184189 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:10.184289 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:10.184301 [info] [raftstore]: begin to start prophet
2021/09/03 14:07:10.184325 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:07:10.184+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:10.184+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:07:10.184+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:10.184+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:10.185+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3926ms"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:07:10.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:07:10.190+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:10.192+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:10.194+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.389+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.390+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.390+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.390+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:10.390388 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:07:10.390+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:10.390+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:07:10.391768 [info] prophet: start system time monitor 
2021/09/03 14:07:10.392180 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:07:10.392365 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:10.392376 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:10.392691 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:10.393091 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:10.393109 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:10.393779 [info] prophet: load 0 containers, cost 193.5µs
2021/09/03 14:07:10.393936 [info] prophet: load 0 resources, cost 145.2µs
2021/09/03 14:07:10.394531 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:10.394569 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:10.394580 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:10.394582 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:10.394586 [info] prophet: client read loop started 
2021/09/03 14:07:10.394599 [info] prophet: client started
2021/09/03 14:07:10.394604 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:10.394608 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:10.394605 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:10.394614 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:10.394631 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649230 deployPath:"not set" 
2021/09/03 14:07:10.394643 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:10.395005 [info] prophet: load 0 jobs
2021/09/03 14:07:10.395178 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:10.395203 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:07:10.395745 [info] [raftstore]: create local store with id 1
2021/09/03 14:07:10.396179 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:07:10.396191 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:07:10.396387 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:07:10.397578 [info] prophet: container 1 limit added
2021/09/03 14:07:10.397613 [info] [raftstore]: prophet started
2021/09/03 14:07:10.397645 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:07:10.397666 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:10.397668 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:10.397679 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:07:10.397696 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:10.397701 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:10.397702 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
2021/09/03 14:07:10.397715 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:10.397740 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:07:10.397745 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:10.397746 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.397+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:07:10.397769 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:10.397770 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:10.397771 [info] [raftstore]: shards started
2021/09/03 14:07:10.397772 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:10.397778 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:07:10.397786 [info] [raftstore]: router started
2021/09/03 14:07:10.397820 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:10.397823 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:07:10.397837 [info] [raftstore]: router event loop task started
2021/09/03 14:07:10.397882 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:10.397895 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:10.397938 [info] prophet: new watcher 127.0.0.1:43664 added
2021/09/03 14:07:10.397983 [info] [raftstore]: start init event
2021/09/03 14:07:10.400647 [info] [raftstore]: dynamic shards pool job started
2021/09/03 14:07:10.400951 [info] prophet: resource 5 created with peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:10.400974 [info] prophet: resource 6 created with peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:10.401522 [info] [raftstore]: shard 5 peer 7 begin to create at store 1, peers: [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:10.401551 [info] [raftstore]: create init shard id:5 start:"b-1" end:"b-2" epoch:<confVer:3 > state:WaittingCreate peers:<id:7 containerID:1 > unique:"b-1" 
2021/09/03 14:07:10.401577 [info] [raftstore]: shard 5 peer 7 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:10.401592 [info] [raftstore]: shard 5 peer 7 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:10.401594 [info] [raftstore]: shard 5 peer 7 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(7)"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 7 [peers: [7], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:10.401639 [info] [raftstore]: shard 5 peer 7 delegate register completed
2021/09/03 14:07:10.401654 [info] [raftstore]: shard 5 peer 7 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:7 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:10.401655 [info] [raftstore]: shard 5 peer 7 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became leader at term 6"}
2021/09/03 14:07:10.401684 [info] [raftstore]: shard 6 peer 8 begin to create at store 1, peers: [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:07:10.401702 [info] [raftstore]: create init shard id:6 start:"b-2" end:"b-3" epoch:<confVer:3 > state:WaittingCreate peers:<id:8 containerID:1 > unique:"b-2" 
2021/09/03 14:07:10.401712 [info] [raftstore]: shard 6 peer 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:10.401721 [info] [raftstore]: shard 6 peer 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:10.401722 [info] [raftstore]: shard 6 peer 8 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:10.401748 [info] [raftstore]: shard 5 peer 7 ********become leader now********
2021/09/03 14:07:10.401749 [info] [raftstore]: shard 6 peer 8 delegate register completed
2021/09/03 14:07:10.401754 [info] [raftstore]: shard 6 peer 8 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:10.401756 [info] [raftstore]: shard 6 peer 8 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.401+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 6"}
2021/09/03 14:07:10.401794 [info] [raftstore]: shard 6 peer 8 ********become leader now********
2021/09/03 14:07:10.501407 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:07:10.501472 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:43662->127.0.0.1:30000: use of closed network connection
2021/09/03 14:07:10.501475 [error] prophet: client read loop stopped
2021/09/03 14:07:10.502093 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:07:10.502154 [info] prophet: patrol resources has been stopped 
{"level":"info","ts":"2021-09-03T14:07:10.502+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:10.502180 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:07:10.502186 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:10.502190 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:10.502193 [info] prophet: watcher notifer exited
2021/09/03 14:07:10.502207 [info] prophet: metrics are reset
2021/09/03 14:07:10.502213 [info] prophet: background jobs has been stopped
2021/09/03 14:07:10.502213 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:10.502220 [info] prophet: coordinator is stopping
2021/09/03 14:07:10.502223 [info] prophet: coordinator has been stopped
2021/09/03 14:07:10.502223 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:10.502266 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:10.502281 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:10.502268 [info] prophet: watcher notifier stopped
2021/09/03 14:07:10.502286 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:10.502293 [info] [raftstore]: dynamic shards pool job stopped
{"level":"info","ts":"2021-09-03T14:07:10.503+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:10.505+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:10.506+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:10.506+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:10.506757 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:07:10.506778 [info] [transport]: transfer stopped
2021/09/03 14:07:10.506780 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:07:10.506782 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:07:10.506785 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:07:10.506791 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506803 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506795 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:10.506807 [info] [transport]: send raft worker stopped
2021/09/03 14:07:10.506810 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506812 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506797 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506799 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:10.506799 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:10.506803 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506820 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:10.506827 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:07:10.506838 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestShardPoolWithFactory (0.33s)
=== RUN   TestIssue192
2021/09/03 14:07:10.506806 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.506808 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:10.507956 [info] prophet: prophet logger set
2021/09/03 14:07:10.513787 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:10.513908 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:10.513918 [info] [raftstore]: begin to start prophet
2021/09/03 14:07:10.513961 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:07:10.514+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:10.514+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:07:10.514+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:10.514+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:10.515+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.336ms"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:07:10.518+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:07:10.520+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:10.521+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:10.523+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:10.523+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:10.523+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:10.523+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:10.524+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:10.524+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:10.524+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:07:10.603341 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:10.618+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.619+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.619+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:10.619+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:10.619776 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:07:10.619+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:10.620+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:07:10.621260 [info] prophet: start system time monitor 
2021/09/03 14:07:10.621603 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:07:10.621831 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:10.621845 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:10.622180 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:10.622641 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:10.622663 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:10.623247 [info] prophet: load 0 containers, cost 487.6µs
2021/09/03 14:07:10.623381 [info] prophet: load 0 resources, cost 120.4µs
2021/09/03 14:07:10.623955 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:10.623964 [info] prophet: client read loop started 
2021/09/03 14:07:10.623968 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:10.623971 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:10.623955 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:10.624082 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:10.624093 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:10.623956 [info] prophet: client started
2021/09/03 14:07:10.624099 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:10.624100 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:10.624116 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649230 deployPath:"not set" 
2021/09/03 14:07:10.624119 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:10.624473 [info] prophet: load 0 jobs
2021/09/03 14:07:10.624730 [info] [raftstore]: create local store with id 1
2021/09/03 14:07:10.625238 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:10.625254 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:07:10.625244 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:07:10.625260 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:07:10.625458 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:07:10.626691 [info] prophet: container 1 limit added
2021/09/03 14:07:10.626732 [info] [raftstore]: prophet started
2021/09/03 14:07:10.626753 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:07:10.626769 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:07:10.626780 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:10.626781 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:10.626792 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:07:10.626814 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:10.626833 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:10.626834 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:10.626897 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:07:10.626902 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:10.626905 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:10.626+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:07:10.626953 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:10.626964 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:10.626964 [info] [raftstore]: shards started
2021/09/03 14:07:10.626967 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:10.626972 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:07:10.626987 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:07:10.627009 [info] [raftstore]: router started
2021/09/03 14:07:10.627053 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:10.627066 [info] [raftstore]: router event loop task started
2021/09/03 14:07:10.627122 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:10.627136 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:10.627185 [info] prophet: new watcher 127.0.0.1:43676 added
2021/09/03 14:07:10.627265 [info] [raftstore]: start init event
2021/09/03 14:07:10.629632 [info] [raftstore]: dynamic shards pool job started
2021/09/03 14:07:11.631129 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:07:11.631210 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:43674->127.0.0.1:30000: use of closed network connection
2021/09/03 14:07:11.631215 [error] prophet: client read loop stopped
2021/09/03 14:07:11.631553 [info] prophet: [prophet-leader/node-0]/lease: closed
{"level":"info","ts":"2021-09-03T14:07:11.631+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:11.631629 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:11.631647 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:07:11.631725 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:11.631731 [info] prophet: watcher notifer exited
2021/09/03 14:07:11.631661 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:11.631673 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:11.631683 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:11.631685 [info] prophet: coordinator is stopping
2021/09/03 14:07:11.631740 [info] prophet: coordinator has been stopped
2021/09/03 14:07:11.631752 [info] prophet: metrics are reset
2021/09/03 14:07:11.631771 [info] prophet: background jobs has been stopped
2021/09/03 14:07:11.631790 [info] prophet: watcher notifier stopped
2021/09/03 14:07:11.631804 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:11.631812 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:11.631814 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:07:11.632+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:11.634+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:11.636+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:11.636+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:11.636213 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:07:11.636234 [info] [transport]: transfer stopped
2021/09/03 14:07:11.636235 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:07:11.636239 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:07:11.636241 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636242 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:07:11.636247 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636250 [info] [transport]: send raft worker stopped
2021/09/03 14:07:11.636254 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:11.636254 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:11.636257 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636259 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636261 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:11.636261 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636259 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636255 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636255 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:11.636273 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:07:11.636277 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:11.636283 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestIssue192 (1.13s)
=== RUN   TestClusterStartAndStop
2021/09/03 14:07:11.637254 [info] prophet: prophet logger set
2021/09/03 14:07:11.642993 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:11.643156 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:11.649049 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:11.649177 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:11.654882 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:11.654964 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:11.655006 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:11.655017 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:07:11.655+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:11.655+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:07:11.655+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:11.655+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:11.656+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3392ms"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:07:11.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:07:11.661+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:11.662+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:11.664+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
2021/09/03 14:07:11.732563 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:12.060385 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:07:12.060+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:12.061+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:07:12.061+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:07:12.062287 [info] prophet: start system time monitor 
2021/09/03 14:07:12.062771 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:07:12.062942 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:12.062955 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:12.063194 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:12.063737 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:12.063756 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:12.064224 [info] prophet: load 0 containers, cost 408µs
2021/09/03 14:07:12.064372 [info] prophet: load 0 resources, cost 135.9µs
2021/09/03 14:07:12.065010 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:12.065084 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:12.065013 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:12.065100 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:12.065101 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:12.065017 [info] prophet: client read loop started 
2021/09/03 14:07:12.065147 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:12.065018 [info] prophet: client started
2021/09/03 14:07:12.065154 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:12.065156 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:12.065170 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649232 deployPath:"not set" 
2021/09/03 14:07:12.065180 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:12.065483 [info] prophet: load 0 jobs
2021/09/03 14:07:12.065735 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:12.065758 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:07:12.066299 [info] [raftstore]: create local store with id 1
2021/09/03 14:07:12.066797 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:07:12.066808 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:07:12.067021 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:07:12.068311 [info] prophet: container 1 limit added
2021/09/03 14:07:12.068355 [info] [raftstore]: prophet started
2021/09/03 14:07:12.068386 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:07:12.068395 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:12.068397 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:12.068409 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:07:12.068430 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:12.068435 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:12.068436 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
2021/09/03 14:07:12.068444 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:12.068473 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:07:12.068477 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:12.068478 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:12.068+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:07:12.068503 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:12.068518 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:12.068519 [info] [raftstore]: shards started
2021/09/03 14:07:12.068521 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:12.068527 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:07:12.068535 [info] [raftstore]: router started
2021/09/03 14:07:12.068543 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:07:12.068558 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:12.068618 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:12.068635 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:12.068622 [info] [raftstore]: router event loop task started
2021/09/03 14:07:12.068700 [info] prophet: new watcher 127.0.0.1:43688 added
2021/09/03 14:07:12.068754 [info] [raftstore]: start init event
2021/09/03 14:07:12.070228 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:12.070237 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:07:12.070+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(1207719958868251272 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:12.070+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"10c2aee7607dd288","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:12.070+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
2021/09/03 14:07:12.071461 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:1207719958868251272 peerURLs:"http://127.0.0.1:50001"  Members:[ID:1207719958868251272 peerURLs:"http://127.0.0.1:50001"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:12.071+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:12.073+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.2048ms"}
{"level":"warn","ts":"2021-09-03T14:07:12.574+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:13.059+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:07:13.059+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:07:13.059+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:07:13.069338 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:07:13.069354 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:13.069363 [info] prophet: watcher notifer exited
2021/09/03 14:07:13.069370 [info] prophet: metrics are reset
2021/09/03 14:07:13.069375 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:13.069381 [info] prophet: background jobs has been stopped
2021/09/03 14:07:13.069381 [info] prophet: coordinator is stopping
2021/09/03 14:07:13.069370 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:13.069389 [info] prophet: coordinator has been stopped
2021/09/03 14:07:13.069433 [info] prophet: watcher notifier stopped
2021/09/03 14:07:13.069446 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:13.069468 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:07:13.069478 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:13.069482 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:13.069434 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:13.069492 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"warn","ts":"2021-09-03T14:07:13.075+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:13.075+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
2021/09/03 14:07:13.173406 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"warn","ts":"2021-09-03T14:07:13.575+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:13.575+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:07:13.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:07:13.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:07:13.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:07:13.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 3"}
{"level":"warn","ts":"2021-09-03T14:07:14.075+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:14.560+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:07:14.560+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:07:14.560+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:07:14.560+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 4"}
{"level":"warn","ts":"2021-09-03T14:07:14.576+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:15.077+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:15.259+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:07:15.259+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:15.259+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:15.259+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 5"}
{"level":"warn","ts":"2021-09-03T14:07:15.578+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:16.079+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:16.159+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:16.159+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:16.159+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:16.159+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 6"}
{"level":"warn","ts":"2021-09-03T14:07:16.580+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:16.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:16.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:07:16.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:07:16.659+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 7"}
{"level":"warn","ts":"2021-09-03T14:07:17.072+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"10c2aee7607dd288","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:17.072+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"10c2aee7607dd288","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:17.080+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:17.459+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:07:17.459+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:07:17.459+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:07:17.459+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 8"}
{"level":"warn","ts":"2021-09-03T14:07:17.581+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193438,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:17.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:07:17.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:07:17.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:07:17.959+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 9"}
{"level":"warn","ts":"2021-09-03T14:07:18.074+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:07:18.074+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:07:18.074+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:07:18.077+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"10c2aee7607dd288","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:18.077+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:18.077+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:18.077+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 10c2aee7607dd288 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:18.078+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:18.080+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:18.082+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.082+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:18.082+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.082+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"10c2aee7607dd288","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"10c2aee7607dd288","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"10c2aee7607dd288","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"10c2aee7607dd288","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:18.083+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"10c2aee7607dd288","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"10c2aee7607dd288","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:18.084+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 10c2aee7607dd288 [term: 2]"}
{"level":"warn","ts":"2021-09-03T14:07:18.574+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654702193440,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:18.860+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:07:18.860+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.860+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.860+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 10c2aee7607dd288 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 lost leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 10c2aee7607dd288 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.861+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:18.862+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 10"}
{"level":"info","ts":"2021-09-03T14:07:18.862+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:07:18.862+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.6918528s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:18.862+0800","caller":"traceutil/trace.go:171","msg":"trace[1806728095] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.6919274s","start":"2021-09-03T14:07:13.170+0800","end":"2021-09-03T14:07:18.862+0800","steps":["trace[1806728095] 'agreement among raft nodes before linearized reading'  (duration: 5.6918509s)"],"step_count":1}
{"level":"info","ts":"2021-09-03T14:07:18.862+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:07:18.862+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:13.170+0800","time spent":"5.691968s","remote":"127.0.0.1:44114","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"warn","ts":"2021-09-03T14:07:18.862+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0091e3500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:18.862+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:18.863+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"10c2aee7607dd288","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:18.863+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"10c2aee7607dd288","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:18.863+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 switched to configuration voters=(1207719958868251272 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:18.863+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"10c2aee7607dd288","added-peer-id":"10c2aee7607dd288","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:18.864+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"10c2aee7607dd288","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/10c2aee7607dd288/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:18.864766 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:07:18.864+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:18.865+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:07:18.866507 [info] prophet: start system time monitor 
2021/09/03 14:07:18.867034 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:18.867047 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:18.867051 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:18.867086 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:18.867100 [info] prophet: client read loop started 
2021/09/03 14:07:18.867105 [info] prophet: client started
2021/09/03 14:07:18.867112 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:18.867114 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:18.867139 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649238 deployPath:"not set" 
2021/09/03 14:07:18.867152 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:18.867154 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:18.867157 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:18.867311 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:18.867369 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:18.867381 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:18.887511 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.7174282s
2021/09/03 14:07:18.887523 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:18.887525 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:07:18.888731 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:18.888741 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:18.889615 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:18.890701 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:18.890715 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:18.891747 [info] prophet: load 1 containers, cost 906.6µs
2021/09/03 14:07:18.892075 [info] prophet: load 1 resources, cost 316.1µs
2021/09/03 14:07:18.892759 [info] prophet: watcher notifier stopped
2021/09/03 14:07:18.892775 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:18.892779 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:18.893161 [info] prophet: load 0 jobs
2021/09/03 14:07:18.968253 [info] [raftstore]: create local store with id 5
2021/09/03 14:07:18.969027 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:18.971641 [info] prophet: container 5 limit added
2021/09/03 14:07:18.971715 [info] [raftstore]: prophet started
2021/09/03 14:07:18.971783 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:07:18.971792 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:07:18.971811 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:18.971816 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:18.971817 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:18.971818 [info] [raftstore]: shards started
2021/09/03 14:07:18.971820 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:18.971810 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:18.971826 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:07:18.971840 [info] [raftstore]: router started
2021/09/03 14:07:18.971872 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:18.971882 [info] [raftstore]: router event loop task started
2021/09/03 14:07:18.971972 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:18.971985 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:18.972057 [info] prophet: new watcher 127.0.0.1:43740 added
2021/09/03 14:07:18.972176 [info] [raftstore]: start init event
2021/09/03 14:07:18.973034 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:18.973047 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:07:18.973+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:3fe0110acfb77eaf RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:18.973+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:18.973936 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:18.982860 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:18.982873 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:07:18.982920 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:18.982925 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:18.982928 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:18.983421 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:18.983434 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:07:18.984490 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:07:18.986667 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:07:18.986681 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:07:19.084815 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:19.084938 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:19.084947 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:19.085013 [info] prophet: new watcher 127.0.0.1:43744 added
2021/09/03 14:07:19.085110 [info] [raftstore]: start init event
2021/09/03 14:07:19.086213 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:19.086287 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:19.086299 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:19.087709 [info] prophet: container 1 heartbeat stream binded
{"level":"warn","ts":"2021-09-03T14:07:19.474+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:e3a03be5ca547a47 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:19.474+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:19.474456 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:19.975+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:e3a03be5ca547a47 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:19.975+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:19.975373 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:20.475+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:7278617f093b0386 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:20.476+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:20.476085 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:20.976+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:7278617f093b0386 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:20.976+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:20.976645 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:21.477+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:2add99d193da69c5 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:21.477+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:21.477365 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:21.893606 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:21.893622 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:21.895500 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:21.895521 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:07:21.977+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:2add99d193da69c5 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:21.978+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:21.978069 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:21.987856 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:21.987868 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:21.987872 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:21.987883 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:21.995730 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:21.9957034 +0800 CST m=+85.234641601, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:07:21.995751 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:07:21.995844 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:21.995906 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.996012 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.996030 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:07:21.996107 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 70 221 99 77 24 3 79 21 171 110 94 170 118 174 228 118 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:21.996127 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.996300 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:07:21.996659 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:21.996689 [info] [transport]: connected to store 5
2021/09/03 14:07:21.996763 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:07:21.996786 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:07:21.996805 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:21.996824 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:21.996826 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:07:21.996856 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:07:21.996859 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:21.996+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:07:21.996896 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:07:21.998188 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:07:21.998281 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:21.998327 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.998353 [info] [transport]: connected to store 1
2021/09/03 14:07:21.998384 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.998407 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:21.998+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:07:21.998506 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 208 243 25 7 245 8 79 93 186 191 222 157 75 0 66 65 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:21.998527 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:21.998585 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:21.998639 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:07:21.998873 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:07:21.999652 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:21.9957034 +0800 CST m=+85.234641601, startAt:2021-09-03 14:07:21.9957456 +0800 CST m=+85.234683801, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 3.8939ms, 
2021/09/03 14:07:22.119012 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:22.119167 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:07:22.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
2021/09/03 14:07:22.119439 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
{"level":"info","ts":"2021-09-03T14:07:22.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:07:22.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:22.119+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:07:22.119476 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:07:22.119493 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:22.119511 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/09/03 14:07:22.319327 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:07:22.319342 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:07:22.319348 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:07:22.319360 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:22.319380 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:07:22.319484 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:22.319509 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:22.319593 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:07:22.319639 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"warn","ts":"2021-09-03T14:07:22.478+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:4d5a33494c75b00 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:22.478+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:22.478653 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:22.979+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:4d5a33494c75b00 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:22.979+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087ffdc0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:22.979761 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(1207719958868251272 6012325842117004866 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 switched to configuration voters=(1207719958868251272 6012325842117004866 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"10c2aee7607dd288","added-peer-id":"5370127fad490e42","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"5370127fad490e42","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.481+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
2021/09/03 14:07:23.482295 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:10  Member:ID:6012325842117004866 peerURLs:"http://127.0.0.1:50002"  Members:[ID:1207719958868251272 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001"  ID:6012325842117004866 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:23.482+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:23.484+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.3806ms"}
{"level":"info","ts":"2021-09-03T14:07:23.487+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"5370127fad490e42","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:23.487+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:23.487+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:23.487+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 5370127fad490e42 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:23.489+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:23.490+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.492+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"10c2aee7607dd288","to":"5370127fad490e42","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"10c2aee7607dd288","to":"5370127fad490e42","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"5370127fad490e42","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"5370127fad490e42","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"5370127fad490e42","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:23.493+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"5370127fad490e42","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:23.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:07:23.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:07:23.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 elected leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:23.495+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:23.495+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5370127fad490e42","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:23.495+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"5370127fad490e42","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:23.496+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 switched to configuration voters=(1207719958868251272 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:23.496+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5370127fad490e42","added-peer-id":"10c2aee7607dd288","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:23.496+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 switched to configuration voters=(1207719958868251272 6012325842117004866 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:23.496+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"5370127fad490e42","added-peer-id":"5370127fad490e42","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:23.497+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"5370127fad490e42","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/5370127fad490e42/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:23.497442 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:07:23.497+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:23.497+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:07:23.498867 [info] prophet: start system time monitor 
2021/09/03 14:07:23.499144 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:23.499158 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:23.499161 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:07:23.499188 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:23.499194 [info] prophet: client started
2021/09/03 14:07:23.499200 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:23.499202 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:23.499218 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649243 deployPath:"not set" 
2021/09/03 14:07:23.499228 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:23.499190 [info] prophet: client read loop started 
2021/09/03 14:07:23.499246 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:23.499257 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:23.499381 [info] [raftstore]: create local store with id 7
2021/09/03 14:07:23.499845 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:23.502027 [info] prophet: container 7 limit added
2021/09/03 14:07:23.502081 [info] [raftstore]: prophet started
2021/09/03 14:07:23.502089 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:07:23.502111 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:07:23.502120 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:23.502131 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:23.502134 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:23.502135 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:23.502136 [info] [raftstore]: shards started
2021/09/03 14:07:23.502137 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:23.502142 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:07:23.502150 [info] [raftstore]: router started
2021/09/03 14:07:23.502185 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:23.502186 [info] [raftstore]: router event loop task started
2021/09/03 14:07:23.502267 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:23.502279 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:23.502333 [info] prophet: new watcher 127.0.0.1:43814 added
2021/09/03 14:07:23.502419 [info] [raftstore]: start init event
2021/09/03 14:07:23.506919 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:07:23.5068962 +0800 CST m=+86.745834401, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/09/03 14:07:23.506940 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/09/03 14:07:23.507042 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.507111 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.507364 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.507386 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:23.507+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:07:23.507438 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.507452 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.507459 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 246 35 212 175 147 178 69 212 188 174 83 51 121 231 22 103 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.507471 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:23.507+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:07:23.507506 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.507585 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:07:23.507923 [info] [transport]: connected to store 7
2021/09/03 14:07:23.507977 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:07:23.507985 [info] [raftstore]: shard 2 peer 8 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:07:23.508000 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.508015 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:23.508017 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:07:23.508+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:23.508+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:23.508+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:07:23.508056 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:07:23.508059 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:23.508+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:23.508+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:07:23.508103 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:07:23.508794 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/09/03 14:07:23.508858 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.508910 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.509062 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.509083 [info] [transport]: connected to store 1
2021/09/03 14:07:23.509086 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:23.509+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6 8)"}
2021/09/03 14:07:23.509141 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.509150 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.509155 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8}] Context:[10 32 10 16 80 74 241 11 224 37 79 119 143 130 157 172 128 163 99 185 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.509218 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:23.509+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6 8)"}
2021/09/03 14:07:23.509247 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:23.509319 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:23.509334 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:07:23.509569 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<10> 
2021/09/03 14:07:23.510288 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:07:23.5068962 +0800 CST m=+86.745834401, startAt:2021-09-03 14:07:23.5069348 +0800 CST m=+86.745873101, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 3.342ms, 
2021/09/03 14:07:23.519669 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:07:23.519840 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:07:23.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:23.520+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:07:23.520+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:23.520+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/09/03 14:07:23.520053 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:07:23.520092 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:10 >,size=<123>
2021/09/03 14:07:23.520133 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:07:23.520149 [info] [transport]: shard 2 pending snap sent succ, size=<123>, epoch=<confVer:5 version:1 > term=<6> index=<10>
{"level":"info","ts":"2021-09-03T14:07:23.544+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"5370127fad490e42","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5370127fad490e42","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5370127fad490e42","to":"10c2aee7607dd288","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5370127fad490e42","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"5370127fad490e42","to":"10c2aee7607dd288","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:23.583+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
2021/09/03 14:07:23.590899 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:23.603847 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:07:23.603937 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:43746->127.0.0.1:30000: use of closed network connection
2021/09/03 14:07:23.603950 [error] prophet: client read loop stopped
2021/09/03 14:07:23.605324 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:07:23.605325 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:07:23.605355 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:23.605360 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:07:23.605364 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:23.605366 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:23.605370 [info] prophet: watcher notifer exited
{"level":"info","ts":"2021-09-03T14:07:23.605+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:23.605374 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:23.605379 [info] prophet: coordinator is stopping
2021/09/03 14:07:23.605383 [info] prophet: metrics are reset
2021/09/03 14:07:23.605326 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:07:23.605387 [info] prophet: background jobs has been stopped
2021/09/03 14:07:23.605390 [info] prophet: coordinator has been stopped
2021/09/03 14:07:23.605387 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:23.605407 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:07:23.605422 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:23.605429 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:23.605433 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:23.605425 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:23.605448 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:23.605450 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:23.605451 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:23.605460 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:23.605465 [info] prophet: watcher notifier stopped
2021/09/03 14:07:23.605467 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:23.605468 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:23.605471 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:23.605478 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:23.605926 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:07:23.605941 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:07:23.605964 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:23.605968 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 10] starts to transfer leadership to 10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sends MsgTimeoutNow to 10c2aee7607dd288 immediately as 10c2aee7607dd288 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [term 10] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 received MsgVoteResp from 10c2aee7607dd288 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 10, index: 40] sent MsgVote request to 5370127fad490e42 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 10, index: 40] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.606+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [term: 10] received a MsgVote message with higher term from 10c2aee7607dd288 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 10] received a MsgVote message with higher term from 10c2aee7607dd288 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [logterm: 10, index: 40, vote: 0] cast MsgVote for 10c2aee7607dd288 [logterm: 10, index: 40] at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 10, index: 40, vote: 0] cast MsgVote for 10c2aee7607dd288 [logterm: 10, index: 40] at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.607+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 elected leader 10c2aee7607dd288 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 10c2aee7607dd288 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:23.608+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 elected leader 10c2aee7607dd288 at term 11"}
2021/09/03 14:07:23.669150 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:23.706152 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"10c2aee7607dd288","took":"100.6502ms"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"10c2aee7607dd288"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"10c2aee7607dd288","error":"failed to read 10c2aee7607dd288 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.707+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"5370127fad490e42","error":"failed to read 5370127fad490e42 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"5370127fad490e42","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"10c2aee7607dd288","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"5370127fad490e42","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"10c2aee7607dd288","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 5370127fad490e42)"}
{"level":"warn","ts":"2021-09-03T14:07:23.708+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 10c2aee7607dd288)"}
{"level":"info","ts":"2021-09-03T14:07:23.709+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:07:23.719164 [info] [raftstore]: shard 2 peer 8 received a snapshot at 10
2021/09/03 14:07:23.719179 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:07:23.719188 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:07:23.719214 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:23.719227 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:07:23.719311 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:23.719338 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:23.719474 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/09/03 14:07:23.719520 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10}
2021/09/03 14:07:23.769091 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:23.868748 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:23.969146 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.069250 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:24.069283 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:24.077+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:24.169090 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.268883 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.369602 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.469114 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.569385 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:24.669111 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:24.710+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:24.710+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:24.710523 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:07:24.710541 [info] [transport]: transfer stopped
2021/09/03 14:07:24.710542 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:07:24.710544 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:07:24.710548 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:07:24.710552 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:24.710556 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:24.710557 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710565 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710565 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710567 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710567 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710577 [info] [transport]: send raft worker stopped
2021/09/03 14:07:24.710574 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710579 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:24.710579 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710574 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:24.710602 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:24.710640 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:07:24.710673 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:07:24.710686 [info] [raftstore]: store 5 begin to stop
{"level":"warn","ts":"2021-09-03T14:07:24.711+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"20µs","request":"header:<ID:15170511316025752853 > lease_revoke:<id:0000000000000000>","response":"size:26","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:07:24.711+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"14.9µs","request":"header:<ID:15170511316025752853 > lease_revoke:<id:0000000000000000>","response":"size:26","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:07:24.711+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0091e2000/#initially=[http://127.0.0.1:40001]","attempt":0,"error":"rpc error: code = NotFound desc = etcdserver: requested lease not found"}
2021/09/03 14:07:24.712017 [info] prophet: [prophet-leader/node-1]/lease: close failed with etcdserver: requested lease not found
{"level":"info","ts":"2021-09-03T14:07:24.712+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
{"level":"warn","ts":"2021-09-03T14:07:24.712+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0091e2000/#initially=[http://127.0.0.1:40001]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:07:24.712081 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:07:24.712+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:23.606+0800","time spent":"1.10542s","remote":"127.0.0.1:40874","response type":"/etcdserverpb.Lease/LeaseGrant","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"10c2aee7607dd288","current-leader-member-id":"10c2aee7607dd288","transferee-member-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [term 11] starts to transfer leadership to 5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 sends MsgTimeoutNow to 5370127fad490e42 immediately as 5370127fad490e42 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [term 11] received MsgTimeoutNow from 10c2aee7607dd288 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 received MsgVoteResp from 5370127fad490e42 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [logterm: 11, index: 42] sent MsgVote request to 10c2aee7607dd288 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [logterm: 11, index: 42] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 lost leader 10c2aee7607dd288 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.713+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [term: 11] received a MsgVote message with higher term from 5370127fad490e42 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"10c2aee7607dd288 [logterm: 11, index: 42, vote: 0] cast MsgVote for 5370127fad490e42 [logterm: 11, index: 42] at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 lost leader 10c2aee7607dd288 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 received MsgVoteResp from 10c2aee7607dd288 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 elected leader 5370127fad490e42 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:24.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 10c2aee7607dd288 elected leader 5370127fad490e42 at term 12"}
{"level":"warn","ts":"2021-09-03T14:07:24.715+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:07:24.715+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:07:24.775422 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:07:24.775455 [error] prophet: client read loop stopped
2021/09/03 14:07:24.775471 [error] prophet: container 5 heartbeat failed with client is closed
2021/09/03 14:07:24.775475 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:24.807044 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"10c2aee7607dd288","old-leader-member-id":"10c2aee7607dd288","new-leader-member-id":"5370127fad490e42","took":"100.2028ms"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:24.813+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"5370127fad490e42","error":"failed to read 5370127fad490e42 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"10c2aee7607dd288","remote-peer-id":"5370127fad490e42"}
{"level":"info","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"5370127fad490e42"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"10c2aee7607dd288","remote-peer-id-stream-handler":"10c2aee7607dd288","remote-peer-id-from":"5370127fad490e42","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"10c2aee7607dd288","error":"failed to dial 10c2aee7607dd288 on stream MsgApp v2 (peer 10c2aee7607dd288 failed to find local node 5370127fad490e42)"}
{"level":"warn","ts":"2021-09-03T14:07:24.814+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"10c2aee7607dd288","remote-peer-id-stream-handler":"10c2aee7607dd288","remote-peer-id-from":"5370127fad490e42","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:24.816+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:07:24.972353 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:24.987+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:25.159+0800","caller":"rafthttp/stream.go:194","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:25.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:25.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:25.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:25.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:25.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:07:25.669689 [info] [raftstore]: shard 2 peer 8 ********become follower now********
{"level":"warn","ts":"2021-09-03T14:07:25.687+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"5370127fad490e42 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:07:25.687+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:25.687+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 5370127fad490e42 lost leader 5370127fad490e42 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:25.816+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:25.816+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:07:25.816756 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:07:25.816781 [info] [transport]: transfer stopped
2021/09/03 14:07:25.816783 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:07:25.816785 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:07:25.816790 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:07:25.816794 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:25.816796 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816800 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:25.816799 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816803 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816805 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816808 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816807 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:25.816802 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816812 [info] [transport]: send raft worker stopped
2021/09/03 14:07:25.816813 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:25.816814 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816812 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:25.816844 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:07:25.816911 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:07:25.816925 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:07:25.908425 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:07:25.908448 [error] prophet: client read loop stopped
2021/09/03 14:07:25.908474 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:07:25.908478 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:25.908674 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:26.010657 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"warn","ts":"2021-09-03T14:07:26.170+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":1027519636223516429,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:26.170+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 no leader at term 12; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:07:26.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:07:26.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:07:26.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 received MsgVoteResp from 5370127fad490e42 at term 13"}
{"level":"info","ts":"2021-09-03T14:07:26.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [logterm: 12, index: 43] sent MsgVote request to 10c2aee7607dd288 at term 13"}
{"level":"info","ts":"2021-09-03T14:07:26.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"5370127fad490e42 [logterm: 12, index: 43] sent MsgVote request to 93ccda9956d988f4 at term 13"}
2021/09/03 14:07:26.502600 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:26.670+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":1027519636223516429,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:25.817+0800","time spent":"1.0002511s","remote":"127.0.0.1:55090","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:07:26.817447 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:07:26.817+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:07:26.817491 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:07:26.817527 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:23.606+0800","time spent":"3.2109836s","remote":"127.0.0.1:55090","response type":"/etcdserverpb.Lease/LeaseGrant","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"1.1476103s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/containers/00000000000000000005\" ","response":"","error":"context canceled"}
2021/09/03 14:07:26.817586 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 6 failed with not connected
{"level":"info","ts":"2021-09-03T14:07:26.817+0800","caller":"traceutil/trace.go:171","msg":"trace[307215173] range","detail":"{range_begin:/prophet/containers/00000000000000000005; range_end:; }","duration":"1.147647s","start":"2021-09-03T14:07:25.669+0800","end":"2021-09-03T14:07:26.817+0800","steps":["trace[307215173] 'agreement among raft nodes before linearized reading'  (duration: 1.1476096s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:26.817+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:25.669+0800","time spent":"1.147674s","remote":"127.0.0.1:55090","response type":"/etcdserverpb.KV/Range","request count":0,"request size":42,"response count":0,"response size":0,"request content":"key:\"/prophet/containers/00000000000000000005\" "}
{"level":"info","ts":"2021-09-03T14:07:26.818+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"5370127fad490e42","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:07:26.818+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.818+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.818+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"warn","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"10c2aee7607dd288"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"5370127fad490e42","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.819+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:26.821+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:26.869+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:26.869+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:26.869+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:26.869+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:26.869+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
{"level":"warn","ts":"2021-09-03T14:07:26.869+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:07:26.869928 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:07:26.869980 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 6 failed with not connected
2021/09/03 14:07:27.503003 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:27.712482 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:27.822+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:27.822+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:07:27.822460 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:07:27.822494 [info] [transport]: transfer stopped
2021/09/03 14:07:27.822496 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:07:27.822499 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:07:27.822503 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:07:27.822509 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822519 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822525 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822527 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:27.822528 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822509 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:27.822532 [info] [transport]: send raft worker stopped
2021/09/03 14:07:27.822512 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:27.822515 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822517 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822520 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822523 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:27.822528 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:27.822564 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:07:27.822616 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestClusterStartAndStop (16.19s)
=== RUN   TestClusterStartWithMoreNodes
2021/09/03 14:07:27.824068 [info] prophet: prophet logger set
2021/09/03 14:07:27.830118 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:27.830264 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:27.835847 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:27.835971 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:27.841686 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:27.841837 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:27.847149 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:27.847273 [info] [raftstore]: start scan gc snap files
2021/09/03 14:07:27.852516 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:07:27.852593 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:27.852604 [info] [raftstore]: begin to start prophet
2021/09/03 14:07:27.852646 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:07:27.852+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:27.852+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:07:27.852+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:27.852+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:27.854+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.382ms"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:07:27.856+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:07:27.858+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:27.860+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:27.862+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:28.157+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:28.158+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:28.158+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:28.158+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:07:28.158+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:07:28.158383 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:07:28.158+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:07:28.159747 [info] prophet: start system time monitor 
2021/09/03 14:07:28.160230 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:07:28.160359 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:28.160373 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:28.160624 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:28.161099 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:28.161113 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:28.161580 [info] prophet: load 0 containers, cost 367.7µs
2021/09/03 14:07:28.161752 [info] prophet: load 0 resources, cost 158.8µs
2021/09/03 14:07:28.162405 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:28.162416 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:28.162417 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:28.162421 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:28.162477 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:28.162486 [info] prophet: client read loop started 
2021/09/03 14:07:28.162490 [info] prophet: client started
2021/09/03 14:07:28.162491 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:28.162494 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:28.162499 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:28.162517 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649248 deployPath:"not set" 
2021/09/03 14:07:28.162531 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:28.162897 [info] prophet: load 0 jobs
2021/09/03 14:07:28.163067 [info] [raftstore]: create local store with id 1
2021/09/03 14:07:28.163601 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:07:28.163622 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:07:28.163624 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:07:28.163626 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:07:28.163790 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:07:28.165053 [info] prophet: container 1 limit added
2021/09/03 14:07:28.165093 [info] [raftstore]: prophet started
2021/09/03 14:07:28.165126 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:07:28.165135 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:28.165136 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:28.165148 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:07:28.165165 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:07:28.165196 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:28.165213 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:28.165214 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:07:28.165269 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:07:28.165275 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:07:28.165284 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:28.165+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:07:28.165315 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:28.165323 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:28.165323 [info] [raftstore]: shards started
2021/09/03 14:07:28.165325 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:28.165333 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:07:28.165342 [info] [raftstore]: router started
2021/09/03 14:07:28.165348 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:07:28.165360 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:28.165372 [info] [raftstore]: router event loop task started
2021/09/03 14:07:28.165406 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:28.165419 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:28.165476 [info] prophet: new watcher 127.0.0.1:44150 added
2021/09/03 14:07:28.165557 [info] [raftstore]: start init event
2021/09/03 14:07:28.166968 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:28.166979 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:07:28.167+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:28.167+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"e75a5de136530f0b","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:28.167+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.167+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:28.168+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
2021/09/03 14:07:28.169079 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:16670740192525750027 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:16670740192525750027 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:28.169+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:28.169+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:07:28.169+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:28.169+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:28.170+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.2932ms"}
{"level":"warn","ts":"2021-09-03T14:07:28.672+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:29.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:07:29.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:07:29.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:07:29.165756 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:07:29.165772 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:29.165792 [info] prophet: coordinator is stopping
2021/09/03 14:07:29.165798 [info] prophet: watcher notifer exited
2021/09/03 14:07:29.165802 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:29.165807 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:29.165810 [info] prophet: coordinator has been stopped
2021/09/03 14:07:29.165798 [info] prophet: metrics are reset
2021/09/03 14:07:29.165816 [info] prophet: background jobs has been stopped
2021/09/03 14:07:29.165864 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:29.165880 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:29.165864 [info] prophet: watcher notifier stopped
2021/09/03 14:07:29.165885 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:29.165907 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:07:29.165920 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:29.165939 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"warn","ts":"2021-09-03T14:07:29.172+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:29.172+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:07:29.673+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:29.673+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
2021/09/03 14:07:29.818094 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-09-03T14:07:29.857+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:07:29.857+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:07:29.857+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:07:29.857+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 3"}
{"level":"warn","ts":"2021-09-03T14:07:30.173+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:30.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:07:30.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:07:30.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:07:30.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 4"}
{"level":"warn","ts":"2021-09-03T14:07:30.674+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:30.957+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:07:30.957+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:07:30.957+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:07:30.957+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 5"}
{"level":"warn","ts":"2021-09-03T14:07:31.175+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:31.676+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:31.757+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:07:31.757+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:07:31.757+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:07:31.757+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 6"}
{"level":"warn","ts":"2021-09-03T14:07:32.176+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:32.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:07:32.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:07:32.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:07:32.658+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 7"}
{"level":"warn","ts":"2021-09-03T14:07:32.677+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:33.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:07:33.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:07:33.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:07:33.157+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 8"}
{"level":"warn","ts":"2021-09-03T14:07:33.169+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"e75a5de136530f0b","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:33.169+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"e75a5de136530f0b","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:07:33.178+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:33.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:07:33.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:07:33.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:07:33.657+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 9"}
{"level":"warn","ts":"2021-09-03T14:07:33.679+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339869,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:34.171+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:07:34.171+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:07:34.171+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:07:34.174+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"e75a5de136530f0b","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:34.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:34.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:34.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft e75a5de136530f0b [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:34.175+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:34.177+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"e75a5de136530f0b","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:34.179+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"e75a5de136530f0b","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"e75a5de136530f0b","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"e75a5de136530f0b","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"e75a5de136530f0b","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"e75a5de136530f0b","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.181+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from e75a5de136530f0b [term: 2]"}
{"level":"info","ts":"2021-09-03T14:07:34.457+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:07:34.457+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:07:34.457+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:07:34.457+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 10"}
{"level":"info","ts":"2021-09-03T14:07:34.458+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 3)"}
{"level":"warn","ts":"2021-09-03T14:07:34.672+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339871,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:07:35.173+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654706339871,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:35.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:07:35.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.357+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to e75a5de136530f0b at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.358+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:35.358+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.358+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.358+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from e75a5de136530f0b at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:07:35.359+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"6.0929068s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","caller":"traceutil/trace.go:171","msg":"trace[1952264852] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"6.0929452s","start":"2021-09-03T14:07:29.266+0800","end":"2021-09-03T14:07:35.359+0800","steps":["trace[1952264852] 'agreement among raft nodes before linearized reading'  (duration: 6.0929054s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:35.359+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:29.266+0800","time spent":"6.0929838s","remote":"127.0.0.1:44576","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"warn","ts":"2021-09-03T14:07:35.359+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029de700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:07:35.359+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b elected leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:35.360+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:35.360+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"e75a5de136530f0b","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:35.360+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"e75a5de136530f0b","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:35.360+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b switched to configuration voters=(10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:35.360+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"e75a5de136530f0b","added-peer-id":"e75a5de136530f0b","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:35.361+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"e75a5de136530f0b","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/e75a5de136530f0b/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:35.361362 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:07:35.361+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:35.361+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:07:35.362914 [info] prophet: start system time monitor 
2021/09/03 14:07:35.363262 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:35.363275 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:35.363278 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:35.363311 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:35.363322 [info] prophet: client read loop started 
2021/09/03 14:07:35.363328 [info] prophet: client started
2021/09/03 14:07:35.363333 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:35.363335 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:35.363351 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649255 deployPath:"not set" 
2021/09/03 14:07:35.363364 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:35.363366 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:35.363368 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:35.363485 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:35.363541 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:35.363549 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:35.385813 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 6.1194939s
2021/09/03 14:07:35.385827 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:35.385830 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:07:35.387372 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:07:35.387382 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:07:35.388222 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:07:35.389040 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:07:35.389062 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:07:35.389828 [info] prophet: load 1 containers, cost 668.8µs
2021/09/03 14:07:35.390125 [info] prophet: load 1 resources, cost 285.2µs
2021/09/03 14:07:35.390749 [info] prophet: watcher notifier stopped
2021/09/03 14:07:35.390770 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:35.390802 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:35.391085 [info] prophet: load 0 jobs
2021/09/03 14:07:35.464052 [info] [raftstore]: create local store with id 5
2021/09/03 14:07:35.464494 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:35.466769 [info] prophet: container 5 limit added
2021/09/03 14:07:35.466852 [info] [raftstore]: prophet started
2021/09/03 14:07:35.466865 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:07:35.466901 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:07:35.466921 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:35.466923 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:35.466926 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:35.466943 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:35.466944 [info] [raftstore]: shards started
2021/09/03 14:07:35.466954 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:35.466966 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:07:35.466978 [info] [raftstore]: router started
2021/09/03 14:07:35.466985 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:35.467016 [info] [raftstore]: router event loop task started
2021/09/03 14:07:35.467066 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:35.467080 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:35.467111 [info] prophet: new watcher 127.0.0.1:44202 added
2021/09/03 14:07:35.467187 [info] [raftstore]: start init event
2021/09/03 14:07:35.468208 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:35.468220 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:07:35.468+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:854b205f88838373 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:35.469+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:35.469099 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:35.483452 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:35.483465 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:07:35.483484 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:35.483488 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:35.483490 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:35.484001 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:35.484013 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:07:35.485070 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:07:35.487147 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:07:35.487158 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:07:35.582607 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:35.582726 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:35.582736 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:35.582815 [info] prophet: new watcher 127.0.0.1:44206 added
2021/09/03 14:07:35.582921 [info] [raftstore]: start init event
2021/09/03 14:07:35.586199 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:35.586268 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:35.586281 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:35.587735 [info] prophet: container 1 heartbeat stream binded
{"level":"warn","ts":"2021-09-03T14:07:35.969+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:854b205f88838373 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:35.970+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:35.970108 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:36.470+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:5de6c2cfd3b74a13 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:36.470+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:36.470736 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:36.971+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:5de6c2cfd3b74a13 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:36.971+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:36.971708 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:37.472+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:dde0f3bf62df5137 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:37.472+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:37.472567 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:07:37.973+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:dde0f3bf62df5137 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:37.973+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:37.973612 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:38.391513 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:07:38.391524 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:07:38.393666 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:07:38.393667 [info] prophet: coordinator begins to actively drive push operator 
{"level":"warn","ts":"2021-09-03T14:07:38.474+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:d59c2ebfdc5f4b1a RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:38.474+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:38.474462 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:07:38.488435 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:38.488445 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:38.488448 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:38.488457 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:38.494145 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:38.4941237 +0800 CST m=+101.733061901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:07:38.494164 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:07:38.494256 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.494310 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.494396 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.494416 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:38.494+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:07:38.494490 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 178 105 151 168 27 118 72 0 144 25 40 11 33 50 151 117 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.494508 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.494711 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:07:38.495081 [info] [transport]: connected to store 5
2021/09/03 14:07:38.495132 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:07:38.495150 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:07:38.495172 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.495192 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:38.495194 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:07:38.495234 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:07:38.495243 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:07:38.495289 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:07:38.495740 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:07:38.495798 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.495829 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.495868 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.495883 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:07:38.495+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:07:38.495926 [info] [transport]: connected to store 1
2021/09/03 14:07:38.495936 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 194 43 189 205 190 181 76 142 169 37 139 88 151 22 139 7 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.495944 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:07:38.496026 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:07:38.496074 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:38.496700 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:07:38.497219 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:07:38.4941237 +0800 CST m=+101.733061901, startAt:2021-09-03 14:07:38.4941583 +0800 CST m=+101.733096501, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 3.0453ms, 
2021/09/03 14:07:38.500629 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:38.619309 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:38.619427 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:07:38.619463 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:07:38.619470 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:07:38.619480 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:07:38.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:38.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:07:38.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:07:38.619+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:07:38.619663 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:07:38.619676 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:07:38.619681 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:07:38.619690 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:07:38.619714 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:07:38.619868 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:38.619896 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:07:38.619921 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:07:38.619968 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"warn","ts":"2021-09-03T14:07:38.974+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:d59c2ebfdc5f4b1a RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:07:38.974+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0087fec40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:07:38.974866 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(4072521476099701326 10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b switched to configuration voters=(4072521476099701326 10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"388480b493127a4e","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"e75a5de136530f0b","added-peer-id":"388480b493127a4e","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.476+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"388480b493127a4e"}
2021/09/03 14:07:39.477321 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:11  Member:ID:4072521476099701326 peerURLs:"http://127.0.0.1:50002"  Members:[ID:4072521476099701326 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:16670740192525750027 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:07:39.477+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:07:39.479+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.2973ms"}
{"level":"info","ts":"2021-09-03T14:07:39.482+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"388480b493127a4e","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:07:39.482+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:07:39.482+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:07:39.482+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 388480b493127a4e [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:07:39.484+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:07:39.485+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.487+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"388480b493127a4e","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"388480b493127a4e","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"388480b493127a4e","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"e75a5de136530f0b","to":"388480b493127a4e","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"e75a5de136530f0b","to":"388480b493127a4e","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"388480b493127a4e","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:07:39.488+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:39.489+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:39.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:07:39.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:07:39.489+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e elected leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:07:39.490+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:07:39.490+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"388480b493127a4e","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:07:39.490+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"388480b493127a4e","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:07:39.491+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e switched to configuration voters=(10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:39.491+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"388480b493127a4e","added-peer-id":"e75a5de136530f0b","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:07:39.491+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e switched to configuration voters=(4072521476099701326 10650127570946328820 16670740192525750027)"}
{"level":"info","ts":"2021-09-03T14:07:39.491+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"388480b493127a4e","added-peer-id":"388480b493127a4e","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:07:39.492+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"388480b493127a4e","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/388480b493127a4e/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:07:39.492438 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:07:39.492+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:07:39.492+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:07:39.493888 [info] prophet: start system time monitor 
2021/09/03 14:07:39.494282 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:39.494295 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.494297 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:07:39.494332 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.494394 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.494399 [info] prophet: client read loop started 
2021/09/03 14:07:39.494407 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:39.494411 [info] prophet: client started
2021/09/03 14:07:39.494418 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.494420 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:39.494436 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649259 deployPath:"not set" 
2021/09/03 14:07:39.494448 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:39.494565 [info] [raftstore]: create local store with id 7
2021/09/03 14:07:39.495025 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:39.497269 [info] prophet: container 7 limit added
2021/09/03 14:07:39.497380 [info] [raftstore]: prophet started
2021/09/03 14:07:39.497400 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:07:39.497424 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:07:39.497440 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:39.497442 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:39.497445 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:39.497446 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:39.497447 [info] [raftstore]: shards started
2021/09/03 14:07:39.497448 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:39.497453 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:07:39.497465 [info] [raftstore]: router started
2021/09/03 14:07:39.497491 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.497493 [info] [raftstore]: router event loop task started
2021/09/03 14:07:39.497560 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.497575 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:39.497629 [info] prophet: new watcher 127.0.0.1:44268 added
2021/09/03 14:07:39.497701 [info] [raftstore]: start init event
2021/09/03 14:07:39.498826 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:39.498843 [info] [raftstore]: begin to start prophet
2021/09/03 14:07:39.498875 [info] [raftstore]: begin start raftstore
2021/09/03 14:07:39.498886 [info] [raftstore]: begin to start prophet
2021/09/03 14:07:39.499758 [info] prophet: start system time monitor 
2021/09/03 14:07:39.499890 [info] prophet: start system time monitor 
2021/09/03 14:07:39.500239 [info] prophet: [prophet-leader/node-4]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:39.500251 [info] prophet: [prophet-leader/node-4]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.500254 [info] prophet: ********node-4 become to follower now********
2021/09/03 14:07:39.500264 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.500298 [info] prophet: client read loop started 
2021/09/03 14:07:39.500311 [info] prophet: client started
2021/09/03 14:07:39.500314 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.500315 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:39.500329 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10004" clientAddr:"127.0.0.1:20004" labels:<key:"c" value:"4" > startTime:1630649259 deployPath:"not set" 
2021/09/03 14:07:39.500338 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:39.500314 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.500370 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:39.500449 [info] prophet: [prophet-leader/node-3]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:07:39.500461 [info] prophet: [prophet-leader/node-3]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.500463 [info] prophet: ********node-3 become to follower now********
2021/09/03 14:07:39.500489 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.500452 [info] [raftstore]: create local store with id 8
2021/09/03 14:07:39.500506 [info] prophet: client read loop started 
2021/09/03 14:07:39.500511 [info] prophet: client started
2021/09/03 14:07:39.500514 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.500515 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:07:39.500528 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10003" clientAddr:"127.0.0.1:20003" labels:<key:"c" value:"3" > startTime:1630649259 deployPath:"not set" 
2021/09/03 14:07:39.500530 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:07:39.500545 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.500557 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:39.500609 [info] [raftstore]: create local store with id 9
2021/09/03 14:07:39.500861 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:39.500906 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:07:39.503020 [info] prophet: container 8 limit added
2021/09/03 14:07:39.503079 [info] [raftstore]: prophet started
2021/09/03 14:07:39.503091 [info] prophet: container 8 heartbeat stream binded
2021/09/03 14:07:39.503129 [info] [raftstore]: start listen at 127.0.0.1:10004 for raft
2021/09/03 14:07:39.503151 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:39.503153 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:39.503157 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:39.503158 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:39.503159 [info] [raftstore]: shards started
2021/09/03 14:07:39.503161 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:39.503169 [info] [raftstore]: start listen at 127.0.0.1:20004 for client
2021/09/03 14:07:39.503199 [info] [raftstore]: router started
2021/09/03 14:07:39.503224 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.503274 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.503288 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:39.503306 [info] [raftstore]: router event loop task started
2021/09/03 14:07:39.504108 [info] prophet: new watcher 127.0.0.1:44286 added
2021/09/03 14:07:39.504169 [info] [raftstore]: start init event
2021/09/03 14:07:39.505781 [info] prophet: container 9 limit added
2021/09/03 14:07:39.505852 [info] [raftstore]: prophet started
2021/09/03 14:07:39.505870 [info] prophet: container 9 heartbeat stream binded
2021/09/03 14:07:39.505893 [info] [raftstore]: start listen at 127.0.0.1:10003 for raft
2021/09/03 14:07:39.505905 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:07:39.505918 [info] [raftstore]: raft shards workers started
2021/09/03 14:07:39.505921 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:07:39.505922 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:07:39.505923 [info] [raftstore]: shards started
2021/09/03 14:07:39.505924 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:07:39.505930 [info] [raftstore]: start listen at 127.0.0.1:20003 for client
2021/09/03 14:07:39.505936 [info] [raftstore]: router started
2021/09/03 14:07:39.505969 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:07:39.506014 [info] [raftstore]: router event loop task started
2021/09/03 14:07:39.506038 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:07:39.506041 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:07:39.506059 [info] prophet: [prophet-leader/node-4]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.506062 [info] prophet: [prophet-leader/node-3]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.506292 [info] prophet: new watcher 127.0.0.1:44288 added
2021/09/03 14:07:39.508565 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:07:39.508609 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:44208->127.0.0.1:30000: use of closed network connection
2021/09/03 14:07:39.508612 [error] prophet: client read loop stopped
2021/09/03 14:07:39.508624 [info] [raftstore]: start init event
2021/09/03 14:07:39.509517 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:07:39.509550 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
{"level":"info","ts":"2021-09-03T14:07:39.509+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:39.509567 [info] prophet: [prophet-leader/node-4]/watch: leader deleted
2021/09/03 14:07:39.509573 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:39.509579 [info] prophet: patrol resources has been stopped 
2021/09/03 14:07:39.509579 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:07:39.509682 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:07:39.509687 [info] prophet: watcher notifer exited
2021/09/03 14:07:39.509687 [info] prophet: [prophet-leader/node-3]/watch: leader deleted
2021/09/03 14:07:39.509701 [info] prophet: metrics are reset
2021/09/03 14:07:39.509582 [info] prophet: drive push operator has been stopped 
2021/09/03 14:07:39.509718 [info] prophet: background jobs has been stopped
2021/09/03 14:07:39.509585 [info] prophet: coordinator is stopping
2021/09/03 14:07:39.509727 [info] prophet: coordinator has been stopped
2021/09/03 14:07:39.509755 [info] prophet: ********node-3 become to follower now********
2021/09/03 14:07:39.509770 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.509762 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:39.509779 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:39.509782 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:39.509598 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:07:39.509783 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:39.509661 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.509791 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:39.509801 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:39.509815 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:39.509665 [info] prophet: ********node-4 become to follower now********
2021/09/03 14:07:39.509827 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.509829 [info] prophet: [prophet-leader/node-4]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:39.509593 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:07:39.509833 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:39.509838 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:39.509773 [info] prophet: [prophet-leader/node-3]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:39.509877 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:39.509892 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:39.509877 [info] prophet: watcher notifier stopped
2021/09/03 14:07:39.509897 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.510125 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:07:39.510137 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:07:39.510+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 11] starts to transfer leadership to e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to e75a5de136530f0b after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [term 11] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b received MsgVoteResp from e75a5de136530f0b at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 11, index: 45] sent MsgVote request to 388480b493127a4e at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 11, index: 45] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [term: 11] received a MsgVote message with higher term from e75a5de136530f0b [term: 12]"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 11] received a MsgVote message with higher term from e75a5de136530f0b [term: 12]"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [logterm: 11, index: 45, vote: 0] cast MsgVote for e75a5de136530f0b [logterm: 11, index: 45] at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 11, index: 45, vote: 0] cast MsgVote for e75a5de136530f0b [logterm: 11, index: 45] at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b received MsgVoteResp from 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b elected leader e75a5de136530f0b at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e elected leader e75a5de136530f0b at term 12"}
{"level":"info","ts":"2021-09-03T14:07:39.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader e75a5de136530f0b at term 12"}
2021/09/03 14:07:39.513650 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:07:39.514867 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:07:39.514888 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:07:39.517987 [info] prophet: load 5 containers, cost 3.0426ms
2021/09/03 14:07:39.518223 [info] prophet: load 1 resources, cost 222µs
2021/09/03 14:07:39.518775 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:07:39.518819 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:07:39.519093 [info] prophet: load 0 jobs
{"level":"info","ts":"2021-09-03T14:07:39.538+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"388480b493127a4e","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
2021/09/03 14:07:39.565593 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"388480b493127a4e","to":"e75a5de136530f0b","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"388480b493127a4e","to":"e75a5de136530f0b","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:39.579+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"388480b493127a4e","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:07:39.579+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"388480b493127a4e","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:07:39.579+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.578+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.579+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:39.585790 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:07:39.585804 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:07:39.585832 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:07:39.585834 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.585836 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:07:39.586456 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:07:39.586471 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:07:39.587897 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
2021/09/03 14:07:39.590980 [info] prophet: [prophet-leader/node-2]/lease: closed
2021/09/03 14:07:39.590993 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:07:39.610204 [info] prophet: [prophet-leader/node-0]/loop: exit
2021/09/03 14:07:39.610484 [info] prophet: [prophet-leader/node-4]/loop: current leader is [̲node-1127.0.0.1:30001]
2021/09/03 14:07:39.610505 [info] prophet: [prophet-leader/node-4]/loop: start watch leader ̲node-1127.0.0.1:30001
2021/09/03 14:07:39.610510 [info] prophet: ********node-4 become to follower now********
2021/09/03 14:07:39.610515 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:39.610665 [info] prophet: [prophet-leader/node-3]/loop: current leader is [̲node-1127.0.0.1:30001]
2021/09/03 14:07:39.610682 [info] prophet: [prophet-leader/node-3]/loop: start watch leader ̲node-1127.0.0.1:30001
2021/09/03 14:07:39.610686 [info] prophet: ********node-3 become to follower now********
2021/09/03 14:07:39.610690 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:07:39.610+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"e75a5de136530f0b","took":"100.0375ms"}
{"level":"info","ts":"2021-09-03T14:07:39.610+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"e75a5de136530f0b","error":"failed to read e75a5de136530f0b on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"388480b493127a4e","error":"failed to read 388480b493127a4e on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"e75a5de136530f0b","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"e75a5de136530f0b","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"388480b493127a4e","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:39.611+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"388480b493127a4e","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:39.612+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node e75a5de136530f0b)"}
{"level":"warn","ts":"2021-09-03T14:07:39.612+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 388480b493127a4e)"}
{"level":"info","ts":"2021-09-03T14:07:39.613+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:07:39.665858 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:39.685954 [info] prophet: [prophet-leader/node-4]/watch: leader updated to ̲node-1127.0.0.1:30001
2021/09/03 14:07:39.685979 [info] prophet: [prophet-leader/node-3]/watch: leader updated to ̲node-1127.0.0.1:30001
2021/09/03 14:07:39.766136 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:39.866354 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:39.966125 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:39.975+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:40.066194 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:40.166221 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:40.166317 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:40.266257 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:40.366100 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:40.466165 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:07:40.467584 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.467648 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.467653 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:40.467702 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:07:40.504293 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.504367 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.504380 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:40.504436 [info] prophet: container 8 heartbeat stream binded
2021/09/03 14:07:40.506809 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.506854 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.506857 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:07:40.506894 [info] prophet: container 9 heartbeat stream binded
2021/09/03 14:07:40.510074 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.510110 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.510146 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.510162 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:07:40.510146 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:07:40.510177 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.510192 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:07:40.510220 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:07:40.510236 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:07:40.510240 [info] prophet: new watcher 127.0.0.1:48496 added
2021/09/03 14:07:40.510231 [info] prophet: new watcher 127.0.0.1:48494 added
2021/09/03 14:07:40.510301 [info] prophet: new watcher 127.0.0.1:48500 added
2021/09/03 14:07:40.510333 [info] [raftstore]: start init event
2021/09/03 14:07:40.510354 [info] [raftstore]: start init event
2021/09/03 14:07:40.510403 [info] [raftstore]: start init event
2021/09/03 14:07:40.566039 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:40.613+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:07:40.613+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:07:40.613933 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:07:40.613957 [info] [transport]: transfer stopped
2021/09/03 14:07:40.613959 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:07:40.613960 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:07:40.613964 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:07:40.613967 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613968 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:40.613973 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:40.613974 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613976 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:40.613979 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613980 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613971 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:40.613984 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613985 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613985 [info] [transport]: send raft worker stopped
2021/09/03 14:07:40.613979 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.613986 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:07:40.614055 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:07:40.614078 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:07:40.613987 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:40.614140 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:48484->127.0.0.1:30001: use of closed network connection
2021/09/03 14:07:40.614154 [error] prophet: client read loop stopped
2021/09/03 14:07:40.614964 [info] prophet: [prophet-leader/node-1]/lease: closed
{"level":"info","ts":"2021-09-03T14:07:40.614+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:07:40.615017 [info] prophet: coordinator stops running 
2021/09/03 14:07:40.615031 [info] prophet: coordinator is stopping
2021/09/03 14:07:40.615033 [info] prophet: coordinator has been stopped
2021/09/03 14:07:40.615049 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/09/03 14:07:40.615071 [info] prophet: [prophet-leader/node-3]/watch: leader deleted
2021/09/03 14:07:40.615072 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:07:40.615084 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:07:40.615088 [info] prophet: watcher notifer exited
2021/09/03 14:07:40.615072 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:07:40.615098 [info] prophet: metrics are reset
2021/09/03 14:07:40.615109 [info] prophet: ********node-3 become to follower now********
2021/09/03 14:07:40.615114 [info] prophet: background jobs has been stopped
2021/09/03 14:07:40.615115 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:40.615123 [info] prophet: [prophet-leader/node-3]/loop: leader ̲node-1127.0.0.1:30001 was out
2021/09/03 14:07:40.615126 [info] prophet: [prophet-leader/node-4]/watch: leader deleted
2021/09/03 14:07:40.615144 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:40.615159 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:40.615147 [info] prophet: ********node-4 become to follower now********
2021/09/03 14:07:40.615166 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:40.615170 [info] prophet: [prophet-leader/node-4]/loop: leader ̲node-1127.0.0.1:30001 was out
2021/09/03 14:07:40.615194 [info] prophet: watcher notifier stopped
2021/09/03 14:07:40.615204 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:40.615207 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:07:40.615208 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:07:40.615211 [error] prophet: watcher read events failed with EOF
2021/09/03 14:07:40.615213 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"e75a5de136530f0b","current-leader-member-id":"e75a5de136530f0b","transferee-member-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [term 12] starts to transfer leadership to 388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b sends MsgTimeoutNow to 388480b493127a4e immediately as 388480b493127a4e already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [term 12] received MsgTimeoutNow from e75a5de136530f0b and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e received MsgVoteResp from 388480b493127a4e at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [logterm: 12, index: 54] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [logterm: 12, index: 54] sent MsgVote request to e75a5de136530f0b at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.616+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e lost leader e75a5de136530f0b at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [term: 12] received a MsgVote message with higher term from 388480b493127a4e [term: 13]"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"e75a5de136530f0b [logterm: 12, index: 54, vote: 0] cast MsgVote for 388480b493127a4e [logterm: 12, index: 54] at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b lost leader e75a5de136530f0b at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e received MsgVoteResp from e75a5de136530f0b at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became leader at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e elected leader 388480b493127a4e at term 13"}
{"level":"info","ts":"2021-09-03T14:07:40.617+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: e75a5de136530f0b elected leader 388480b493127a4e at term 13"}
{"level":"warn","ts":"2021-09-03T14:07:40.618+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:07:40.618+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:07:40.715981 [info] prophet: [prophet-leader/node-1]/loop: exit
2021/09/03 14:07:40.716297 [info] prophet: [prophet-leader/node-4]/loop: current leader is []
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:07:40.716402 [info] prophet: [prophet-leader/node-3]/loop: current leader is []
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"e75a5de136530f0b","old-leader-member-id":"e75a5de136530f0b","new-leader-member-id":"388480b493127a4e","took":"100.0844ms"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:07:40.716+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"388480b493127a4e","error":"failed to read 388480b493127a4e on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"e75a5de136530f0b","remote-peer-id":"388480b493127a4e"}
{"level":"info","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"388480b493127a4e"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"e75a5de136530f0b","remote-peer-id-stream-handler":"e75a5de136530f0b","remote-peer-id-from":"388480b493127a4e","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"e75a5de136530f0b","remote-peer-id-stream-handler":"e75a5de136530f0b","remote-peer-id-from":"388480b493127a4e","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:07:40.717+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"e75a5de136530f0b","error":"failed to dial e75a5de136530f0b on stream MsgApp v2 (peer e75a5de136530f0b failed to find local node 388480b493127a4e)"}
{"level":"info","ts":"2021-09-03T14:07:40.718+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
{"level":"warn","ts":"2021-09-03T14:07:40.983+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:41.316+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":8813117492044356114,"retry-timeout":"500ms"}
2021/09/03 14:07:41.468169 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:41.582+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"388480b493127a4e stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:07:41.582+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:07:41.582+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 388480b493127a4e lost leader 388480b493127a4e at term 13"}
{"level":"info","ts":"2021-09-03T14:07:41.719+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:07:41.719+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:07:41.719458 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:07:41.719485 [info] [transport]: transfer stopped
2021/09/03 14:07:41.719487 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:07:41.719489 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:07:41.719493 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:07:41.719498 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:41.719507 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719512 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719514 [info] [transport]: send raft worker stopped
2021/09/03 14:07:41.719516 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:41.719517 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:41.719500 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719502 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:41.719526 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:07:41.719504 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719545 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:07:41.719549 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:07:41.719506 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719510 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719509 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:41.719533 [info] [transport]: send snapshot worker stopped
{"level":"warn","ts":"2021-09-03T14:07:41.817+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":8813117492044356114,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:07:41.817+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e no leader at term 13; dropping index reading msg"}
2021/09/03 14:07:41.901914 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:07:41.901945 [error] prophet: client read loop stopped
2021/09/03 14:07:41.901959 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:07:41.901964 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:41.902155 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:41.913760 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:07:42.283+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:07:42.283+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:07:42.283+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e received MsgVoteResp from 388480b493127a4e at term 14"}
{"level":"info","ts":"2021-09-03T14:07:42.283+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [logterm: 13, index: 55] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:07:42.283+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"388480b493127a4e [logterm: 13, index: 55] sent MsgVote request to e75a5de136530f0b at term 14"}
{"level":"warn","ts":"2021-09-03T14:07:42.317+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":8813117492044356114,"retry-timeout":"500ms"}
2021/09/03 14:07:42.498135 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:41.719+0800","time spent":"1.0006668s","remote":"127.0.0.1:55544","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0008d4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:07:42.720634 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:07:42.720+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0008d4c40/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:07:42.720730 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/09/03 14:07:42.720733 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context canceled, retry later
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"1.9042144s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: EOF"}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"129.3862ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0088d81c0/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: EOF"}
{"level":"info","ts":"2021-09-03T14:07:42.720+0800","caller":"traceutil/trace.go:171","msg":"trace[722776842] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"1.904257s","start":"2021-09-03T14:07:40.816+0800","end":"2021-09-03T14:07:42.720+0800","steps":["trace[722776842] 'agreement among raft nodes before linearized reading'  (duration: 1.9042133s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:40.816+0800","time spent":"1.904321s","remote":"127.0.0.1:55554","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:07:42.720+0800","caller":"traceutil/trace.go:171","msg":"trace[638656063] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"129.4439ms","start":"2021-09-03T14:07:42.591+0800","end":"2021-09-03T14:07:42.720+0800","steps":["trace[638656063] 'agreement among raft nodes before linearized reading'  (duration: 129.3844ms)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"1.9042484s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:07:42.720+0800","caller":"traceutil/trace.go:171","msg":"trace[933027775] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"1.9043732s","start":"2021-09-03T14:07:40.816+0800","end":"2021-09-03T14:07:42.720+0800","steps":["trace[933027775] 'agreement among raft nodes before linearized reading'  (duration: 1.9042554s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:07:42.720+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:07:40.816+0800","time spent":"1.9043926s","remote":"127.0.0.1:55562","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"388480b493127a4e","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"warn","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"388480b493127a4e","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.722+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"e75a5de136530f0b"}
{"level":"info","ts":"2021-09-03T14:07:42.723+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
2021/09/03 14:07:42.821171 [info] prophet: [prophet-leader/node-2]/loop: exit
2021/09/03 14:07:43.498392 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:07:43.724+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:07:43.724+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:07:43.724240 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:07:43.724267 [info] [transport]: transfer stopped
2021/09/03 14:07:43.724269 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:07:43.724270 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:07:43.724272 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724274 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:07:43.724283 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:43.724284 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:43.724290 [info] [transport]: send raft worker stopped
2021/09/03 14:07:43.724287 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724293 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:07:43.724294 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724284 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724295 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724288 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724298 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724299 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:43.724297 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724304 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:07:43.724324 [info] [raftstore]: store 7 rpc stopped
2021/09/03 14:07:43.724334 [info] [raftstore]: store 9 begin to stop
2021/09/03 14:07:43.724385 [info] [raftstore]: store 9 pd stopped
2021/09/03 14:07:43.724408 [info] [transport]: transfer stopped
2021/09/03 14:07:43.724409 [info] [raftstore]: store 9 transport stopped
2021/09/03 14:07:43.724411 [info] [raftstore]: store 9 all shards stopped
2021/09/03 14:07:43.724414 [info] [raftstore]: store 9 all snapshot manager stopped
2021/09/03 14:07:43.724421 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724430 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724434 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724437 [info] [transport]: send snapshot worker stopped
{"level":"warn","ts":"2021-09-03T14:07:43.724+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0088d81c0/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":1,"error":"rpc error: code = Canceled desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:07:43.724440 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724450 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:07:43.724425 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724428 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724443 [info] [transport]: send snapshot worker stopped
2021/09/03 14:07:43.724458 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:07:43.724444 [info] [transport]: send raft worker stopped
2021/09/03 14:07:43.724446 [info] [raftstore]: router event loop task stopped
2021/09/03 14:07:43.724447 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/09/03 14:07:43.724491 [error] prophet: [prophet-leader/node-3]/loop: load current leader failed with context canceled, retry later
2021/09/03 14:07:43.821169 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/09/03 14:07:43.825379 [info] prophet: [prophet-leader/node-3]/loop: exit
2021/09/03 14:07:43.911963 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:07:43.911995 [error] prophet: client read loop stopped
2021/09/03 14:07:43.911999 [error] prophet: container 9 heartbeat failed with client is closed
2021/09/03 14:07:43.912002 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:07:43.912203 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:07:50.816+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":1,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused\""}
2021/09/03 14:07:50.816822 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:07:50.816827 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:07:51.568973 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:07:51.568989 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:08:00.918+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:08:00.918792 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:08:00.918797 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:08:01.568965 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:08:01.568981 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:08:11.020+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:08:11.020350 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:08:11.020355 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:08:11.569012 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:08:11.569029 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:08:14.499+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
{"level":"info","ts":"2021-09-03T14:08:14.500+0800","logger":"etcd-client","caller":"v3/client.go:207","msg":"Auto sync endpoints failed.","error":"context deadline exceeded"}
{"level":"warn","ts":"2021-09-03T14:08:21.120+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40001: connect: connection refused\""}
2021/09/03 14:08:21.120814 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:08:21.120819 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:08:21.569285 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:08:21.569300 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:08:31.221+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:08:31.221878 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:08:31.221884 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:08:31.569226 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:08:31.569243 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:08:41.323+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:08:41.323117 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context deadline exceeded
2021/09/03 14:08:41.323121 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context deadline exceeded, retry later
2021/09/03 14:08:41.569140 [error] prophet: container 8 heartbeat failed with rpc timeout
2021/09/03 14:08:41.569154 [error] [raftstore]: send store heartbeat failed with rpc timeout
2021/09/03 14:08:43.724967 [info] [raftstore]: store 9 task runner stopped
2021/09/03 14:08:43.725003 [info] [raftstore]: store 9 rpc stopped
2021/09/03 14:08:43.725006 [info] [raftstore]: store 8 begin to stop
2021/09/03 14:08:43.725233 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:08:43.725249 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:08:43.725279 [info] [raftstore]: store 8 pd stopped
2021/09/03 14:08:43.725310 [info] [transport]: transfer stopped
2021/09/03 14:08:43.725322 [info] [raftstore]: store 8 transport stopped
2021/09/03 14:08:43.725323 [info] [raftstore]: store 8 all shards stopped
2021/09/03 14:08:43.725328 [info] [raftstore]: store 8 all snapshot manager stopped
2021/09/03 14:08:43.725345 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725360 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725347 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725350 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:08:43.725364 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725352 [info] [raftstore]: router event loop task stopped
2021/09/03 14:08:43.725358 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725371 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725373 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725386 [info] [transport]: send snapshot worker stopped
2021/09/03 14:08:43.725388 [info] [transport]: send raft worker stopped
2021/09/03 14:08:43.725392 [info] [raftstore]: handle resource heartbeat resp task stopped
{"level":"warn","ts":"2021-09-03T14:08:43.725+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40000;http://127.0.0.1:40001;http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = latest balancer error: last connection error: connection error: desc = \"transport: Error while dialing dial tcp 127.0.0.1:40002: connect: connection refused\""}
2021/09/03 14:08:43.725456 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/09/03 14:08:43.725473 [error] prophet: [prophet-leader/node-4]/loop: load current leader failed with context canceled, retry later
2021/09/03 14:08:43.826121 [info] prophet: [prophet-leader/node-4]/loop: exit
2021/09/03 14:08:43.832270 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/09/03 14:08:43.920900 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:08:43.920932 [error] prophet: client read loop stopped
2021/09/03 14:08:43.920938 [error] prophet: container 8 heartbeat failed with client is closed
2021/09/03 14:08:43.920940 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:43.725513 [info] [raftstore]: store 8 task runner stopped
2021/09/03 14:09:43.725554 [info] [raftstore]: store 8 rpc stopped
--- PASS: TestClusterStartWithMoreNodes (135.90s)
=== RUN   TestClusterStartConcurrent
2021/09/03 14:09:43.726559 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:43.726577 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:09:43.726626 [info] prophet: prophet logger set
2021/09/03 14:09:43.733463 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:09:43.746583 [info] [raftstore]: start scan gc snap files
2021/09/03 14:09:43.752249 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:09:43.764965 [info] [raftstore]: start scan gc snap files
2021/09/03 14:09:43.770527 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:09:43.783358 [info] [raftstore]: begin start raftstore
2021/09/03 14:09:43.783371 [info] [raftstore]: begin to start prophet
2021/09/03 14:09:43.783394 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:09:43.783+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:43.783+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:09:43.783+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:09:43.783+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:09:43.784+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3266ms"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:09:43.787+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:09:43.789+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:09:43.790+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:09:43.792+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:09:43.792+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:43.792+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:09:43.792+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:43.793+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:09:43.793+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:09:43.793+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:09:44.188+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:09:44.189+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:09:44.189+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:09:44.189+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:09:44.189599 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:09:44.189+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:09:44.189+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:09:44.191066 [info] prophet: start system time monitor 
2021/09/03 14:09:44.191552 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:09:44.191719 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:09:44.191733 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:09:44.191988 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:09:44.192483 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:09:44.192502 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:09:44.192934 [info] prophet: load 0 containers, cost 304.2µs
2021/09/03 14:09:44.193110 [info] prophet: load 0 resources, cost 160.4µs
2021/09/03 14:09:44.193806 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:44.193872 [info] prophet: client read loop started 
2021/09/03 14:09:44.193882 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:09:44.193887 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:09:44.193890 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:09:44.193913 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:44.193927 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:44.193930 [info] prophet: client started
2021/09/03 14:09:44.193935 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:09:44.193936 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:09:44.193956 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649384 deployPath:"not set" 
2021/09/03 14:09:44.193973 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:09:44.194213 [info] prophet: load 0 jobs
2021/09/03 14:09:44.194547 [info] [raftstore]: create local store with id 1
2021/09/03 14:09:44.194978 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:09:44.194983 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:09:44.194993 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:09:44.194998 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:09:44.195192 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:09:44.197634 [info] prophet: container 1 limit added
2021/09/03 14:09:44.197680 [info] [raftstore]: prophet started
2021/09/03 14:09:44.197697 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:09:44.197726 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:09:44.197736 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:09:44.197738 [info] [raftstore]: raft shards workers started
2021/09/03 14:09:44.197755 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:09:44.197791 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:44.197810 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:44.197812 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:09:44.197871 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:09:44.197877 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:09:44.197878 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:09:44.197+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:09:44.197914 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:09:44.197923 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:09:44.197924 [info] [raftstore]: shards started
2021/09/03 14:09:44.197925 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:09:44.197932 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:09:44.197939 [info] [raftstore]: router started
2021/09/03 14:09:44.197953 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:09:44.198034 [info] [raftstore]: router event loop task started
2021/09/03 14:09:44.197954 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:44.198115 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:44.198129 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:09:44.198905 [info] prophet: new watcher 127.0.0.1:44716 added
2021/09/03 14:09:44.198919 [info] [raftstore]: begin start raftstore
2021/09/03 14:09:44.198921 [info] [raftstore]: begin to start prophet
2021/09/03 14:09:44.198945 [info] [raftstore]: start init event
2021/09/03 14:09:44.198958 [info] [raftstore]: begin start raftstore
2021/09/03 14:09:44.198961 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:09:44.199+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 ignoring conf change {ConfChangeAddNode 5368378538143376547 [123 34 105 100 34 58 53 51 54 56 51 55 56 53 51 56 49 52 51 51 55 54 53 52 55 44 34 112 101 101 114 85 82 76 115 34 58 91 34 104 116 116 112 58 47 47 49 50 55 46 48 46 48 46 49 58 53 48 48 48 50 34 93 125] 9868648654741138207} at config voters=(10650127570946328820): possible unapplied conf change at index 15 (applied to 14)"}
{"level":"info","ts":"2021-09-03T14:09:44.199+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:09:44.199+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:44.199+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.199+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:44.200+0800","caller":"etcdserver/v3_server.go:807","msg":"first commit in current term: resending ReadIndex request"}
{"level":"warn","ts":"2021-09-03T14:09:44.200+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50001/version","remote-member-id":"9e7007ddcbce100f","error":"Get \"http://127.0.0.1:50001/version\": dial tcp 127.0.0.1:50001: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:09:44.200+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"9e7007ddcbce100f","error":"Get \"http://127.0.0.1:50001/version\": dial tcp 127.0.0.1:50001: connect: connection refused"}
2021/09/03 14:09:44.200975 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:11416633704572653583 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:11416633704572653583 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:09:44.201+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:44.201+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:09:44.201+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:09:44.201+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:09:44.202+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.3091ms"}
{"level":"warn","ts":"2021-09-03T14:09:44.701+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:09:45.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:09:45.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:09:45.188+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:09:45.198434 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:09:45.198451 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:09:45.198476 [info] prophet: metrics are reset
2021/09/03 14:09:45.198480 [info] prophet: background jobs has been stopped
2021/09/03 14:09:45.198481 [info] prophet: coordinator is stopping
2021/09/03 14:09:45.198487 [info] prophet: patrol resources has been stopped 
2021/09/03 14:09:45.198488 [info] prophet: drive push operator has been stopped 
2021/09/03 14:09:45.198492 [info] prophet: coordinator has been stopped
2021/09/03 14:09:45.198506 [info] prophet: watcher notifer exited
2021/09/03 14:09:45.198534 [info] prophet: watcher notifier stopped
2021/09/03 14:09:45.198548 [error] prophet: watcher read events failed with EOF
2021/09/03 14:09:45.198570 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:09:45.198549 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:45.198604 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:09:45.198626 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:09:45.198630 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"warn","ts":"2021-09-03T14:09:45.203+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:45.203+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:09:45.688+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:09:45.688+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:09:45.688+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:09:45.688+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 3"}
{"level":"warn","ts":"2021-09-03T14:09:45.703+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:09:46.203+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:46.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:09:46.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:09:46.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:09:46.588+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 4"}
{"level":"warn","ts":"2021-09-03T14:09:46.704+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:09:47.205+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:47.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:09:47.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:09:47.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:09:47.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 5"}
{"level":"warn","ts":"2021-09-03T14:09:47.706+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:47.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:09:47.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:09:47.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:09:47.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 6"}
{"level":"warn","ts":"2021-09-03T14:09:48.206+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:48.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:09:48.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:09:48.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:09:48.388+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 7"}
{"level":"warn","ts":"2021-09-03T14:09:48.707+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:48.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:09:48.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:09:48.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:09:48.988+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 8"}
{"level":"warn","ts":"2021-09-03T14:09:49.201+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"9e7007ddcbce100f","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:09:49.201+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"9e7007ddcbce100f","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:09:49.207+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:49.488+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:09:49.488+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:09:49.488+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:09:49.488+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 9"}
{"level":"warn","ts":"2021-09-03T14:09:49.708+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138205,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:09:50.200+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:09:50.200+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"6.0003292s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/resources/00000000000000000002\" ","response":"","error":"etcdserver: request timed out"}
{"level":"info","ts":"2021-09-03T14:09:50.200+0800","caller":"traceutil/trace.go:171","msg":"trace[2017240387] range","detail":"{range_begin:/prophet/resources/00000000000000000002; range_end:; }","duration":"6.0003723s","start":"2021-09-03T14:09:44.199+0800","end":"2021-09-03T14:09:50.200+0800","steps":["trace[2017240387] 'agreement among raft nodes before linearized reading'  (duration: 6.0003275s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:09:50.200+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:44.199+0800","time spent":"6.0004182s","remote":"127.0.0.1:45142","response type":"/etcdserverpb.KV/Range","request count":0,"request size":41,"response count":0,"response size":0,"request content":"key:\"/prophet/resources/00000000000000000002\" "}
{"level":"warn","ts":"2021-09-03T14:09:50.200+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: request timed out"}
{"level":"warn","ts":"2021-09-03T14:09:50.203+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:09:50.203+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:09:50.206+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"9e7007ddcbce100f","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:09:50.206+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:09:50.206+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:09:50.206+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 9e7007ddcbce100f [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:09:50.207+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:09:50.209+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:09:50.211+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.211+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:50.211+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.211+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"9e7007ddcbce100f","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"9e7007ddcbce100f","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.212+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"9e7007ddcbce100f","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"9e7007ddcbce100f","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.213+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.214+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 9e7007ddcbce100f [term: 2]"}
{"level":"info","ts":"2021-09-03T14:09:50.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:09:50.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:09:50.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:09:50.288+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 10"}
{"level":"info","ts":"2021-09-03T14:09:50.289+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"warn","ts":"2021-09-03T14:09:50.700+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654741138208,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:09:50.887+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:09:50.887+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.887+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.887+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 9e7007ddcbce100f at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:09:50.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.888+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 9e7007ddcbce100f at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:09:50.889+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.5906557s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","caller":"traceutil/trace.go:171","msg":"trace[618755429] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.5907017s","start":"2021-09-03T14:09:45.298+0800","end":"2021-09-03T14:09:50.889+0800","steps":["trace[618755429] 'agreement among raft nodes before linearized reading'  (duration: 5.5906549s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:09:50.889+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:45.298+0800","time spent":"5.5907371s","remote":"127.0.0.1:45142","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:09:50.889+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:09:50.889+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000908c40/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:09:50.890+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:09:50.890+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:50.890+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:09:50.890+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:09:50.890+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:50.891+0800","caller":"etcdserver/v3_server.go:807","msg":"first commit in current term: resending ReadIndex request"}
{"level":"info","ts":"2021-09-03T14:09:50.891+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"9e7007ddcbce100f","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/9e7007ddcbce100f/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:09:50.891648 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:09:50.891+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"warn","ts":"2021-09-03T14:09:50.891+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"663.8889ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/resources/00000000000000000002\" ","response":"range_response_count:1 size:71"}
{"level":"info","ts":"2021-09-03T14:09:50.891+0800","caller":"traceutil/trace.go:171","msg":"trace[1055187276] range","detail":"{range_begin:/prophet/resources/00000000000000000002; range_end:; response_count:1; response_revision:10; }","duration":"663.9167ms","start":"2021-09-03T14:09:50.227+0800","end":"2021-09-03T14:09:50.891+0800","steps":["trace[1055187276] 'agreement among raft nodes before linearized reading'  (duration: 663.8015ms)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:09:50.891+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:50.227+0800","time spent":"663.9403ms","remote":"127.0.0.1:45142","response type":"/etcdserverpb.KV/Range","request count":0,"request size":41,"response count":1,"response size":94,"request content":"key:\"/prophet/resources/00000000000000000002\" "}
2021/09/03 14:09:50.891834 [warning] prophet: read /prophet/resources/00000000000000000002 from etcd is too slow, cost 6.6919452s
{"level":"info","ts":"2021-09-03T14:09:50.892+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:09:50.892855 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:44714->127.0.0.1:30000: read: connection reset by peer
2021/09/03 14:09:50.893563 [info] prophet: start system time monitor 
2021/09/03 14:09:50.893944 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:09:50.893955 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:09:50.893959 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:09:50.893986 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:50.893992 [info] prophet: client read loop started 
2021/09/03 14:09:50.894049 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:50.894062 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:50.894066 [info] prophet: client started
2021/09/03 14:09:50.894069 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:50.894071 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:09:50.894092 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649390 deployPath:"not set" 
2021/09/03 14:09:50.894109 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:09:50.894243 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:50.894303 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:50.894315 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:50.913630 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.6149532s
2021/09/03 14:09:50.913644 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:09:50.913646 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:09:50.914953 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:09:50.914963 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:09:50.916102 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:09:50.917193 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:09:50.917209 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:09:50.918229 [info] prophet: load 1 containers, cost 811.1µs
2021/09/03 14:09:50.918574 [info] prophet: load 1 resources, cost 332.7µs
2021/09/03 14:09:50.919114 [info] prophet: watcher notifier stopped
2021/09/03 14:09:50.919130 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:09:50.919189 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:09:50.919413 [info] prophet: load 0 jobs
2021/09/03 14:09:50.995174 [info] [raftstore]: create local store with id 5
2021/09/03 14:09:50.995786 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:09:50.998503 [info] prophet: container 5 limit added
2021/09/03 14:09:50.998558 [info] [raftstore]: prophet started
2021/09/03 14:09:50.998567 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:09:50.998612 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:09:50.998636 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:09:50.998639 [info] [raftstore]: raft shards workers started
2021/09/03 14:09:50.998651 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:09:50.998653 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:09:50.998654 [info] [raftstore]: shards started
2021/09/03 14:09:50.998657 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:09:50.998663 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:09:50.998679 [info] [raftstore]: router started
2021/09/03 14:09:50.998691 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:50.998691 [info] [raftstore]: router event loop task started
2021/09/03 14:09:50.998757 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:50.998776 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:09:50.998849 [info] prophet: new watcher 127.0.0.1:44774 added
2021/09/03 14:09:50.998945 [info] [raftstore]: start init event
2021/09/03 14:09:51.012489 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:09:51.012504 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:09:51.012547 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:09:51.012553 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:51.012555 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:09:51.013055 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:09:51.013071 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:09:51.014132 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:09:51.016313 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:09:51.016333 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:09:51.017491 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:51.017578 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:51.017588 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:09:51.017648 [info] prophet: new watcher 127.0.0.1:44776 added
2021/09/03 14:09:51.017734 [info] [raftstore]: start init event
2021/09/03 14:09:51.093208 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:51.093319 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:51.093337 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:51.093419 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:09:54.017668 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:09:54.017683 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:09:54.017686 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:09:54.017688 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:54.031575 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
{"level":"warn","ts":"2021-09-03T14:09:54.199+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0088d8700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:09:54.199793 [error] prophet: add member to embed etcd failed with context deadline exceeded, retry later
{"level":"warn","ts":"2021-09-03T14:09:54.199+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:44.199+0800","time spent":"10.0001967s","remote":"127.0.0.1:45152","response type":"/etcdserverpb.Cluster/MemberAdd","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:09:54.699+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:20c98e8c6fffe4e2 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:09:54.700+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0088d8700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:09:54.700161 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:09:55.169293 [error] prophet: container 1 heartbeat failed with rpc timeout
2021/09/03 14:09:55.169309 [error] [raftstore]: send store heartbeat failed with rpc timeout
{"level":"warn","ts":"2021-09-03T14:09:55.200+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:acedfd6cb7a808ac RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:09:55.201+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0088d8700/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:09:55.201080 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:09:55.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.703+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
2021/09/03 14:09:55.704477 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:11  Member:ID:12460894387383568556 peerURLs:"http://127.0.0.1:50002"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:11416633704572653583 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001"  ID:12460894387383568556 peerURLs:"http://127.0.0.1:50002" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:09:55.704+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:09:55.706+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.549ms"}
{"level":"info","ts":"2021-09-03T14:09:55.709+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:09:55.709+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:09:55.709+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:09:55.709+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft acedfd6cb7a808ac [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:09:55.711+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:09:55.712+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.715+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"acedfd6cb7a808ac","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"acedfd6cb7a808ac","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.716+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"acedfd6cb7a808ac","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"acedfd6cb7a808ac","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"acedfd6cb7a808ac","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"acedfd6cb7a808ac","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:09:55.717+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac elected leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:09:55.719+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"acedfd6cb7a808ac","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/acedfd6cb7a808ac/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:09:55.720000 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:09:55.720+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:09:55.720+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:09:55.721441 [info] prophet: start system time monitor 
2021/09/03 14:09:55.721917 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:09:55.721933 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:09:55.721936 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:09:55.721958 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:55.721982 [info] prophet: client read loop started 
2021/09/03 14:09:55.721986 [info] prophet: client started
2021/09/03 14:09:55.722010 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:55.722012 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:09:55.722025 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:55.722045 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:55.722036 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649395 deployPath:"not set" 
2021/09/03 14:09:55.722065 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:09:55.722206 [info] [raftstore]: create local store with id 6
2021/09/03 14:09:55.722648 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:09:55.725505 [info] prophet: container 6 limit added
2021/09/03 14:09:55.725598 [info] prophet: container 6 heartbeat stream binded
2021/09/03 14:09:55.725611 [info] [raftstore]: prophet started
2021/09/03 14:09:55.725655 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:09:55.725675 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:09:55.725678 [info] [raftstore]: raft shards workers started
2021/09/03 14:09:55.725692 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:09:55.725694 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:09:55.725695 [info] [raftstore]: shards started
2021/09/03 14:09:55.725697 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:09:55.725706 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:09:55.725725 [info] [raftstore]: router started
2021/09/03 14:09:55.725741 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:09:55.725751 [info] [raftstore]: router event loop task started
2021/09/03 14:09:55.725832 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:09:55.725848 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:09:55.725910 [info] prophet: new watcher 127.0.0.1:44834 added
2021/09/03 14:09:55.725988 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:09:55.767+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"acedfd6cb7a808ac","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"9e7007ddcbce100f","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:55.805+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:55.806+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"9e7007ddcbce100f","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:09:55.806+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
2021/09/03 14:09:55.813846 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:09:56.919956 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:09:56.919972 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:09:56.921813 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:09:56.921822 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:09:57.022296 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [6]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:09:57.0222631 +0800 CST m=+240.261201301, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 7 on container 6, promote learner peer 7 on container 6 to voter]), 
2021/09/03 14:09:57.022317 [info] prophet: resource 2 send schedule command, step add learner peer 7 on container 6, source create
2021/09/03 14:09:57.022454 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.022539 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.023938 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:7 containerID:6 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.023957 [info] [raftstore]: shard-2 add learner peer {ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:09:57.025+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(7)"}
2021/09/03 14:09:57.025161 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:7}] Context:[10 32 10 16 95 146 64 114 203 221 71 123 139 167 4 144 142 26 17 11 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 7 16 6 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.025177 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.025349 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:09:57.025740 [info] [transport]: connected to store 6
2021/09/03 14:09:57.025818 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:09:57.025841 [info] [raftstore]: shard 2 peer 7 begin to create at store 6, peers: [], because receive raft message
2021/09/03 14:09:57.025869 [info] [raftstore]: shard 2 peer 7 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.025887 [info] [raftstore]: shard 2 peer 7 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.025889 [info] [raftstore]: shard 2 peer 7 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:09:57.025+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:09:57.025+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:09:57.025+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 7 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:09:57.025950 [info] [raftstore]: shard 2 peer 7 delegate register completed
2021/09/03 14:09:57.025965 [info] [raftstore]: shard 2 peer 7 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:09:57.026+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.026+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 6"}
2021/09/03 14:09:57.026027 [info] [raftstore]: shard 2 peer 7 ********become follower now********
2021/09/03 14:09:57.026621 [info] prophet: resource 2 send schedule command, step promote learner peer 7 on container 6 to voter, source heartbeat
2021/09/03 14:09:57.026695 [info] [raftstore]: shard-2 AddNode peer {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.026731 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.026771 [info] [transport]: connected to store 1
2021/09/03 14:09:57.028267 [info] [raftstore]: shard 2 do apply change peer peer:<id:7 containerID:6 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.028288 [info] [raftstore]: shard-2 add peer {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.028506 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.028802 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
{"level":"info","ts":"2021-09-03T14:09:57.029+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 7)"}
2021/09/03 14:09:57.029741 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:7}] Context:[10 32 10 16 247 198 3 86 53 164 73 126 134 181 177 27 182 111 154 78 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 7 16 6]} with changes [{ChangeType:AddNode Peer:{ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.029750 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.029824 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:09:57.029873 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:09:57.030006 [info] [transport]: connected to store 6
{"level":"info","ts":"2021-09-03T14:09:57.030+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.030+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(3 7)"}
{"level":"info","ts":"2021-09-03T14:09:57.030+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.030+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:09:57.030183 [info] [raftstore]: shard 2 peer 7 receiving snapshot, skip further handling
2021/09/03 14:09:57.030329 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:7 containerID:6 > > from:<id:3 containerID:1 > to:<id:7 containerID:6 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:09:57.030366 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:09:57.030380 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:09:57.031128 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [6]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:09:57.0222631 +0800 CST m=+240.261201301, startAt:2021-09-03 14:09:57.0223117 +0800 CST m=+240.261249901, currentStep:2, steps:[add learner peer 7 on container 6, promote learner peer 7 on container 6 to voter]) finished) finish, takes 8.8007ms, 
2021/09/03 14:09:57.069628 [info] [raftstore]: shard 2 peer 7 received a snapshot at 8
2021/09/03 14:09:57.069643 [info] [raftstore]: shard 2 peer 7 begin to apply snapshot
2021/09/03 14:09:57.069653 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:09:57.069662 [info] [raftstore]: shard 2 peer 7 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.071047 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:09:57.071193 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.071216 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:7 ContainerID:6 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.071235 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_8.gz, header is shard:<id:2 epoch:<confVer:2 version:1 > peers:<id:7 containerID:6 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:09:57.072502 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
2021/09/03 14:09:57.122851 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:09:57.1228227 +0800 CST m=+240.361760901, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 5, promote learner peer 8 on container 5 to voter]), 
2021/09/03 14:09:57.122873 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 5, source create
2021/09/03 14:09:57.122960 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.123015 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.126002 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:5 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.126022 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.126023 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:5 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.126054 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:09:57.127+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(3 7) learners=(8)"}
2021/09/03 14:09:57.127486 [info] [raftstore]: shard 2 peer 7 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:09:57.127+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 7) learners=(8)"}
2021/09/03 14:09:57.127609 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 244 198 189 55 9 90 74 145 131 180 109 141 83 166 131 251 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.127629 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.127775 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:09:57.128200 [info] [transport]: connected to store 5
2021/09/03 14:09:57.128248 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:09:57.128255 [info] [raftstore]: shard 2 peer 8 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:09:57.128280 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.128286 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.128287 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:09:57.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:09:57.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:09:57.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:09:57.128344 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:09:57.128348 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:09:57.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.128+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:09:57.128394 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:09:57.128913 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 5 to voter, source heartbeat
2021/09/03 14:09:57.128993 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.129034 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.129108 [info] [transport]: connected to store 1
2021/09/03 14:09:57.131426 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:5 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.131443 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:5 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.131450 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.131458 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.131450 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.131758 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:4 version:1 > term=<6> index=<9> 
{"level":"info","ts":"2021-09-03T14:09:57.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(3 7 8)"}
2021/09/03 14:09:57.132683 [info] [raftstore]: shard 2 peer 7 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:09:57.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 7 8)"}
2021/09/03 14:09:57.132701 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8}] Context:[10 32 10 16 204 80 233 58 227 50 67 186 139 187 246 246 69 123 209 40 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 5]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.132722 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:09:57.132827 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:09:57.132863 [info] [raftstore]: shard 2 snapshot epoch 4/5 stale, generate again.
2021/09/03 14:09:57.132868 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.133107 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<10> 
2021/09/03 14:09:57.133556 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:09:57.133651 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:44778->127.0.0.1:30000: use of closed network connection
2021/09/03 14:09:57.133664 [error] prophet: client read loop stopped
2021/09/03 14:09:57.134712 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:09:57.1228227 +0800 CST m=+240.361760901, startAt:2021-09-03 14:09:57.1228669 +0800 CST m=+240.361805101, currentStep:2, steps:[add learner peer 8 on container 5, promote learner peer 8 on container 5 to voter]) finished) finish, takes 11.8328ms, 
2021/09/03 14:09:57.135034 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:09:57.135076 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:09:57.135093 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:09:57.135096 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:09:57.135098 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:09:57.135101 [info] prophet: drive push operator has been stopped 
{"level":"info","ts":"2021-09-03T14:09:57.135+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:09:57.135102 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:09:57.135099 [info] prophet: coordinator is stopping
2021/09/03 14:09:57.135099 [info] prophet: watcher notifer exited
2021/09/03 14:09:57.135085 [info] prophet: patrol resources has been stopped 
2021/09/03 14:09:57.135106 [info] prophet: metrics are reset
2021/09/03 14:09:57.135171 [info] prophet: coordinator has been stopped
2021/09/03 14:09:57.135175 [info] prophet: background jobs has been stopped
2021/09/03 14:09:57.135113 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:09:57.135181 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:57.135184 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:09:57.135167 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:09:57.135225 [error] prophet: watcher read events failed with EOF
2021/09/03 14:09:57.135228 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:09:57.135234 [error] prophet: watcher read events failed with EOF
2021/09/03 14:09:57.135236 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:09:57.135244 [error] prophet: watcher read events failed with EOF
2021/09/03 14:09:57.135245 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:09:57.135246 [info] prophet: watcher notifier stopped
2021/09/03 14:09:57.135246 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:09:57.135252 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:57.135287 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:09:57.135280 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:57.135612 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:09:57.135626 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:09:57.135671 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:09:57.135682 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:09:57.136+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:57.136+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 11] starts to transfer leadership to 9e7007ddcbce100f"}
2021/09/03 14:09:57.137934 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:09:57.137+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to 9e7007ddcbce100f after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:09:57.137+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term 11] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f received MsgVoteResp from 9e7007ddcbce100f at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 11, index: 43] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 11, index: 43] sent MsgVote request to acedfd6cb7a808ac at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f lost leader 93ccda9956d988f4 at term 12"}
2021/09/03 14:09:57.138052 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 11] received a MsgVote message with higher term from 9e7007ddcbce100f [term: 12]"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 11, index: 43, vote: 0] cast MsgVote for 9e7007ddcbce100f [logterm: 11, index: 43] at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [term: 11] received a MsgVote message with higher term from 9e7007ddcbce100f [term: 12]"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 11, index: 43, vote: 0] cast MsgVote for 9e7007ddcbce100f [logterm: 11, index: 43] at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.138+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f received MsgVoteResp from 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader 9e7007ddcbce100f at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 9e7007ddcbce100f at term 12"}
{"level":"info","ts":"2021-09-03T14:09:57.139+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac elected leader 9e7007ddcbce100f at term 12"}
2021/09/03 14:09:57.140989 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:09:57.141007 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:09:57.142919 [info] prophet: load 3 containers, cost 1.7461ms
2021/09/03 14:09:57.143272 [info] prophet: load 1 resources, cost 341.6µs
2021/09/03 14:09:57.143906 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:09:57.143914 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:09:57.144180 [info] prophet: load 0 jobs
2021/09/03 14:09:57.198575 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:57.198609 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.236387 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"9e7007ddcbce100f","took":"101.0924ms"}
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"9e7007ddcbce100f","error":"failed to read 9e7007ddcbce100f on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:09:57.237+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"acedfd6cb7a808ac","error":"failed to read acedfd6cb7a808ac on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"9e7007ddcbce100f","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node acedfd6cb7a808ac)"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 9e7007ddcbce100f)"}
{"level":"warn","ts":"2021-09-03T14:09:57.238+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"9e7007ddcbce100f","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:09:57.239+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:09:57.269393 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:09:57.269533 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:09:57.269+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.269+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 7 8)"}
{"level":"info","ts":"2021-09-03T14:09:57.269+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:09:57.269+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/09/03 14:09:57.269751 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:09:57.270856 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:7 containerID:6 > peers:<id:8 containerID:5 > > from:<id:3 containerID:1 > to:<id:8 containerID:5 role:Learner > term:6 index:10 >,size=<124>
2021/09/03 14:09:57.270907 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:09:57.270915 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:09:57.298031 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.398571 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.469617 [info] [raftstore]: shard 2 peer 8 received a snapshot at 10
2021/09/03 14:09:57.469634 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:09:57.469650 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:09:57.469662 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:09:57.471339 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:09:57.471523 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.471551 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[] End:[] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[] End:[] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:09:57.471598 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_10.gz, header is shard:<id:2 epoch:<confVer:4 version:1 > peers:<id:8 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/09/03 14:09:57.472948 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10}
2021/09/03 14:09:57.498507 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.598319 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:09:57.607+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:09:57.698069 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.798286 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.898983 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.998834 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:57.999251 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:09:57.999381 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:09:57.999412 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:09:57.999452 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:09:58.098521 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:09:58.135369 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:09:58.135516 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:09:58.135534 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:09:58.135620 [info] prophet: new watcher 127.0.0.1:49040 added
2021/09/03 14:09:58.135778 [info] [raftstore]: start init event
2021/09/03 14:09:58.199035 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:58.199072 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:09:58.240+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:09:58.240+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:09:58.240561 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:09:58.240584 [info] [transport]: transfer stopped
2021/09/03 14:09:58.240586 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:09:58.240587 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:09:58.240592 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:09:58.240595 [info] [raftstore]: router event loop task stopped
2021/09/03 14:09:58.240597 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:09:58.240602 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240596 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240606 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240599 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240608 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240611 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240611 [info] [transport]: send raft worker stopped
2021/09/03 14:09:58.240612 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240604 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:09:58.240605 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:58.240625 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:09:58.240659 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:09:58.240707 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:09:58.240719 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:09:58.240799 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:49026->127.0.0.1:30001: use of closed network connection
2021/09/03 14:09:58.240810 [error] prophet: client read loop stopped
2021/09/03 14:09:58.241822 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:09:58.241852 [info] prophet: coordinator stops running 
2021/09/03 14:09:58.241856 [info] prophet: coordinator is stopping
2021/09/03 14:09:58.241858 [info] prophet: coordinator has been stopped
2021/09/03 14:09:58.241856 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:09:58.241864 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:09:58.241869 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:09:58.241869 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/09/03 14:09:58.241876 [info] prophet: watcher notifer exited
{"level":"info","ts":"2021-09-03T14:09:58.241+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:09:58.241879 [info] prophet: metrics are reset
2021/09/03 14:09:58.241884 [info] prophet: background jobs has been stopped
2021/09/03 14:09:58.241931 [info] prophet: watcher notifier stopped
2021/09/03 14:09:58.241943 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:09:58.241938 [error] prophet: watcher read events failed with EOF
2021/09/03 14:09:58.241954 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"9e7007ddcbce100f","current-leader-member-id":"9e7007ddcbce100f","transferee-member-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term 12] starts to transfer leadership to acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f sends MsgTimeoutNow to acedfd6cb7a808ac immediately as acedfd6cb7a808ac already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [term 12] received MsgTimeoutNow from 9e7007ddcbce100f and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from acedfd6cb7a808ac at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 12, index: 47] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 12, index: 47] sent MsgVote request to 9e7007ddcbce100f at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac lost leader 9e7007ddcbce100f at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term: 12] received a MsgVote message with higher term from acedfd6cb7a808ac [term: 13]"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 12, index: 47, vote: 0] cast MsgVote for acedfd6cb7a808ac [logterm: 12, index: 47] at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.243+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f lost leader 9e7007ddcbce100f at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.245+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from 9e7007ddcbce100f at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.245+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:09:58.245+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became leader at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.245+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac elected leader acedfd6cb7a808ac at term 13"}
{"level":"info","ts":"2021-09-03T14:09:58.245+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader acedfd6cb7a808ac at term 13"}
{"level":"warn","ts":"2021-09-03T14:09:58.246+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:09:58.246+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:09:58.342346 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:09:58.343+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"9e7007ddcbce100f","old-leader-member-id":"9e7007ddcbce100f","new-leader-member-id":"acedfd6cb7a808ac","took":"100.3168ms"}
{"level":"info","ts":"2021-09-03T14:09:58.343+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.343+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.344+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"acedfd6cb7a808ac","error":"failed to read acedfd6cb7a808ac on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"9e7007ddcbce100f","remote-peer-id-stream-handler":"9e7007ddcbce100f","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"9e7007ddcbce100f","remote-peer-id-stream-handler":"9e7007ddcbce100f","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:09:58.345+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"9e7007ddcbce100f","error":"failed to dial 9e7007ddcbce100f on stream MsgApp v2 (peer 9e7007ddcbce100f failed to find local node acedfd6cb7a808ac)"}
{"level":"info","ts":"2021-09-03T14:09:58.346+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
{"level":"warn","ts":"2021-09-03T14:09:58.411+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:09:58.710+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
2021/09/03 14:09:58.999465 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:09:59.209+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"acedfd6cb7a808ac stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:09:59.209+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:09:59.209+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac lost leader acedfd6cb7a808ac at term 13"}
{"level":"info","ts":"2021-09-03T14:09:59.347+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:09:59.347+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:09:59.347336 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:09:59.347364 [info] [transport]: transfer stopped
2021/09/03 14:09:59.347366 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:09:59.347368 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:09:59.347372 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:09:59.347375 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347378 [info] [raftstore]: router event loop task stopped
2021/09/03 14:09:59.347382 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:09:59.347386 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347382 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347389 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347389 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347383 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347390 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:09:59.347393 [info] [transport]: send raft worker stopped
2021/09/03 14:09:59.347393 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347391 [info] [transport]: send snapshot worker stopped
2021/09/03 14:09:59.347427 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:09:59.347461 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:09:59.347520 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:09:59.347534 [info] [raftstore]: store 6 begin to stop
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10] sent MsgPreVote request to 8 at term 6"}
2021/09/03 14:09:59.519590 [info] [raftstore]: shard 2 peer 7 ********become follower now********
{"level":"info","ts":"2021-09-03T14:09:59.519+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac no leader at term 13; dropping index reading msg"}
2021/09/03 14:09:59.532299 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:09:59.532329 [error] prophet: client read loop stopped
2021/09/03 14:09:59.532342 [error] prophet: container 6 heartbeat failed with client is closed
2021/09/03 14:09:59.532346 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:59.532516 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:09:59.539913 [error] prophet: reset watcher conn failed with client is closed, retry later
2021/09/03 14:09:59.726071 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:00.019+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":625010419566247182,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:00.019+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac no leader at term 13; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:10:00.109+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:10:00.109+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:10:00.109+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from acedfd6cb7a808ac at term 14"}
{"level":"info","ts":"2021-09-03T14:10:00.109+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 13, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:00.109+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 13, index: 48] sent MsgVote request to 9e7007ddcbce100f at term 14"}
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b5c00/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:59.347+0800","time spent":"999.9409ms","remote":"127.0.0.1:56110","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
2021/09/03 14:10:00.347742 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:10:00.347+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b5c00/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:56110->127.0.0.1:40002: use of closed network connection"}
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:57.138+0800","time spent":"3.2098397s","remote":"127.0.0.1:56110","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
2021/09/03 14:10:00.347871 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<3.2099102s> errors rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:56110->127.0.0.1:40002: use of closed network connection
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b5c00/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b5c00/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:56110->127.0.0.1:40002: use of closed network connection"}
2021/09/03 14:10:00.347924 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:10:00.347929 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:56110->127.0.0.1:40002: use of closed network connection
2021/09/03 14:10:00.347935 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
{"level":"warn","ts":"2021-09-03T14:10:00.347+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"828.0555ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/containers/00000000000000000005\" ","response":"","error":"context canceled"}
2021/09/03 14:10:00.347987 [error] [transport]: shard 2 send msg shardID:2 from:<id:7 containerID:6 role:Learner > to:<id:8 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:8 from:7 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 7 to 8 failed with not connected
{"level":"info","ts":"2021-09-03T14:10:00.347+0800","caller":"traceutil/trace.go:171","msg":"trace[862685584] range","detail":"{range_begin:/prophet/containers/00000000000000000005; range_end:; }","duration":"828.1513ms","start":"2021-09-03T14:09:59.519+0800","end":"2021-09-03T14:10:00.347+0800","steps":["trace[862685584] 'agreement among raft nodes before linearized reading'  (duration: 828.0536ms)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:10:00.348+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:09:59.519+0800","time spent":"828.1988ms","remote":"127.0.0.1:56110","response type":"/etcdserverpb.KV/Range","request count":0,"request size":42,"response count":0,"response size":0,"request content":"key:\"/prophet/containers/00000000000000000005\" "}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"acedfd6cb7a808ac","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:00.349+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.350+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:00.351+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
2021/09/03 14:10:00.726411 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:01.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 received MsgPreVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10] sent MsgPreVote request to 8 at term 6"}
{"level":"warn","ts":"2021-09-03T14:10:01.019+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0006b5c00/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:01.019703 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:10:01.019752 [error] [transport]: shard 2 send msg shardID:2 from:<id:7 containerID:6 role:Learner > to:<id:8 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:8 from:7 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 7 to 8 failed with not connected
{"level":"info","ts":"2021-09-03T14:10:01.351+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:01.351+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:10:01.352006 [info] [raftstore]: store 6 pd stopped
2021/09/03 14:10:01.352029 [info] [transport]: transfer stopped
2021/09/03 14:10:01.352038 [info] [raftstore]: store 6 transport stopped
2021/09/03 14:10:01.352041 [info] [raftstore]: store 6 all shards stopped
2021/09/03 14:10:01.352046 [info] [raftstore]: store 6 all snapshot manager stopped
2021/09/03 14:10:01.352050 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:01.352059 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:01.352062 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352062 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352065 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352066 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352070 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352062 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352072 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:01.352072 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352073 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:01.352066 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:01.352098 [info] [raftstore]: store 6 task runner stopped
2021/09/03 14:10:01.352071 [info] [transport]: send raft worker stopped
2021/09/03 14:10:01.352119 [info] [raftstore]: store 6 rpc stopped
2021/09/03 14:10:01.359027 [info] prophet: prophet logger set
2021/09/03 14:10:01.364258 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:01.377718 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:01.383705 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:01.397341 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:01.402715 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:01.416705 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:01.416719 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:01.416753 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:01.416764 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:01.416768 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:01.416802 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:01.416821 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":true,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"","initial-cluster-state":"existing","initial-cluster-token":"","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.416+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":true,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"","initial-cluster-state":"new","initial-cluster-token":"","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":true,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"","initial-cluster-state":"existing","initial-cluster-token":"","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"113.1µs"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"55.4µs"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"86.4µs"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/server.go:526","msg":"No snapshot found. Recovering WAL from scratch!"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/server.go:526","msg":"No snapshot found. Recovering WAL from scratch!"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/server.go:526","msg":"No snapshot found. Recovering WAL from scratch!"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"etcdserver/raft.go:483","msg":"restarting local member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","commit-index":48}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft acedfd6cb7a808ac [peers: [], term: 14, commit: 48, applied: 0, lastindex: 48, lastterm: 13]"}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","recovered-remote-peer-id":"93ccda9956d988f4","recovered-remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","recovered-remote-peer-id":"9e7007ddcbce100f","recovered-remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","recovered-remote-peer-id":"acedfd6cb7a808ac","recovered-remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.417+0800","caller":"membership/cluster.go:285","msg":"set cluster version from store","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"etcdserver/raft.go:483","msg":"restarting local member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","commit-index":48}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"etcdserver/raft.go:483","msg":"restarting local member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","commit-index":45}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 9e7007ddcbce100f [peers: [], term: 13, commit: 48, applied: 0, lastindex: 48, lastterm: 13]"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 12, commit: 45, applied: 0, lastindex: 45, lastterm: 12]"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","recovered-remote-peer-id":"93ccda9956d988f4","recovered-remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"warn","ts":"2021-09-03T14:10:01.418+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","recovered-remote-peer-id":"9e7007ddcbce100f","recovered-remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","recovered-remote-peer-id":"acedfd6cb7a808ac","recovered-remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:285","msg":"set cluster version from store","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","recovered-remote-peer-id":"acedfd6cb7a808ac","recovered-remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","recovered-remote-peer-id":"93ccda9956d988f4","recovered-remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","recovered-remote-peer-id":"9e7007ddcbce100f","recovered-remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.418+0800","caller":"membership/cluster.go:285","msg":"set cluster version from store","cluster-version":"3.5"}
{"level":"warn","ts":"2021-09-03T14:10:01.419+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"warn","ts":"2021-09-03T14:10:01.419+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:01.419+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":29}
{"level":"info","ts":"2021-09-03T14:10:01.420+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":29}
{"level":"info","ts":"2021-09-03T14:10:01.421+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":27}
{"level":"info","ts":"2021-09-03T14:10:01.421+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.421+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.422+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.422+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.422+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.423+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.424+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.424+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.424+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.424+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"etcdserver/server.go:834","msg":"starting etcd server","local-member-id":"acedfd6cb7a808ac","local-server-version":"3.5.0","cluster-id":"6a4ade671189dc2f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"membership/cluster.go:523","msg":"updated cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","from":"3.5","to":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"acedfd6cb7a808ac","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.425+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"etcdserver/server.go:834","msg":"starting etcd server","local-member-id":"9e7007ddcbce100f","local-server-version":"3.5.0","cluster-id":"6a4ade671189dc2f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"etcdserver/server.go:834","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-id":"6a4ade671189dc2f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"acedfd6cb7a808ac","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:523","msg":"updated cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","from":"3.5","to":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"9e7007ddcbce100f","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"9e7007ddcbce100f","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:523","msg":"updated cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","from":"3.5","to":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 11416633704572653583)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"acedfd6cb7a808ac","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"acedfd6cb7a808ac","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"acedfd6cb7a808ac","to":"9e7007ddcbce100f","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"9e7007ddcbce100f","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"9e7007ddcbce100f","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"9e7007ddcbce100f","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"9e7007ddcbce100f","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"acedfd6cb7a808ac","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 11416633704572653583 12460894387383568556)"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.426+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"acedfd6cb7a808ac","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"9e7007ddcbce100f","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"acedfd6cb7a808ac","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.427+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:01.476+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"acedfd6cb7a808ac","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:10:01.476+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:10:01.476+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"9e7007ddcbce100f","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:10:01.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:10:01.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f received MsgVoteResp from 9e7007ddcbce100f at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 13, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 13, index: 48] sent MsgVote request to acedfd6cb7a808ac at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 12] received a MsgVote message with higher term from 9e7007ddcbce100f [term: 14]"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 12, index: 45, vote: 0] cast MsgVote for 9e7007ddcbce100f [logterm: 13, index: 48] at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 13, index: 48, vote: acedfd6cb7a808ac] rejected MsgVote from 9e7007ddcbce100f [logterm: 13, index: 48] at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f received MsgVoteResp rejection from acedfd6cb7a808ac at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.820+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f has received 1 MsgVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f received MsgVoteResp from 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f has received 2 MsgVoteResp votes and 1 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became leader at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader 9e7007ddcbce100f at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 9e7007ddcbce100f at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.821+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac elected leader 9e7007ddcbce100f at term 14"}
{"level":"info","ts":"2021-09-03T14:10:01.823+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"9e7007ddcbce100f","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/9e7007ddcbce100f/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:01.823328 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:10:01.823+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:01.823+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
{"level":"info","ts":"2021-09-03T14:10:01.823+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:01.823+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:10:01.823802 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:01.824+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:01.824369 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:10:01.824+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"acedfd6cb7a808ac","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/acedfd6cb7a808ac/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:01.824+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:01.824+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:10:01.824730 [info] prophet: start system time monitor 
2021/09/03 14:10:01.825362 [info] prophet: [prophet-leader/node-1]/loop: current leader is []
2021/09/03 14:10:01.825546 [info] prophet: start system time monitor 
2021/09/03 14:10:01.825646 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:10:01.825662 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:10:01.826778 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:10:01.827170 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:01.827606 [info] prophet: start system time monitor 
2021/09/03 14:10:01.828263 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:10:01.828283 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:10:01.828493 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:01.828519 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:01.828505 [info] prophet: [prophet-leader/node-2]/loop: current leader is [node-1127.0.0.1:30001]
2021/09/03 14:10:01.828526 [info] prophet: [prophet-leader/node-2]/loop: start watch leader node-1127.0.0.1:30001
2021/09/03 14:10:01.828529 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:01.828569 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:01.828615 [info] prophet: client started
2021/09/03 14:10:01.828635 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:01.828637 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:01.828571 [info] prophet: client read loop started 
2021/09/03 14:10:01.828649 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:01.828641 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:01.828681 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649401 deployPath:"not set" 
2021/09/03 14:10:01.828802 [info] [raftstore]: load local store 6
2021/09/03 14:10:01.828835 [info] [raftstore]: prophet started
2021/09/03 14:10:01.828892 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:10:01.828916 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:01.828920 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:01.828982 [info] [raftstore]: shard 2 peer 7 begin to create at store 6, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:01.829047 [info] [raftstore]: shard 2 peer 7 init with raft local state {HardState:{Term:6 Vote:0 Commit:10} LastIndex:10 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:01.829065 [info] [raftstore]: shard 2 peer 7 init raft apply state, state=<{AppliedIndex:10 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:01.829068 [info] [raftstore]: shard 2 peer 7 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:10:01.829+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 switched to configuration voters=(3 7 8)"}
{"level":"info","ts":"2021-09-03T14:10:01.829+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.829+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 7 [peers: [3,7,8], term: 6, commit: 10, applied: 10, lastindex: 10, lastterm: 6]"}
2021/09/03 14:10:01.829131 [info] [raftstore]: shard 2 peer 7 delegate register completed
2021/09/03 14:10:01.829140 [info] [raftstore]: shard 2 peer 7 added, epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:01.829161 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:01.829162 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:01.829163 [info] [raftstore]: shards started
2021/09/03 14:10:01.829165 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:01.829172 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:10:01.829193 [info] [raftstore]: router started
2021/09/03 14:10:01.829223 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:01.829236 [info] [raftstore]: router event loop task started
2021/09/03 14:10:01.829289 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:01.829299 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:10:01.829555 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:01.831641 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:01.831662 [error] prophet: [prophet-leader/node-0]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:10:01.831994 [info] prophet: load 3 containers, cost 3.6522ms
2021/09/03 14:10:01.832397 [info] prophet: load 1 resources, cost 389.3µs
2021/09/03 14:10:01.833052 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:01.833067 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:01.833070 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:01.833077 [info] prophet: client read loop started 
2021/09/03 14:10:01.833060 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:01.833061 [info] prophet: client started
2021/09/03 14:10:01.833136 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:01.833140 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:01.833151 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:01.833153 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:01.833169 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649401 deployPath:"not set" 
2021/09/03 14:10:01.833243 [info] [raftstore]: load local store 5
2021/09/03 14:10:01.833257 [info] [raftstore]: prophet started
2021/09/03 14:10:01.833296 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:10:01.833314 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:01.833316 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:01.833335 [info] [raftstore]: shard 2 peer 8 begin to create at store 5, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:01.833364 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:6 Vote:0 Commit:10} LastIndex:10 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:01.833370 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:01.833371 [info] [raftstore]: shard 2 peer 8 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:10:01.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 7 8)"}
{"level":"info","ts":"2021-09-03T14:10:01.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:01.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [3,7,8], term: 6, commit: 10, applied: 10, lastindex: 10, lastterm: 6]"}
2021/09/03 14:10:01.833434 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:10:01.833440 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:01.833459 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:01.833460 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:01.833461 [info] [raftstore]: shards started
2021/09/03 14:10:01.833463 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:01.833469 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:10:01.833487 [info] [raftstore]: router started
2021/09/03 14:10:01.833543 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:01.833619 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:01.833631 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:10:01.833642 [info] [raftstore]: router event loop task started
2021/09/03 14:10:01.834003 [info] prophet: load 0 jobs
2021/09/03 14:10:01.834560 [info] prophet: new watcher 127.0.0.1:49336 added
2021/09/03 14:10:01.835758 [info] [raftstore]: start init event
2021/09/03 14:10:01.922125 [info] prophet: [prophet-leader/node-2]/watch: leader updated to node-1127.0.0.1:30001
2021/09/03 14:10:02.833753 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:02.833944 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:02.833967 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:10:02.834085 [info] prophet: new watcher 127.0.0.1:49338 added
2021/09/03 14:10:02.834193 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:10:03.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:03.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:03.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:03.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:03.019+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 7 at term 6"}
2021/09/03 14:10:03.019286 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:10:03.019851 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.019902 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgPreVoteMsgPreVote to:3 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:03.020326 [info] [transport]: connected to store 6
{"level":"info","ts":"2021-09-03T14:10:03.020+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10, vote: 0] cast MsgPreVote for 8 [logterm: 6, index: 10] at term 6"}
2021/09/03 14:10:03.021090 [info] [transport]: connected to store 5
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 7 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgVote request to 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.021+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgVote request to 7 at term 7"}
2021/09/03 14:10:03.021160 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:10:03.022593 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.022644 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgVoteMsgVote to:3 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
{"level":"info","ts":"2021-09-03T14:10:03.022+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [term: 6] received a MsgVote message with higher term from 8 [term: 7]"}
{"level":"info","ts":"2021-09-03T14:10:03.022+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 became follower at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.022+0800","caller":"etcdserver/zap_raft.go:77","msg":"7 [logterm: 6, index: 10, vote: 0] cast MsgVote for 8 [logterm: 6, index: 10] at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.024+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 7 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:03.024+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:03.024+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 7"}
2021/09/03 14:10:03.024058 [info] [raftstore]: shard 2 peer 8 ********become leader now********
2021/09/03 14:10:03.024121 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.024159 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgAppMsgApp to:3 from:8 term:7 logTerm:6 index:10 entries:<Term:7 Index:11 Type:EntryNormalEntryNormal > commit:10 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:03.024235 [info] [raftstore]: shard 2 peer 7 ********become follower now********
2021/09/03 14:10:03.218714 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.218766 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:03.348816 [info] prophet: [prophet-leader/node-2]/loop: exit
2021/09/03 14:10:03.418981 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.419030 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:03.619616 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.619677 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:03.819239 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:03.819285 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.019655 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:04.019706 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.219334 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:04.219390 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.418723 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:04.418775 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.619658 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:04.619730 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.818701 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:04.818753 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:04.832645 [info] prophet: [prophet-leader/node-0]/loop: current leader is [node-1127.0.0.1:30001]
2021/09/03 14:10:04.832658 [info] prophet: [prophet-leader/node-0]/loop: start watch leader node-1127.0.0.1:30001
2021/09/03 14:10:04.832662 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:04.832710 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:04.832725 [info] prophet: client read loop started 
2021/09/03 14:10:04.832740 [info] prophet: client started
2021/09/03 14:10:04.832747 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:04.832749 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:04.832766 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649404 deployPath:"not set" 
2021/09/03 14:10:04.832789 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:04.832794 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:04.832862 [info] [raftstore]: load local store 1
2021/09/03 14:10:04.832914 [info] [raftstore]: prophet started
2021/09/03 14:10:04.832968 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:04.832998 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:04.833002 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:04.833044 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:04.833092 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:6 Vote:3 Commit:10} LastIndex:10 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:04.833110 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:04.833113 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:10 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:04.833115 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:04.833118 [info] [raftstore]: shard 2 peer 3 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:10:04.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 7 8)"}
{"level":"info","ts":"2021-09-03T14:10:04.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:04.833+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3,7,8], term: 6, commit: 10, applied: 10, lastindex: 10, lastterm: 6]"}
2021/09/03 14:10:04.833204 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:04.833220 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 ContainerID:6 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:04.833245 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:04.833248 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:04.833250 [info] [raftstore]: shards started
2021/09/03 14:10:04.833254 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:04.833277 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:04.833292 [info] [raftstore]: router started
2021/09/03 14:10:04.833402 [info] [raftstore]: router event loop task started
2021/09/03 14:10:04.833412 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:04.833529 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:04.833558 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:10:04.834795 [info] prophet: new watcher 127.0.0.1:49370 added
2021/09/03 14:10:04.834879 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:04.834897 [info] [raftstore]: start init event
2021/09/03 14:10:04.834935 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:49368->127.0.0.1:30001: use of closed network connection
2021/09/03 14:10:04.834947 [error] prophet: client read loop stopped
2021/09/03 14:10:04.835723 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:04.835742 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"38.5µs","request":"header:<ID:9868648654745651725 > lease_revoke:<id:08f47baa47404a08>","response":"size:27","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"44.2µs","request":"header:<ID:9868648654745651725 > lease_revoke:<id:08f47baa47404a08>","response":"size:27","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"45.3µs","request":"header:<ID:9868648654745651725 > lease_revoke:<id:08f47baa47404a08>","response":"size:27","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005456c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = NotFound desc = etcdserver: requested lease not found"}
2021/09/03 14:10:04.837601 [info] prophet: [prophet-leader/node-0]/lease: close failed with etcdserver: requested lease not found
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:04.837665 [info] prophet: [prophet-leader/node-0]/watch: exit with context done
2021/09/03 14:10:04.837679 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:04.837683 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:04.837685 [info] prophet: [prophet-leader/node-0]/loop: leader node-1127.0.0.1:30001 was out
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"93ccda9956d988f4","current-leader-member-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0005456c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:04.837722 [error] prophet: read /electors/leader/expect-prophet-leader from etcd failed with context canceled
2021/09/03 14:10:04.837725 [error] prophet: [prophet-leader/node-0]/loop: check expect leader failed with context canceled
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"acedfd6cb7a808ac","error":"failed to read acedfd6cb7a808ac on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.837+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"9e7007ddcbce100f","error":"failed to read 9e7007ddcbce100f on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"9e7007ddcbce100f","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"9e7007ddcbce100f","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 9e7007ddcbce100f)"}
{"level":"warn","ts":"2021-09-03T14:10:04.838+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node acedfd6cb7a808ac)"}
{"level":"info","ts":"2021-09-03T14:10:04.841+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:04.842+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:04.842+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:04.842297 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:04.842317 [info] [transport]: transfer stopped
2021/09/03 14:10:04.842319 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:04.842321 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:04.842324 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:04.842325 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842331 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842333 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842334 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842335 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842336 [info] [transport]: send raft worker stopped
2021/09/03 14:10:04.842338 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842338 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:04.842340 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842342 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:04.842344 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:04.842345 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:04.842357 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:04.842393 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:10:04.842405 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:10:04.842456 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:49334->127.0.0.1:30001: use of closed network connection
2021/09/03 14:10:04.842469 [error] prophet: client read loop stopped
2021/09/03 14:10:04.843536 [info] prophet: [prophet-leader/node-1]/lease: closed
{"level":"info","ts":"2021-09-03T14:10:04.843+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:10:04.843601 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:10:04.843634 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:04.843645 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:04.843647 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:10:04.843651 [info] prophet: coordinator is stopping
2021/09/03 14:10:04.843655 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:04.843647 [info] prophet: [prophet-leader/node-2]/loop: leader node-1127.0.0.1:30001 was out
2021/09/03 14:10:04.843669 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:04.843687 [info] prophet: coordinator has been stopped
2021/09/03 14:10:04.843641 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/09/03 14:10:04.843634 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
2021/09/03 14:10:04.843696 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:04.843699 [info] prophet: watcher notifer exited
2021/09/03 14:10:04.843706 [info] prophet: metrics are reset
2021/09/03 14:10:04.843716 [info] prophet: background jobs has been stopped
2021/09/03 14:10:04.843746 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:04.843763 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:04.843765 [info] prophet: watcher notifier stopped
2021/09/03 14:10:04.843749 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:04.843769 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:04.843771 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:04.843774 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:04.843768 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:04.844106 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:10:04.844122 [info] prophet: [prophet-leader/node-2]/campaign: start
{"level":"info","ts":"2021-09-03T14:10:04.844+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"9e7007ddcbce100f","current-leader-member-id":"9e7007ddcbce100f","transferee-member-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.844+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term 14] starts to transfer leadership to acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f sent MsgTimeoutNow to acedfd6cb7a808ac after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [term 14] received MsgTimeoutNow from 9e7007ddcbce100f and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac is starting a new election at term 14"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became candidate at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from acedfd6cb7a808ac at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 14, index: 64] sent MsgVote request to 93ccda9956d988f4 at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 14, index: 64] sent MsgVote request to 9e7007ddcbce100f at term 15"}
{"level":"warn","ts":"2021-09-03T14:10:04.845+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac lost leader 9e7007ddcbce100f at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [term: 14] received a MsgVote message with higher term from acedfd6cb7a808ac [term: 15]"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f became follower at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"9e7007ddcbce100f [logterm: 14, index: 64, vote: 0] cast MsgVote for acedfd6cb7a808ac [logterm: 14, index: 64] at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.845+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f lost leader 9e7007ddcbce100f at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.846+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from 9e7007ddcbce100f at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.846+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:04.846+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became leader at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.846+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac elected leader acedfd6cb7a808ac at term 15"}
{"level":"info","ts":"2021-09-03T14:10:04.846+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 9e7007ddcbce100f elected leader acedfd6cb7a808ac at term 15"}
2021/09/03 14:10:04.847671 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"warn","ts":"2021-09-03T14:10:04.847+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:04.847+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:10:04.848939 [info] prophet: [prophet-leader/node-2]/campaign: completed, start keepalive
2021/09/03 14:10:04.848956 [info] prophet: ********node-2 become to leader now********
{"level":"warn","ts":"2021-09-03T14:10:04.849+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:04.851115 [info] prophet: load 3 containers, cost 2.0845ms
2021/09/03 14:10:04.851538 [info] prophet: load 1 resources, cost 409.2µs
2021/09/03 14:10:04.852136 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:04.852146 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:04.852594 [info] prophet: load 0 jobs
2021/09/03 14:10:04.933704 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:04.944429 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"9e7007ddcbce100f","old-leader-member-id":"9e7007ddcbce100f","new-leader-member-id":"acedfd6cb7a808ac","took":"100.6949ms"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.945+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"acedfd6cb7a808ac","error":"failed to read acedfd6cb7a808ac on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"9e7007ddcbce100f","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"info","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"acedfd6cb7a808ac"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"9e7007ddcbce100f","remote-peer-id-stream-handler":"9e7007ddcbce100f","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"9e7007ddcbce100f","remote-peer-id-stream-handler":"9e7007ddcbce100f","remote-peer-id-from":"acedfd6cb7a808ac","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:04.946+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"9e7007ddcbce100f","error":"failed to dial 9e7007ddcbce100f on stream MsgApp v2 (peer 9e7007ddcbce100f failed to find local node acedfd6cb7a808ac)"}
{"level":"info","ts":"2021-09-03T14:10:04.947+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:10:05.019697 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:05.019745 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:05.034630 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.038771 [info] prophet: [prophet-leader/node-0]/loop: exit
2021/09/03 14:10:05.134622 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.218932 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:05.218986 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:05.233960 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:05.318+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
2021/09/03 14:10:05.333969 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.418933 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:05.418987 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:05.434121 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.534089 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.618934 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:05.618990 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:05.633849 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.733683 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:05.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"acedfd6cb7a808ac stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:10:05.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became follower at term 15"}
{"level":"info","ts":"2021-09-03T14:10:05.818+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: acedfd6cb7a808ac lost leader acedfd6cb7a808ac at term 15"}
2021/09/03 14:10:05.818774 [error] [transport]: connect to store 1 failed with dial tcp 127.0.0.1:10000: connect: connection refused
2021/09/03 14:10:05.818819 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:5 > to:<id:3 containerID:1 > message:<type:MsgHeartbeatMsgHeartbeat to:3 from:8 term:7 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 3 failed with not connected
2021/09/03 14:10:05.830059 [info] prophet: client start init connection to leader 127.0.0.1:30002
2021/09/03 14:10:05.830138 [info] prophet: client start connect to leader 127.0.0.1:30002
2021/09/03 14:10:05.830150 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:05.834396 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:05.834535 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:05.843870 [info] prophet: client start init connection to leader 127.0.0.1:30002
2021/09/03 14:10:05.844007 [info] prophet: client start connect to leader 127.0.0.1:30002
2021/09/03 14:10:05.844026 [info] prophet: watcher init leader connection 127.0.0.1:30002 succeed
2021/09/03 14:10:05.844099 [info] prophet: new watcher 127.0.0.1:41640 added
2021/09/03 14:10:05.844223 [info] [raftstore]: start init event
2021/09/03 14:10:05.853042 [info] prophet: [prophet-leader/node-2]/keepalive: exit with etcd leader changed
2021/09/03 14:10:05.853058 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:05.853085 [info] prophet: coordinator stops running 
2021/09/03 14:10:05.853085 [info] prophet: metrics are reset
2021/09/03 14:10:05.853091 [info] prophet: coordinator is stopping
2021/09/03 14:10:05.853091 [info] prophet: background jobs has been stopped
2021/09/03 14:10:05.853093 [info] prophet: coordinator has been stopped
2021/09/03 14:10:05.853104 [info] prophet: watcher notifer exited
2021/09/03 14:10:05.853136 [info] prophet: watcher notifier stopped
2021/09/03 14:10:05.853147 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:05.853172 [error] prophet: [prophet-leader/node-2]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:10:05.853191 [info] prophet: [prophet-leader/node-2]/lease: exit with context done
2021/09/03 14:10:05.853196 [error] prophet: [prophet-leader/node-2]/lease: keep lease exit
2021/09/03 14:10:05.853138 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:05.853205 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:05.934436 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:05.948+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:05.948+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:10:05.948070 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:10:05.948097 [info] [transport]: transfer stopped
2021/09/03 14:10:05.948099 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:10:05.948100 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:10:05.948104 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:10:05.948104 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948109 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:05.948113 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948116 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:05.948118 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948119 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948120 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948120 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948123 [info] [transport]: send raft worker stopped
2021/09/03 14:10:05.948124 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:05.948120 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:05.948141 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:10:05.948158 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:10:05.948160 [info] [raftstore]: store 6 begin to stop
2021/09/03 14:10:05.948123 [info] [transport]: send snapshot worker stopped
{"level":"info","ts":"2021-09-03T14:10:05.953+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac no leader at term 15; dropping index reading msg"}
2021/09/03 14:10:06.030445 [error] prophet: container 6 heartbeat failed with client is closed
2021/09/03 14:10:06.030459 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:06.130992 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:10:06.131020 [error] prophet: client read loop stopped
{"level":"warn","ts":"2021-09-03T14:10:06.424+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"93ccda9956d988f4","rtt":"0s","error":"dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:06.424+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"93ccda9956d988f4","rtt":"0s","error":"dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:06.426+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"9e7007ddcbce100f","rtt":"0s","error":"dial tcp 127.0.0.1:50001: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:06.426+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"9e7007ddcbce100f","rtt":"0s","error":"dial tcp 127.0.0.1:50001: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:06.454+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":625010419567708439,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:06.454+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac no leader at term 15; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:10:06.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac is starting a new election at term 15"}
{"level":"info","ts":"2021-09-03T14:10:06.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac became candidate at term 16"}
{"level":"info","ts":"2021-09-03T14:10:06.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac received MsgVoteResp from acedfd6cb7a808ac at term 16"}
{"level":"info","ts":"2021-09-03T14:10:06.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 15, index: 66] sent MsgVote request to 93ccda9956d988f4 at term 16"}
{"level":"info","ts":"2021-09-03T14:10:06.618+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"acedfd6cb7a808ac [logterm: 15, index: 66] sent MsgVote request to 9e7007ddcbce100f at term 16"}
2021/09/03 14:10:06.829929 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:06.949+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:05.948+0800","time spent":"1.0008767s","remote":"127.0.0.1:56514","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:10:06.949+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc002b048c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:10:06.949236 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:10:06.949+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:10:06.949+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc002b048c0/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: read tcp 127.0.0.1:56514->127.0.0.1:40002: use of closed network connection"}
2021/09/03 14:10:06.949338 [error] prophet: read /electors/leader/prophet-leader from etcd failed with context canceled
2021/09/03 14:10:06.949341 [error] prophet: [prophet-leader/node-2]/loop: load current leader failed with context canceled, retry later
{"level":"warn","ts":"2021-09-03T14:10:06.949+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"995.4929ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:06.949+0800","caller":"traceutil/trace.go:171","msg":"trace[1008752899] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"995.5463ms","start":"2021-09-03T14:10:05.953+0800","end":"2021-09-03T14:10:06.949+0800","steps":["trace[1008752899] 'agreement among raft nodes before linearized reading'  (duration: 995.492ms)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:10:06.949+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:05.953+0800","time spent":"995.5691ms","remote":"127.0.0.1:56514","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"acedfd6cb7a808ac","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"warn","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"acedfd6cb7a808ac","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.950+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"9e7007ddcbce100f"}
{"level":"info","ts":"2021-09-03T14:10:06.951+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:06.953+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:06.953+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:10:06.953155 [info] [raftstore]: store 6 pd stopped
2021/09/03 14:10:06.953180 [info] [transport]: transfer stopped
2021/09/03 14:10:06.953192 [info] [raftstore]: store 6 transport stopped
2021/09/03 14:10:06.953194 [info] [raftstore]: store 6 all shards stopped
2021/09/03 14:10:06.953197 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953199 [info] [raftstore]: store 6 all snapshot manager stopped
2021/09/03 14:10:06.953203 [info] [transport]: send raft worker stopped
2021/09/03 14:10:06.953183 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953207 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953211 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953202 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953189 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953217 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953217 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:06.953226 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:06.953226 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:06.953236 [info] [raftstore]: store 6 task runner stopped
2021/09/03 14:10:06.953219 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:06.953258 [info] [raftstore]: store 6 rpc stopped
--- PASS: TestClusterStartConcurrent (23.24s)
=== RUN   TestAdjustRaftTickerInterval
2021/09/03 14:10:06.962975 [info] prophet: prophet logger set
2021/09/03 14:10:06.968929 [warning] [raftstore]: ########## adjust Raft.TickInterval from 1ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:06.969019 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:06.969027 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:06.969031 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:10:06.969+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:06.969+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:06.969+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:06.969+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:06.970+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3159ms"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:06.973+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:06.975+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:06.978+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:06.981+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
2021/09/03 14:10:07.049763 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:07.273+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:07.273+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.273+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.273+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.273+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
2021/09/03 14:10:07.274199 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:07.274+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:10:07.276200 [info] prophet: start system time monitor 
2021/09/03 14:10:07.276590 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:07.276771 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:07.276782 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:07.277080 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:07.277720 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:07.277735 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:07.278059 [info] prophet: load 0 containers, cost 227.4µs
2021/09/03 14:10:07.278241 [info] prophet: load 0 resources, cost 166.1µs
2021/09/03 14:10:07.278910 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:07.278932 [info] prophet: client read loop started 
2021/09/03 14:10:07.278941 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:07.278943 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:07.278911 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:07.278914 [info] prophet: client started
2021/09/03 14:10:07.279034 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:07.279037 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:07.279058 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649407 deployPath:"not set" 
2021/09/03 14:10:07.279069 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:07.279061 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:07.279104 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:07.279458 [info] prophet: load 0 jobs
2021/09/03 14:10:07.279693 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:07.279714 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:07.280381 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:07.280820 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:07.280834 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:07.281080 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:07.282520 [info] prophet: container 1 limit added
2021/09/03 14:10:07.282588 [info] [raftstore]: prophet started
2021/09/03 14:10:07.282652 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:07.282663 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:07.282664 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:07.282681 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:07.282712 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:07.282712 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.282719 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.282720 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.282780 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:07.282786 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.282788 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.282+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:07.282822 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:07.282830 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:07.282831 [info] [raftstore]: shards started
2021/09/03 14:10:07.282833 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:07.282840 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:07.282847 [info] [raftstore]: router started
2021/09/03 14:10:07.282865 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:07.282868 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:07.282952 [info] [raftstore]: router event loop task started
2021/09/03 14:10:07.283003 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:07.283016 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:07.283055 [info] prophet: new watcher 127.0.0.1:45542 added
2021/09/03 14:10:07.283125 [info] [raftstore]: start init event
2021/09/03 14:10:07.285009 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:07.285068 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:45540->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:07.285083 [error] prophet: client read loop stopped
2021/09/03 14:10:07.285625 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:07.285659 [info] prophet: drive push operator has been stopped 
{"level":"info","ts":"2021-09-03T14:10:07.285+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:07.285670 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:07.285685 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:07.285700 [info] prophet: watcher notifer exited
2021/09/03 14:10:07.285704 [info] prophet: coordinator is stopping
2021/09/03 14:10:07.285727 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:07.285734 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:07.285738 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:07.285740 [info] prophet: coordinator has been stopped
2021/09/03 14:10:07.285745 [info] prophet: metrics are reset
2021/09/03 14:10:07.285759 [info] prophet: background jobs has been stopped
2021/09/03 14:10:07.285775 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:07.285778 [info] prophet: watcher notifier stopped
2021/09/03 14:10:07.285779 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:07.285781 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:10:07.286+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:07.289+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.290+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.290+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:07.290230 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:07.290254 [info] [transport]: transfer stopped
2021/09/03 14:10:07.290256 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:07.290257 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:07.290258 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290262 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:07.290263 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290266 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290268 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290270 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:07.290272 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290270 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290275 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290277 [info] [transport]: send raft worker stopped
2021/09/03 14:10:07.290279 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:07.290280 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:07.290281 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.290282 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:07.290285 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:07.290302 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestAdjustRaftTickerInterval (0.33s)
=== RUN   TestIssue123
2021/09/03 14:10:07.291232 [info] prophet: prophet logger set
2021/09/03 14:10:07.296942 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:07.297028 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:07.297040 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:07.297070 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:07.297+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:07.297+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:07.297+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:07.297+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:07.298+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3783ms"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:07.301+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:07.303+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:07.304+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.306+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:10:07.385872 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:07.702+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:07.703+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:07.703+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:07.703+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:07.703+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:10:07.703196 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:07.703+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:07.704634 [info] prophet: start system time monitor 
2021/09/03 14:10:07.705130 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:07.705297 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:07.705313 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:07.705595 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:07.706192 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:07.706219 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:07.706776 [info] prophet: load 0 containers, cost 453.7µs
2021/09/03 14:10:07.706994 [info] prophet: load 0 resources, cost 199µs
2021/09/03 14:10:07.707602 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:07.707617 [info] prophet: client read loop started 
2021/09/03 14:10:07.707622 [info] prophet: client started
2021/09/03 14:10:07.707627 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:07.707629 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:07.707606 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:07.707641 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:07.707643 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:07.707647 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649407 deployPath:"not set" 
2021/09/03 14:10:07.707650 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:07.707677 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:07.707690 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:07.708362 [info] prophet: load 0 jobs
2021/09/03 14:10:07.708616 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:07.708633 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:07.709350 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:07.709919 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:07.709931 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:07.710117 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:07.711671 [info] prophet: container 1 limit added
2021/09/03 14:10:07.711724 [info] [raftstore]: prophet started
2021/09/03 14:10:07.711760 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:07.711795 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:07.711797 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:07.711811 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:07.711831 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.711875 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.711883 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.711933 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:07.711940 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.711942 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.711+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:07.711836 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:07.711981 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:07.711967 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:07.712071 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:07.712073 [info] [raftstore]: shards started
2021/09/03 14:10:07.712076 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:07.712085 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:07.712095 [info] [raftstore]: router started
2021/09/03 14:10:07.712107 [info] [raftstore]: router event loop task started
2021/09/03 14:10:07.712117 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:07.712170 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:07.712183 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:07.712234 [info] prophet: new watcher 127.0.0.1:45554 added
2021/09/03 14:10:07.712312 [info] [raftstore]: start init event
2021/09/03 14:10:07.715097 [info] [raftstore]: dynamic shards pool job started
2021/09/03 14:10:07.715310 [info] prophet: resource 5 created with peers [{ID:9 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.715331 [info] prophet: resource 6 created with peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.715336 [info] prophet: resource 7 created with peers [{ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.715341 [info] prophet: resource 8 created with peers [{ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.715912 [info] [raftstore]: shard 5 peer 9 begin to create at store 1, peers: [{ID:9 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.715946 [info] [raftstore]: create init shard id:5 start:"b\000\000\000\000\000\000\000\001" end:"b\000\000\000\000\000\000\000\002" epoch:<confVer:3 > state:WaittingCreate peers:<id:9 containerID:1 > unique:"1-0-1" 
2021/09/03 14:10:07.715971 [info] [raftstore]: shard 5 peer 9 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.715983 [info] [raftstore]: shard 5 peer 9 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.715984 [info] [raftstore]: shard 5 peer 9 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.715+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 switched to configuration voters=(9)"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 9 [peers: [9], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.716021 [info] [raftstore]: shard 5 peer 9 delegate register completed
2021/09/03 14:10:07.716025 [info] [raftstore]: shard 5 peer 9 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:9 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.716026 [info] [raftstore]: shard 5 peer 9 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 received MsgPreVoteResp from 9 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 received MsgVoteResp from 9 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"9 became leader at term 6"}
2021/09/03 14:10:07.716073 [info] [raftstore]: shard 6 peer 10 begin to create at store 1, peers: [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.716085 [info] [raftstore]: create init shard id:6 start:"b\000\000\000\000\000\000\000\002" end:"b\000\000\000\000\000\000\000\003" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:1 > unique:"1-0-2" 
2021/09/03 14:10:07.716104 [info] [raftstore]: shard 6 peer 10 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.716107 [info] [raftstore]: shard 6 peer 10 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.716108 [info] [raftstore]: shard 6 peer 10 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(10)"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.716136 [info] [raftstore]: shard 6 peer 10 delegate register completed
2021/09/03 14:10:07.716140 [info] [raftstore]: shard 6 peer 10 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.716141 [info] [raftstore]: shard 6 peer 10 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from a at term 6"}
2021/09/03 14:10:07.716166 [info] [raftstore]: shard 5 peer 9 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became leader at term 6"}
2021/09/03 14:10:07.716238 [info] [raftstore]: shard 7 peer 11 begin to create at store 1, peers: [{ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.716270 [info] [raftstore]: create init shard id:7 start:"b\000\000\000\000\000\000\000\003" end:"b\000\000\000\000\000\000\000\004" epoch:<confVer:3 > state:WaittingCreate peers:<id:11 containerID:1 > unique:"1-0-3" 
2021/09/03 14:10:07.716312 [info] [raftstore]: shard 7 peer 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.716325 [info] [raftstore]: shard 7 peer 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.716327 [info] [raftstore]: shard 7 peer 11 init last term, last term=<5>
2021/09/03 14:10:07.716239 [info] [raftstore]: shard 6 peer 10 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(11)"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.716383 [info] [raftstore]: shard 7 peer 11 delegate register completed
2021/09/03 14:10:07.716395 [info] [raftstore]: shard 7 peer 11 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.716397 [info] [raftstore]: shard 7 peer 11 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became leader at term 6"}
2021/09/03 14:10:07.716435 [info] [raftstore]: shard 8 peer 12 begin to create at store 1, peers: [{ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.716458 [info] [raftstore]: create init shard id:8 start:"b\000\000\000\000\000\000\000\004" end:"b\000\000\000\000\000\000\000\005" epoch:<confVer:3 > state:WaittingCreate peers:<id:12 containerID:1 > unique:"1-0-4" 
2021/09/03 14:10:07.716469 [info] [raftstore]: shard 8 peer 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.716473 [info] [raftstore]: shard 8 peer 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.716474 [info] [raftstore]: shard 8 peer 12 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(12)"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft c [peers: [c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.716504 [info] [raftstore]: shard 8 peer 12 delegate register completed
2021/09/03 14:10:07.716507 [info] [raftstore]: shard 8 peer 12 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.716509 [info] [raftstore]: shard 8 peer 12 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became pre-candidate at term 5"}
2021/09/03 14:10:07.716514 [info] [raftstore]: shard 7 peer 11 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgPreVoteResp from c at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c received MsgVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.716+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became leader at term 6"}
2021/09/03 14:10:07.716608 [info] [raftstore]: shard 8 peer 12 ********become leader now********
2021/09/03 14:10:07.717177 [info] prophet: resource 13 created with peers [{ID:17 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.717199 [info] prophet: resource 14 created with peers [{ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.717204 [info] prophet: resource 15 created with peers [{ID:19 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.717209 [info] prophet: resource 16 created with peers [{ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.717720 [info] [raftstore]: shard 14 peer 18 begin to create at store 1, peers: [{ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.717752 [info] [raftstore]: create init shard id:14 start:"b\000\000\000\000\000\000\000\006" end:"b\000\000\000\000\000\000\000\007" epoch:<confVer:3 > state:WaittingCreate peers:<id:18 containerID:1 > unique:"1-0-6" 
2021/09/03 14:10:07.717764 [info] [raftstore]: shard 14 peer 18 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.717777 [info] [raftstore]: shard 14 peer 18 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.717778 [info] [raftstore]: shard 14 peer 18 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 switched to configuration voters=(18)"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 12 [peers: [12], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.717818 [info] [raftstore]: shard 14 peer 18 delegate register completed
2021/09/03 14:10:07.717822 [info] [raftstore]: shard 14 peer 18 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:18 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.717823 [info] [raftstore]: shard 14 peer 18 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgPreVoteResp from 12 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 received MsgVoteResp from 12 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"12 became leader at term 6"}
2021/09/03 14:10:07.717860 [info] [raftstore]: shard 15 peer 19 begin to create at store 1, peers: [{ID:19 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.717871 [info] [raftstore]: create init shard id:15 start:"b\000\000\000\000\000\000\000\007" end:"b\000\000\000\000\000\000\000\010" epoch:<confVer:3 > state:WaittingCreate peers:<id:19 containerID:1 > unique:"1-0-7" 
2021/09/03 14:10:07.717880 [info] [raftstore]: shard 15 peer 19 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.717891 [info] [raftstore]: shard 15 peer 19 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.717892 [info] [raftstore]: shard 15 peer 19 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 switched to configuration voters=(19)"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 13 [peers: [13], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.717928 [info] [raftstore]: shard 15 peer 19 delegate register completed
2021/09/03 14:10:07.717931 [info] [raftstore]: shard 15 peer 19 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:19 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.717932 [info] [raftstore]: shard 15 peer 19 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 received MsgPreVoteResp from 13 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 received MsgVoteResp from 13 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"13 became leader at term 6"}
2021/09/03 14:10:07.717952 [info] [raftstore]: shard 14 peer 18 ********become leader now********
2021/09/03 14:10:07.717956 [info] [raftstore]: shard 16 peer 20 begin to create at store 1, peers: [{ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.717969 [info] [raftstore]: create init shard id:16 start:"b\000\000\000\000\000\000\000\010" end:"b\000\000\000\000\000\000\000\t" epoch:<confVer:3 > state:WaittingCreate peers:<id:20 containerID:1 > unique:"1-0-8" 
2021/09/03 14:10:07.717989 [info] [raftstore]: shard 16 peer 20 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.717990 [info] [raftstore]: shard 15 peer 19 ********become leader now********
2021/09/03 14:10:07.717992 [info] [raftstore]: shard 16 peer 20 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.717993 [info] [raftstore]: shard 16 peer 20 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.717+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 switched to configuration voters=(20)"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 14 [peers: [14], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.718024 [info] [raftstore]: shard 16 peer 20 delegate register completed
2021/09/03 14:10:07.718028 [info] [raftstore]: shard 16 peer 20 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:20 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.718029 [info] [raftstore]: shard 16 peer 20 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 received MsgPreVoteResp from 14 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 received MsgVoteResp from 14 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"14 became leader at term 6"}
2021/09/03 14:10:07.718057 [info] [raftstore]: shard 13 peer 17 begin to create at store 1, peers: [{ID:17 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.718080 [info] [raftstore]: create init shard id:13 start:"b\000\000\000\000\000\000\000\005" end:"b\000\000\000\000\000\000\000\006" epoch:<confVer:3 > state:WaittingCreate peers:<id:17 containerID:1 > unique:"1-0-5" 
2021/09/03 14:10:07.718093 [info] [raftstore]: shard 13 peer 17 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.718105 [info] [raftstore]: shard 13 peer 17 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.718106 [info] [raftstore]: shard 13 peer 17 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 switched to configuration voters=(17)"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 11 [peers: [11], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.718133 [info] [raftstore]: shard 13 peer 17 delegate register completed
2021/09/03 14:10:07.718136 [info] [raftstore]: shard 13 peer 17 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:17 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.718137 [info] [raftstore]: shard 13 peer 17 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 received MsgPreVoteResp from 11 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 received MsgVoteResp from 11 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"11 became leader at term 6"}
2021/09/03 14:10:07.718168 [info] [raftstore]: shard 16 peer 20 ********become leader now********
2021/09/03 14:10:07.718217 [info] [raftstore]: shard 13 peer 17 ********become leader now********
2021/09/03 14:10:07.723526 [info] prophet: resource 21 created with peers [{ID:25 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.723544 [info] prophet: resource 22 created with peers [{ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.723549 [info] prophet: resource 23 created with peers [{ID:27 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.723553 [info] prophet: resource 24 created with peers [{ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.724105 [info] [raftstore]: shard 24 peer 28 begin to create at store 1, peers: [{ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.724143 [info] [raftstore]: create init shard id:24 start:"b\000\000\000\000\000\000\000\014" end:"b\000\000\000\000\000\000\000\r" epoch:<confVer:3 > state:WaittingCreate peers:<id:28 containerID:1 > unique:"1-0-12" 
2021/09/03 14:10:07.724159 [info] [raftstore]: shard 24 peer 28 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.724163 [info] [raftstore]: shard 24 peer 28 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.724165 [info] [raftstore]: shard 24 peer 28 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c switched to configuration voters=(28)"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 1c [peers: [1c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.724215 [info] [raftstore]: shard 24 peer 28 delegate register completed
2021/09/03 14:10:07.724221 [info] [raftstore]: shard 24 peer 28 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:28 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.724222 [info] [raftstore]: shard 24 peer 28 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c received MsgPreVoteResp from 1c at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c received MsgVoteResp from 1c at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1c became leader at term 6"}
2021/09/03 14:10:07.724283 [info] [raftstore]: shard 21 peer 25 begin to create at store 1, peers: [{ID:25 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.724331 [info] [raftstore]: create init shard id:21 start:"b\000\000\000\000\000\000\000\t" end:"b\000\000\000\000\000\000\000\n" epoch:<confVer:3 > state:WaittingCreate peers:<id:25 containerID:1 > unique:"1-0-9" 
2021/09/03 14:10:07.724363 [info] [raftstore]: shard 21 peer 25 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.724380 [info] [raftstore]: shard 21 peer 25 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.724382 [info] [raftstore]: shard 21 peer 25 init last term, last term=<5>
2021/09/03 14:10:07.724384 [info] [raftstore]: shard 24 peer 28 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 switched to configuration voters=(25)"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 19 [peers: [19], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.724429 [info] [raftstore]: shard 21 peer 25 delegate register completed
2021/09/03 14:10:07.724434 [info] [raftstore]: shard 21 peer 25 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:25 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.724435 [info] [raftstore]: shard 21 peer 25 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 received MsgPreVoteResp from 19 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 received MsgVoteResp from 19 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"19 became leader at term 6"}
2021/09/03 14:10:07.724467 [info] [raftstore]: shard 22 peer 26 begin to create at store 1, peers: [{ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.724496 [info] [raftstore]: create init shard id:22 start:"b\000\000\000\000\000\000\000\n" end:"b\000\000\000\000\000\000\000\013" epoch:<confVer:3 > state:WaittingCreate peers:<id:26 containerID:1 > unique:"1-0-10" 
2021/09/03 14:10:07.724520 [info] [raftstore]: shard 22 peer 26 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.724534 [info] [raftstore]: shard 22 peer 26 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.724536 [info] [raftstore]: shard 22 peer 26 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a switched to configuration voters=(26)"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 1a [peers: [1a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.724574 [info] [raftstore]: shard 22 peer 26 delegate register completed
2021/09/03 14:10:07.724579 [info] [raftstore]: shard 22 peer 26 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:26 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.724581 [info] [raftstore]: shard 22 peer 26 try to campaign leader, because only self
2021/09/03 14:10:07.724496 [info] [raftstore]: shard 21 peer 25 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a received MsgPreVoteResp from 1a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a received MsgVoteResp from 1a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1a became leader at term 6"}
2021/09/03 14:10:07.724679 [info] [raftstore]: shard 23 peer 27 begin to create at store 1, peers: [{ID:27 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.724710 [info] [raftstore]: create init shard id:23 start:"b\000\000\000\000\000\000\000\013" end:"b\000\000\000\000\000\000\000\014" epoch:<confVer:3 > state:WaittingCreate peers:<id:27 containerID:1 > unique:"1-0-11" 
2021/09/03 14:10:07.724747 [info] [raftstore]: shard 23 peer 27 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.724761 [info] [raftstore]: shard 23 peer 27 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.724763 [info] [raftstore]: shard 23 peer 27 init last term, last term=<5>
2021/09/03 14:10:07.724754 [info] [raftstore]: shard 22 peer 26 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b switched to configuration voters=(27)"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 1b [peers: [1b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.724812 [info] [raftstore]: shard 23 peer 27 delegate register completed
2021/09/03 14:10:07.724817 [info] [raftstore]: shard 23 peer 27 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:27 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.724828 [info] [raftstore]: shard 23 peer 27 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b received MsgPreVoteResp from 1b at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b received MsgVoteResp from 1b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.724+0800","caller":"etcdserver/zap_raft.go:77","msg":"1b became leader at term 6"}
2021/09/03 14:10:07.724867 [info] [raftstore]: shard 23 peer 27 ********become leader now********
2021/09/03 14:10:07.725449 [info] prophet: resource 29 created with peers [{ID:33 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.725481 [info] prophet: resource 30 created with peers [{ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.725487 [info] prophet: resource 31 created with peers [{ID:35 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.725491 [info] prophet: resource 32 created with peers [{ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.725960 [info] [raftstore]: shard 32 peer 36 begin to create at store 1, peers: [{ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.725990 [info] [raftstore]: create init shard id:32 start:"b\000\000\000\000\000\000\000\020" end:"b\000\000\000\000\000\000\000\021" epoch:<confVer:3 > state:WaittingCreate peers:<id:36 containerID:1 > unique:"1-0-16" 
2021/09/03 14:10:07.726008 [info] [raftstore]: shard 32 peer 36 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.726019 [info] [raftstore]: shard 32 peer 36 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.726020 [info] [raftstore]: shard 32 peer 36 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 switched to configuration voters=(36)"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 24 [peers: [24], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.726063 [info] [raftstore]: shard 32 peer 36 delegate register completed
2021/09/03 14:10:07.726073 [info] [raftstore]: shard 32 peer 36 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:36 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.726074 [info] [raftstore]: shard 32 peer 36 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 received MsgPreVoteResp from 24 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 received MsgVoteResp from 24 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"24 became leader at term 6"}
2021/09/03 14:10:07.726116 [info] [raftstore]: shard 29 peer 33 begin to create at store 1, peers: [{ID:33 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.726136 [info] [raftstore]: create init shard id:29 start:"b\000\000\000\000\000\000\000\r" end:"b\000\000\000\000\000\000\000\016" epoch:<confVer:3 > state:WaittingCreate peers:<id:33 containerID:1 > unique:"1-0-13" 
2021/09/03 14:10:07.726152 [info] [raftstore]: shard 29 peer 33 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.726162 [info] [raftstore]: shard 29 peer 33 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.726163 [info] [raftstore]: shard 29 peer 33 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 switched to configuration voters=(33)"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 21 [peers: [21], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.726190 [info] [raftstore]: shard 29 peer 33 delegate register completed
2021/09/03 14:10:07.726193 [info] [raftstore]: shard 29 peer 33 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:33 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.726194 [info] [raftstore]: shard 29 peer 33 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 became pre-candidate at term 5"}
2021/09/03 14:10:07.726200 [info] [raftstore]: shard 32 peer 36 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 received MsgPreVoteResp from 21 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 received MsgVoteResp from 21 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"21 became leader at term 6"}
2021/09/03 14:10:07.726285 [info] [raftstore]: shard 30 peer 34 begin to create at store 1, peers: [{ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.726310 [info] [raftstore]: create init shard id:30 start:"b\000\000\000\000\000\000\000\016" end:"b\000\000\000\000\000\000\000\017" epoch:<confVer:3 > state:WaittingCreate peers:<id:34 containerID:1 > unique:"1-0-14" 
2021/09/03 14:10:07.726333 [info] [raftstore]: shard 30 peer 34 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.726337 [info] [raftstore]: shard 30 peer 34 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.726338 [info] [raftstore]: shard 30 peer 34 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 switched to configuration voters=(34)"}
2021/09/03 14:10:07.726360 [info] [raftstore]: shard 29 peer 33 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 22 [peers: [22], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.726379 [info] [raftstore]: shard 30 peer 34 delegate register completed
2021/09/03 14:10:07.726400 [info] [raftstore]: shard 30 peer 34 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:34 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.726402 [info] [raftstore]: shard 30 peer 34 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 received MsgPreVoteResp from 22 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 received MsgVoteResp from 22 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"22 became leader at term 6"}
2021/09/03 14:10:07.726439 [info] [raftstore]: shard 31 peer 35 begin to create at store 1, peers: [{ID:35 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.726453 [info] [raftstore]: create init shard id:31 start:"b\000\000\000\000\000\000\000\017" end:"b\000\000\000\000\000\000\000\020" epoch:<confVer:3 > state:WaittingCreate peers:<id:35 containerID:1 > unique:"1-0-15" 
2021/09/03 14:10:07.726477 [info] [raftstore]: shard 31 peer 35 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.726489 [info] [raftstore]: shard 31 peer 35 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.726491 [info] [raftstore]: shard 31 peer 35 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 switched to configuration voters=(35)"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 23 [peers: [23], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.726521 [info] [raftstore]: shard 31 peer 35 delegate register completed
2021/09/03 14:10:07.726524 [info] [raftstore]: shard 31 peer 35 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:35 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.726525 [info] [raftstore]: shard 31 peer 35 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 received MsgPreVoteResp from 23 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 became candidate at term 6"}
2021/09/03 14:10:07.726537 [info] [raftstore]: shard 30 peer 34 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 received MsgVoteResp from 23 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.726+0800","caller":"etcdserver/zap_raft.go:77","msg":"23 became leader at term 6"}
2021/09/03 14:10:07.726631 [info] [raftstore]: shard 31 peer 35 ********become leader now********
2021/09/03 14:10:07.729698 [info] prophet: resource 37 created with peers [{ID:41 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.729719 [info] prophet: resource 38 created with peers [{ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.729723 [info] prophet: resource 39 created with peers [{ID:43 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.729728 [info] prophet: resource 40 created with peers [{ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.730278 [info] [raftstore]: shard 40 peer 44 begin to create at store 1, peers: [{ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.730323 [info] [raftstore]: create init shard id:40 start:"b\000\000\000\000\000\000\000\024" end:"b\000\000\000\000\000\000\000\025" epoch:<confVer:3 > state:WaittingCreate peers:<id:44 containerID:1 > unique:"1-0-20" 
2021/09/03 14:10:07.730345 [info] [raftstore]: shard 40 peer 44 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.730367 [info] [raftstore]: shard 40 peer 44 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.730369 [info] [raftstore]: shard 40 peer 44 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c switched to configuration voters=(44)"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 2c [peers: [2c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.730425 [info] [raftstore]: shard 40 peer 44 delegate register completed
2021/09/03 14:10:07.730442 [info] [raftstore]: shard 40 peer 44 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:44 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.730453 [info] [raftstore]: shard 40 peer 44 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c received MsgPreVoteResp from 2c at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c received MsgVoteResp from 2c at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2c became leader at term 6"}
2021/09/03 14:10:07.730552 [info] [raftstore]: shard 37 peer 41 begin to create at store 1, peers: [{ID:41 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.730587 [info] [raftstore]: create init shard id:37 start:"b\000\000\000\000\000\000\000\021" end:"b\000\000\000\000\000\000\000\022" epoch:<confVer:3 > state:WaittingCreate peers:<id:41 containerID:1 > unique:"1-0-17" 
2021/09/03 14:10:07.730623 [info] [raftstore]: shard 37 peer 41 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.730629 [info] [raftstore]: shard 37 peer 41 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.730631 [info] [raftstore]: shard 37 peer 41 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 switched to configuration voters=(41)"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 29 [peers: [29], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.730650 [info] [raftstore]: shard 40 peer 44 ********become leader now********
2021/09/03 14:10:07.730705 [info] [raftstore]: shard 37 peer 41 delegate register completed
2021/09/03 14:10:07.730747 [info] [raftstore]: shard 37 peer 41 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:41 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.730761 [info] [raftstore]: shard 37 peer 41 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 received MsgPreVoteResp from 29 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 received MsgVoteResp from 29 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"29 became leader at term 6"}
2021/09/03 14:10:07.730849 [info] [raftstore]: shard 38 peer 42 begin to create at store 1, peers: [{ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.730859 [info] [raftstore]: shard 37 peer 41 ********become leader now********
2021/09/03 14:10:07.730883 [info] [raftstore]: create init shard id:38 start:"b\000\000\000\000\000\000\000\022" end:"b\000\000\000\000\000\000\000\023" epoch:<confVer:3 > state:WaittingCreate peers:<id:42 containerID:1 > unique:"1-0-18" 
2021/09/03 14:10:07.730918 [info] [raftstore]: shard 38 peer 42 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.730940 [info] [raftstore]: shard 38 peer 42 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.730942 [info] [raftstore]: shard 38 peer 42 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a switched to configuration voters=(42)"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 2a [peers: [2a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.730981 [info] [raftstore]: shard 38 peer 42 delegate register completed
2021/09/03 14:10:07.730986 [info] [raftstore]: shard 38 peer 42 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:42 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.730997 [info] [raftstore]: shard 38 peer 42 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.730+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a received MsgPreVoteResp from 2a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a received MsgVoteResp from 2a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2a became leader at term 6"}
2021/09/03 14:10:07.731033 [info] [raftstore]: shard 39 peer 43 begin to create at store 1, peers: [{ID:43 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.731067 [info] [raftstore]: create init shard id:39 start:"b\000\000\000\000\000\000\000\023" end:"b\000\000\000\000\000\000\000\024" epoch:<confVer:3 > state:WaittingCreate peers:<id:43 containerID:1 > unique:"1-0-19" 
2021/09/03 14:10:07.731091 [info] [raftstore]: shard 39 peer 43 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.731094 [info] [raftstore]: shard 39 peer 43 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.731095 [info] [raftstore]: shard 39 peer 43 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b switched to configuration voters=(43)"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 2b [peers: [2b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.731121 [info] [raftstore]: shard 38 peer 42 ********become leader now********
2021/09/03 14:10:07.731144 [info] [raftstore]: shard 39 peer 43 delegate register completed
2021/09/03 14:10:07.731206 [info] [raftstore]: shard 39 peer 43 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:43 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.731208 [info] [raftstore]: shard 39 peer 43 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b received MsgPreVoteResp from 2b at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b received MsgVoteResp from 2b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.731+0800","caller":"etcdserver/zap_raft.go:77","msg":"2b became leader at term 6"}
2021/09/03 14:10:07.731245 [info] [raftstore]: shard 39 peer 43 ********become leader now********
2021/09/03 14:10:07.816621 [info] prophet: resource 45 created with peers [{ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.817234 [info] [raftstore]: shard 45 peer 46 begin to create at store 1, peers: [{ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.817284 [info] [raftstore]: create init shard id:45 start:"b\000\000\000\000\000\000\000\025" end:"b\000\000\000\000\000\000\000\026" epoch:<confVer:3 > state:WaittingCreate peers:<id:46 containerID:1 > unique:"1-0-21" 
2021/09/03 14:10:07.817321 [info] [raftstore]: shard 45 peer 46 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.817325 [info] [raftstore]: shard 45 peer 46 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.817326 [info] [raftstore]: shard 45 peer 46 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e switched to configuration voters=(46)"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 2e [peers: [2e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.817373 [info] [raftstore]: shard 45 peer 46 delegate register completed
2021/09/03 14:10:07.817378 [info] [raftstore]: shard 45 peer 46 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:46 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.817379 [info] [raftstore]: shard 45 peer 46 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e received MsgPreVoteResp from 2e at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e received MsgVoteResp from 2e at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.817+0800","caller":"etcdserver/zap_raft.go:77","msg":"2e became leader at term 6"}
2021/09/03 14:10:07.817419 [info] [raftstore]: shard 45 peer 46 ********become leader now********
2021/09/03 14:10:07.820384 [info] prophet: resource 47 created with peers [{ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.820888 [info] [raftstore]: shard 47 peer 48 begin to create at store 1, peers: [{ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.820942 [info] [raftstore]: create init shard id:47 start:"b\000\000\000\000\000\000\000\026" end:"b\000\000\000\000\000\000\000\027" epoch:<confVer:3 > state:WaittingCreate peers:<id:48 containerID:1 > unique:"1-0-22" 
2021/09/03 14:10:07.820964 [info] [raftstore]: shard 47 peer 48 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.820979 [info] [raftstore]: shard 47 peer 48 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.820980 [info] [raftstore]: shard 47 peer 48 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.820+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 switched to configuration voters=(48)"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 30 [peers: [30], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.821021 [info] [raftstore]: shard 47 peer 48 delegate register completed
2021/09/03 14:10:07.821033 [info] [raftstore]: shard 47 peer 48 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:48 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.821035 [info] [raftstore]: shard 47 peer 48 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 received MsgPreVoteResp from 30 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 received MsgVoteResp from 30 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.821+0800","caller":"etcdserver/zap_raft.go:77","msg":"30 became leader at term 6"}
2021/09/03 14:10:07.821070 [info] [raftstore]: shard 47 peer 48 ********become leader now********
2021/09/03 14:10:07.822864 [info] prophet: resource 49 created with peers [{ID:51 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.822885 [info] prophet: resource 50 created with peers [{ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.823507 [info] [raftstore]: shard 49 peer 51 begin to create at store 1, peers: [{ID:51 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.823549 [info] [raftstore]: create init shard id:49 start:"b\000\000\000\000\000\000\000\027" end:"b\000\000\000\000\000\000\000\030" epoch:<confVer:3 > state:WaittingCreate peers:<id:51 containerID:1 > unique:"1-0-23" 
2021/09/03 14:10:07.823585 [info] [raftstore]: shard 49 peer 51 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.823605 [info] [raftstore]: shard 49 peer 51 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.823608 [info] [raftstore]: shard 49 peer 51 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 switched to configuration voters=(51)"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 33 [peers: [33], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.823682 [info] [raftstore]: shard 49 peer 51 delegate register completed
2021/09/03 14:10:07.823689 [info] [raftstore]: shard 49 peer 51 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:51 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.823691 [info] [raftstore]: shard 49 peer 51 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 received MsgPreVoteResp from 33 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 received MsgVoteResp from 33 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"33 became leader at term 6"}
2021/09/03 14:10:07.823802 [info] [raftstore]: shard 50 peer 52 begin to create at store 1, peers: [{ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.823826 [info] [raftstore]: create init shard id:50 start:"b\000\000\000\000\000\000\000\030" end:"b\000\000\000\000\000\000\000\031" epoch:<confVer:3 > state:WaittingCreate peers:<id:52 containerID:1 > unique:"1-0-24" 
2021/09/03 14:10:07.823864 [info] [raftstore]: shard 50 peer 52 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.823882 [info] [raftstore]: shard 50 peer 52 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.823884 [info] [raftstore]: shard 50 peer 52 init last term, last term=<5>
2021/09/03 14:10:07.823890 [info] [raftstore]: shard 49 peer 51 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 switched to configuration voters=(52)"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 34 [peers: [34], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.823938 [info] [raftstore]: shard 50 peer 52 delegate register completed
2021/09/03 14:10:07.823946 [info] [raftstore]: shard 50 peer 52 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:52 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.823962 [info] [raftstore]: shard 50 peer 52 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 received MsgPreVoteResp from 34 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.823+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 received MsgVoteResp from 34 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.824+0800","caller":"etcdserver/zap_raft.go:77","msg":"34 became leader at term 6"}
2021/09/03 14:10:07.824028 [info] [raftstore]: shard 50 peer 52 ********become leader now********
2021/09/03 14:10:07.826234 [info] prophet: resource 53 created with peers [{ID:55 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.826254 [info] prophet: resource 54 created with peers [{ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.826696 [info] [raftstore]: shard 53 peer 55 begin to create at store 1, peers: [{ID:55 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.826742 [info] [raftstore]: create init shard id:53 start:"b\000\000\000\000\000\000\000\031" end:"b\000\000\000\000\000\000\000\032" epoch:<confVer:3 > state:WaittingCreate peers:<id:55 containerID:1 > unique:"1-0-25" 
2021/09/03 14:10:07.826779 [info] [raftstore]: shard 53 peer 55 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.826795 [info] [raftstore]: shard 53 peer 55 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.826797 [info] [raftstore]: shard 53 peer 55 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 switched to configuration voters=(55)"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 37 [peers: [37], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.826857 [info] [raftstore]: shard 53 peer 55 delegate register completed
2021/09/03 14:10:07.826863 [info] [raftstore]: shard 53 peer 55 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:55 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.826864 [info] [raftstore]: shard 53 peer 55 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 received MsgPreVoteResp from 37 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 received MsgVoteResp from 37 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"37 became leader at term 6"}
2021/09/03 14:10:07.826920 [info] [raftstore]: shard 54 peer 56 begin to create at store 1, peers: [{ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.826946 [info] [raftstore]: create init shard id:54 start:"b\000\000\000\000\000\000\000\032" end:"b\000\000\000\000\000\000\000\033" epoch:<confVer:3 > state:WaittingCreate peers:<id:56 containerID:1 > unique:"1-0-26" 
2021/09/03 14:10:07.826974 [info] [raftstore]: shard 54 peer 56 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.826978 [info] [raftstore]: shard 54 peer 56 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.826979 [info] [raftstore]: shard 54 peer 56 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.826+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 switched to configuration voters=(56)"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 38 [peers: [38], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.827016 [info] [raftstore]: shard 54 peer 56 delegate register completed
2021/09/03 14:10:07.827032 [info] [raftstore]: shard 54 peer 56 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:56 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.827034 [info] [raftstore]: shard 54 peer 56 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 received MsgPreVoteResp from 38 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 received MsgVoteResp from 38 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.827+0800","caller":"etcdserver/zap_raft.go:77","msg":"38 became leader at term 6"}
2021/09/03 14:10:07.827020 [info] [raftstore]: shard 53 peer 55 ********become leader now********
2021/09/03 14:10:07.827122 [info] [raftstore]: shard 54 peer 56 ********become leader now********
2021/09/03 14:10:07.830132 [info] prophet: resource 57 created with peers [{ID:59 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.830151 [info] prophet: resource 58 created with peers [{ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.830709 [info] [raftstore]: shard 57 peer 59 begin to create at store 1, peers: [{ID:59 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.830750 [info] [raftstore]: create init shard id:57 start:"b\000\000\000\000\000\000\000\033" end:"b\000\000\000\000\000\000\000\034" epoch:<confVer:3 > state:WaittingCreate peers:<id:59 containerID:1 > unique:"1-0-27" 
2021/09/03 14:10:07.830775 [info] [raftstore]: shard 57 peer 59 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.830794 [info] [raftstore]: shard 57 peer 59 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.830795 [info] [raftstore]: shard 57 peer 59 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b switched to configuration voters=(59)"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3b [peers: [3b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.830833 [info] [raftstore]: shard 57 peer 59 delegate register completed
2021/09/03 14:10:07.830838 [info] [raftstore]: shard 57 peer 59 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:59 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.830839 [info] [raftstore]: shard 57 peer 59 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b received MsgPreVoteResp from 3b at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b received MsgVoteResp from 3b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3b became leader at term 6"}
2021/09/03 14:10:07.830889 [info] [raftstore]: shard 58 peer 60 begin to create at store 1, peers: [{ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.830915 [info] [raftstore]: create init shard id:58 start:"b\000\000\000\000\000\000\000\034" end:"b\000\000\000\000\000\000\000\035" epoch:<confVer:3 > state:WaittingCreate peers:<id:60 containerID:1 > unique:"1-0-28" 
2021/09/03 14:10:07.830935 [info] [raftstore]: shard 58 peer 60 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.830951 [info] [raftstore]: shard 58 peer 60 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.830952 [info] [raftstore]: shard 58 peer 60 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c switched to configuration voters=(60)"}
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c became follower at term 5"}
2021/09/03 14:10:07.830972 [info] [raftstore]: shard 57 peer 59 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.830+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3c [peers: [3c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.831052 [info] [raftstore]: shard 58 peer 60 delegate register completed
2021/09/03 14:10:07.831059 [info] [raftstore]: shard 58 peer 60 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:60 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.831060 [info] [raftstore]: shard 58 peer 60 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c received MsgPreVoteResp from 3c at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c received MsgVoteResp from 3c at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.831+0800","caller":"etcdserver/zap_raft.go:77","msg":"3c became leader at term 6"}
2021/09/03 14:10:07.831098 [info] [raftstore]: shard 58 peer 60 ********become leader now********
2021/09/03 14:10:07.833538 [info] prophet: resource 61 created with peers [{ID:63 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.833559 [info] prophet: resource 62 created with peers [{ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.834027 [info] [raftstore]: shard 62 peer 64 begin to create at store 1, peers: [{ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.834058 [info] [raftstore]: create init shard id:62 start:"b\000\000\000\000\000\000\000\036" end:"b\000\000\000\000\000\000\000\037" epoch:<confVer:3 > state:WaittingCreate peers:<id:64 containerID:1 > unique:"1-0-30" 
2021/09/03 14:10:07.834084 [info] [raftstore]: shard 62 peer 64 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.834100 [info] [raftstore]: shard 62 peer 64 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.834101 [info] [raftstore]: shard 62 peer 64 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 switched to configuration voters=(64)"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 40 [peers: [40], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.834142 [info] [raftstore]: shard 62 peer 64 delegate register completed
2021/09/03 14:10:07.834156 [info] [raftstore]: shard 62 peer 64 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:64 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.834157 [info] [raftstore]: shard 62 peer 64 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 received MsgPreVoteResp from 40 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 received MsgVoteResp from 40 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"40 became leader at term 6"}
2021/09/03 14:10:07.834195 [info] [raftstore]: shard 61 peer 63 begin to create at store 1, peers: [{ID:63 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.834216 [info] [raftstore]: create init shard id:61 start:"b\000\000\000\000\000\000\000\035" end:"b\000\000\000\000\000\000\000\036" epoch:<confVer:3 > state:WaittingCreate peers:<id:63 containerID:1 > unique:"1-0-29" 
2021/09/03 14:10:07.834227 [info] [raftstore]: shard 61 peer 63 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.834238 [info] [raftstore]: shard 61 peer 63 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.834239 [info] [raftstore]: shard 61 peer 63 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f switched to configuration voters=(63)"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3f [peers: [3f], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.834260 [info] [raftstore]: shard 61 peer 63 delegate register completed
2021/09/03 14:10:07.834264 [info] [raftstore]: shard 61 peer 63 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:63 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.834266 [info] [raftstore]: shard 61 peer 63 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f received MsgPreVoteResp from 3f at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f received MsgVoteResp from 3f at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.834+0800","caller":"etcdserver/zap_raft.go:77","msg":"3f became leader at term 6"}
2021/09/03 14:10:07.834287 [info] [raftstore]: shard 62 peer 64 ********become leader now********
2021/09/03 14:10:07.834330 [info] [raftstore]: shard 61 peer 63 ********become leader now********
2021/09/03 14:10:07.836820 [info] prophet: resource 65 created with peers [{ID:67 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.836840 [info] prophet: resource 66 created with peers [{ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.838016 [info] [raftstore]: shard 65 peer 67 begin to create at store 1, peers: [{ID:67 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.838048 [info] [raftstore]: create init shard id:65 start:"b\000\000\000\000\000\000\000\037" end:"b\000\000\000\000\000\000\000 " epoch:<confVer:3 > state:WaittingCreate peers:<id:67 containerID:1 > unique:"1-0-31" 
2021/09/03 14:10:07.838064 [info] [raftstore]: shard 65 peer 67 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.838067 [info] [raftstore]: shard 65 peer 67 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.838068 [info] [raftstore]: shard 65 peer 67 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 switched to configuration voters=(67)"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 43 [peers: [43], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.838110 [info] [raftstore]: shard 65 peer 67 delegate register completed
2021/09/03 14:10:07.838114 [info] [raftstore]: shard 65 peer 67 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:67 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.838115 [info] [raftstore]: shard 65 peer 67 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 received MsgPreVoteResp from 43 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 received MsgVoteResp from 43 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"43 became leader at term 6"}
2021/09/03 14:10:07.838143 [info] [raftstore]: shard 66 peer 68 begin to create at store 1, peers: [{ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.838163 [info] [raftstore]: create init shard id:66 start:"b\000\000\000\000\000\000\000 " end:"b\000\000\000\000\000\000\000!" epoch:<confVer:3 > state:WaittingCreate peers:<id:68 containerID:1 > unique:"1-0-32" 
2021/09/03 14:10:07.838174 [info] [raftstore]: shard 66 peer 68 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.838184 [info] [raftstore]: shard 66 peer 68 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.838185 [info] [raftstore]: shard 66 peer 68 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 switched to configuration voters=(68)"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 44 [peers: [44], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.838205 [info] [raftstore]: shard 66 peer 68 delegate register completed
2021/09/03 14:10:07.838208 [info] [raftstore]: shard 66 peer 68 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:68 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.838209 [info] [raftstore]: shard 66 peer 68 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 received MsgPreVoteResp from 44 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 received MsgVoteResp from 44 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.838+0800","caller":"etcdserver/zap_raft.go:77","msg":"44 became leader at term 6"}
2021/09/03 14:10:07.838234 [info] [raftstore]: shard 65 peer 67 ********become leader now********
2021/09/03 14:10:07.838265 [info] [raftstore]: shard 66 peer 68 ********become leader now********
2021/09/03 14:10:07.840599 [info] prophet: resource 69 created with peers [{ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.841069 [info] [raftstore]: shard 69 peer 70 begin to create at store 1, peers: [{ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.841104 [info] [raftstore]: create init shard id:69 start:"b\000\000\000\000\000\000\000!" end:"b\000\000\000\000\000\000\000\"" epoch:<confVer:3 > state:WaittingCreate peers:<id:70 containerID:1 > unique:"1-0-33" 
2021/09/03 14:10:07.841122 [info] [raftstore]: shard 69 peer 70 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.841134 [info] [raftstore]: shard 69 peer 70 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.841136 [info] [raftstore]: shard 69 peer 70 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 switched to configuration voters=(70)"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 46 [peers: [46], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.841173 [info] [raftstore]: shard 69 peer 70 delegate register completed
2021/09/03 14:10:07.841177 [info] [raftstore]: shard 69 peer 70 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:70 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.841179 [info] [raftstore]: shard 69 peer 70 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 received MsgPreVoteResp from 46 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 received MsgVoteResp from 46 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.841+0800","caller":"etcdserver/zap_raft.go:77","msg":"46 became leader at term 6"}
2021/09/03 14:10:07.841219 [info] [raftstore]: shard 69 peer 70 ********become leader now********
2021/09/03 14:10:07.843092 [info] prophet: resource 71 created with peers [{ID:73 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.843108 [info] prophet: resource 72 created with peers [{ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.843672 [info] [raftstore]: shard 71 peer 73 begin to create at store 1, peers: [{ID:73 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.843710 [info] [raftstore]: create init shard id:71 start:"b\000\000\000\000\000\000\000\"" end:"b\000\000\000\000\000\000\000#" epoch:<confVer:3 > state:WaittingCreate peers:<id:73 containerID:1 > unique:"1-0-34" 
2021/09/03 14:10:07.843729 [info] [raftstore]: shard 71 peer 73 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.843744 [info] [raftstore]: shard 71 peer 73 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.843746 [info] [raftstore]: shard 71 peer 73 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 switched to configuration voters=(73)"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 49 [peers: [49], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.843790 [info] [raftstore]: shard 71 peer 73 delegate register completed
2021/09/03 14:10:07.843794 [info] [raftstore]: shard 71 peer 73 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:73 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.843795 [info] [raftstore]: shard 71 peer 73 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 received MsgPreVoteResp from 49 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 received MsgVoteResp from 49 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"49 became leader at term 6"}
2021/09/03 14:10:07.843834 [info] [raftstore]: shard 72 peer 74 begin to create at store 1, peers: [{ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.843856 [info] [raftstore]: create init shard id:72 start:"b\000\000\000\000\000\000\000#" end:"b\000\000\000\000\000\000\000$" epoch:<confVer:3 > state:WaittingCreate peers:<id:74 containerID:1 > unique:"1-0-35" 
2021/09/03 14:10:07.843870 [info] [raftstore]: shard 72 peer 74 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.843884 [info] [raftstore]: shard 72 peer 74 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.843885 [info] [raftstore]: shard 72 peer 74 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a switched to configuration voters=(74)"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 4a [peers: [4a], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.843905 [info] [raftstore]: shard 72 peer 74 delegate register completed
2021/09/03 14:10:07.843908 [info] [raftstore]: shard 72 peer 74 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:74 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.843909 [info] [raftstore]: shard 72 peer 74 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a received MsgPreVoteResp from 4a at term 5"}
2021/09/03 14:10:07.843921 [info] [raftstore]: shard 71 peer 73 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a received MsgVoteResp from 4a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.843+0800","caller":"etcdserver/zap_raft.go:77","msg":"4a became leader at term 6"}
2021/09/03 14:10:07.843962 [info] [raftstore]: shard 72 peer 74 ********become leader now********
2021/09/03 14:10:07.847435 [info] prophet: resource 75 created with peers [{ID:77 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.847451 [info] prophet: resource 76 created with peers [{ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.848027 [info] [raftstore]: shard 75 peer 77 begin to create at store 1, peers: [{ID:77 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.848058 [info] [raftstore]: create init shard id:75 start:"b\000\000\000\000\000\000\000$" end:"b\000\000\000\000\000\000\000%" epoch:<confVer:3 > state:WaittingCreate peers:<id:77 containerID:1 > unique:"1-0-36" 
2021/09/03 14:10:07.848074 [info] [raftstore]: shard 75 peer 77 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.848088 [info] [raftstore]: shard 75 peer 77 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.848090 [info] [raftstore]: shard 75 peer 77 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d switched to configuration voters=(77)"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 4d [peers: [4d], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.848146 [info] [raftstore]: shard 75 peer 77 delegate register completed
2021/09/03 14:10:07.848152 [info] [raftstore]: shard 75 peer 77 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:77 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.848153 [info] [raftstore]: shard 75 peer 77 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d received MsgPreVoteResp from 4d at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d received MsgVoteResp from 4d at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4d became leader at term 6"}
2021/09/03 14:10:07.848194 [info] [raftstore]: shard 76 peer 78 begin to create at store 1, peers: [{ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:07.848214 [info] [raftstore]: create init shard id:76 start:"b\000\000\000\000\000\000\000%" end:"b\000\000\000\000\000\000\000&" epoch:<confVer:3 > state:WaittingCreate peers:<id:78 containerID:1 > unique:"1-0-37" 
2021/09/03 14:10:07.848226 [info] [raftstore]: shard 76 peer 78 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:07.848237 [info] [raftstore]: shard 76 peer 78 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:07.848238 [info] [raftstore]: shard 76 peer 78 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e switched to configuration voters=(78)"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 4e [peers: [4e], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:07.848259 [info] [raftstore]: shard 76 peer 78 delegate register completed
2021/09/03 14:10:07.848263 [info] [raftstore]: shard 76 peer 78 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:78 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:07.848264 [info] [raftstore]: shard 76 peer 78 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e received MsgPreVoteResp from 4e at term 5"}
2021/09/03 14:10:07.848273 [info] [raftstore]: shard 75 peer 77 ********become leader now********
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e received MsgVoteResp from 4e at term 6"}
{"level":"info","ts":"2021-09-03T14:10:07.848+0800","caller":"etcdserver/zap_raft.go:77","msg":"4e became leader at term 6"}
2021/09/03 14:10:07.848304 [info] [raftstore]: shard 76 peer 78 ********become leader now********
2021/09/03 14:10:07.850832 [info] prophet: resource 79 created with peers [{ID:81 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.850851 [info] prophet: resource 80 created with peers [{ID:82 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:07.850867 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:07.850908 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:45552->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:07.850924 [error] prophet: client read loop stopped
2021/09/03 14:10:07.851396 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:07.851432 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:07.851436 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:07.851437 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:07.851444 [info] prophet: watcher notifer exited
2021/09/03 14:10:07.851445 [info] prophet: coordinator is stopping
2021/09/03 14:10:07.851433 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:07.851447 [info] prophet: metrics are reset
2021/09/03 14:10:07.851451 [info] prophet: background jobs has been stopped
{"level":"info","ts":"2021-09-03T14:10:07.851+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:07.851455 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:07.851463 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:07.851470 [info] prophet: coordinator has been stopped
2021/09/03 14:10:07.851501 [info] prophet: watcher notifier stopped
2021/09/03 14:10:07.851515 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:07.851506 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:07.851524 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:07.852+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:07.854+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.856+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.856+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:07.856058 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:07.856080 [info] [transport]: transfer stopped
2021/09/03 14:10:07.856082 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:07.856088 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:07.856091 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856092 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:07.856097 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856099 [info] [transport]: send raft worker stopped
2021/09/03 14:10:07.856102 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856102 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856104 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:07.856108 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856109 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856110 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856106 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:07.856113 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:07.856107 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:07.856117 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:07.856143 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:07.856153 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestIssue123 (0.57s)
=== RUN   TestAddShardWithMultiGroups
2021/09/03 14:10:07.857140 [info] prophet: prophet logger set
2021/09/03 14:10:07.862838 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:07.862935 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:07.862947 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:07.862979 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:07.863+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:07.863+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:07.863+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:07.863+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:07.865+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"2.1372ms"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:07.867+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:07.869+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:07.871+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:07.873+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:07.873+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:07.873+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:07.873+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:07.873+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:07.874+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:07.874+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:10:07.952195 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:10:08.368455 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:08.368+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:10:08.369+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:08.369+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:10:08.370489 [info] prophet: start system time monitor 
2021/09/03 14:10:08.370866 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:08.371076 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:08.371089 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:08.371323 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:08.371836 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:08.371857 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:08.372334 [info] prophet: load 0 containers, cost 365.1µs
2021/09/03 14:10:08.372570 [info] prophet: load 0 resources, cost 221.9µs
2021/09/03 14:10:08.373234 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:08.373244 [info] prophet: client read loop started 
2021/09/03 14:10:08.373247 [info] prophet: client started
2021/09/03 14:10:08.373267 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:08.373269 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:08.373237 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:08.373301 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:08.373303 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:08.373304 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649408 deployPath:"not set" 
2021/09/03 14:10:08.373309 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:08.373315 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:08.373329 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:08.373705 [info] prophet: load 0 jobs
2021/09/03 14:10:08.373966 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:08.374491 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:08.374505 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:08.374518 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:08.374533 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:08.374846 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:08.374868 [info] [raftstore]: create init shard id:4 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:5 containerID:1 > group:1 
2021/09/03 14:10:08.376149 [info] prophet: container 1 limit added
2021/09/03 14:10:08.376194 [info] [raftstore]: prophet started
2021/09/03 14:10:08.376239 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:08.376249 [info] [raftstore]: raft worker 1/0 start
2021/09/03 14:10:08.376259 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:08.376261 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:08.376273 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:08.376276 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:08.376306 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:08.376312 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:08.376313 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:08.376370 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:08.376384 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:08.376394 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:08.376432 [info] [raftstore]: shard 4 peer 5 begin to create at store 1, peers: [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:08.376455 [info] [raftstore]: shard 4 peer 5 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:08.376458 [info] [raftstore]: shard 4 peer 5 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:08.376459 [info] [raftstore]: shard 4 peer 5 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 switched to configuration voters=(5)"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 5 [peers: [5], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:08.376472 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:08.376505 [info] [raftstore]: shard 4 peer 5 delegate register completed
2021/09/03 14:10:08.376611 [info] [raftstore]: shard 4 peer 5 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:5 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/09/03 14:10:08.376613 [info] [raftstore]: shard 4 peer 5 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgPreVoteResp from 5 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 received MsgVoteResp from 5 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.376+0800","caller":"etcdserver/zap_raft.go:77","msg":"5 became leader at term 6"}
2021/09/03 14:10:08.376679 [info] [raftstore]: starts with 2 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:08.376689 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:08.376690 [info] [raftstore]: shards started
2021/09/03 14:10:08.376692 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:08.376700 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:08.376711 [info] [raftstore]: router started
2021/09/03 14:10:08.376712 [info] [raftstore]: shard 4 peer 5 ********become leader now********
2021/09/03 14:10:08.376766 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:08.376839 [info] [raftstore]: router event loop task started
2021/09/03 14:10:08.376843 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:08.376856 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:08.376919 [info] prophet: new watcher 127.0.0.1:45566 added
2021/09/03 14:10:08.376977 [info] [raftstore]: start init event
2021/09/03 14:10:08.379056 [info] prophet: resource 7 created with peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:08.379532 [info] [raftstore]: shard 7 peer 8 begin to create at store 1, peers: [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:08.379570 [info] [raftstore]: create init shard id:7 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:8 containerID:1 > group:1 unique:"abc" 
2021/09/03 14:10:08.379604 [info] [raftstore]: shard 7 peer 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:08.379619 [info] [raftstore]: shard 7 peer 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:08.379620 [info] [raftstore]: shard 7 peer 8 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:08.379666 [info] [raftstore]: shard 7 peer 8 delegate register completed
2021/09/03 14:10:08.379671 [info] [raftstore]: shard 7 peer 8 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-1-0
2021/09/03 14:10:08.379680 [info] [raftstore]: shard 7 peer 8 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.379+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 6"}
2021/09/03 14:10:08.379717 [info] [raftstore]: shard 7 peer 8 ********become leader now********
2021/09/03 14:10:08.480135 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:08.480211 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:45564->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:08.480224 [error] prophet: client read loop stopped
2021/09/03 14:10:08.480518 [info] prophet: [prophet-leader/node-0]/lease: closed
{"level":"info","ts":"2021-09-03T14:10:08.480+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:08.480586 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:08.480604 [info] prophet: coordinator is stopping
2021/09/03 14:10:08.480609 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:08.480612 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:08.480617 [info] prophet: watcher notifer exited
2021/09/03 14:10:08.480624 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:08.480629 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:08.480634 [info] prophet: metrics are reset
2021/09/03 14:10:08.480636 [info] prophet: coordinator has been stopped
2021/09/03 14:10:08.480638 [info] prophet: background jobs has been stopped
2021/09/03 14:10:08.480632 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:08.480662 [info] prophet: watcher notifier stopped
2021/09/03 14:10:08.480666 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:08.480672 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:08.480674 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:08.481+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:08.483+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:08.484+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:08.484+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:08.484966 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:08.484988 [info] [transport]: transfer stopped
2021/09/03 14:10:08.484990 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:08.484992 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:08.484995 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.484998 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:08.485000 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485003 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485005 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485008 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485009 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:08.485012 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485011 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485015 [info] [transport]: send raft worker stopped
2021/09/03 14:10:08.485016 [info] [raftstore]: raft worker worker 1/0 exit
2021/09/03 14:10:08.485018 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:08.485019 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:08.485021 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:08.485016 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:08.485033 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:08.485061 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestAddShardWithMultiGroups (0.63s)
=== RUN   TestAppliedRules
2021/09/03 14:10:08.485935 [info] prophet: prophet logger set
2021/09/03 14:10:08.491853 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:08.492015 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:08.499352 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:08.499493 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:08.505983 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:08.506067 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:08.506078 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:08.506115 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:08.506+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:08.506+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:08.506+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:08.506+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:08.507+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.3558ms"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:08.510+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:08.512+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:08.513+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:08.515+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:10:08.581713 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:08.711+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:08.712+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:08.712+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:08.712+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:08.712301 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:08.712+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:08.712+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:08.713744 [info] prophet: start system time monitor 
2021/09/03 14:10:08.714094 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:08.714275 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:08.714289 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:08.714514 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:08.715073 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:08.715097 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:08.715524 [info] prophet: load 0 containers, cost 326.8µs
2021/09/03 14:10:08.715712 [info] prophet: load 0 resources, cost 173.9µs
2021/09/03 14:10:08.716371 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:08.716381 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:08.716386 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:08.716388 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:08.716425 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:08.716441 [info] prophet: client started
2021/09/03 14:10:08.716442 [info] prophet: client read loop started 
2021/09/03 14:10:08.716444 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:08.716447 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:08.716448 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:08.716464 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649408 deployPath:"not set" 
2021/09/03 14:10:08.716477 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:08.716873 [info] prophet: load 0 jobs
2021/09/03 14:10:08.717259 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:08.717682 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:08.717704 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:08.717691 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:08.717716 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:08.717927 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:08.719177 [info] prophet: container 1 limit added
2021/09/03 14:10:08.719241 [info] [raftstore]: prophet started
2021/09/03 14:10:08.719286 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:08.719307 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:08.719310 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:08.719324 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:08.719342 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:08.719358 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:08.719359 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
2021/09/03 14:10:08.719368 [info] prophet: container 1 heartbeat stream binded
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:08.719399 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:08.719405 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:08.719417 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:08.719+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:08.719459 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:08.719469 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:08.719470 [info] [raftstore]: shards started
2021/09/03 14:10:08.719472 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:08.719478 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:08.719487 [info] [raftstore]: router started
2021/09/03 14:10:08.719499 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:08.719508 [info] [raftstore]: router event loop task started
2021/09/03 14:10:08.719571 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:08.719490 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:08.719584 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:08.719698 [info] prophet: new watcher 127.0.0.1:45578 added
2021/09/03 14:10:08.719761 [info] [raftstore]: start init event
2021/09/03 14:10:08.721139 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:08.721151 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:10:08.721+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:08.721+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"3067b245cb1a0ff4","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"3067b245cb1a0ff4"}
2021/09/03 14:10:08.722741 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:3487952449251708916 peerURLs:"http://127.0.0.1:50001"  Members:[ID:3487952449251708916 peerURLs:"http://127.0.0.1:50001"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:08.722+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:08.724+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.2679ms"}
{"level":"warn","ts":"2021-09-03T14:10:09.225+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:09.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:10:09.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:10:09.711+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:10:09.720048 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:10:09.720063 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:09.720072 [info] prophet: coordinator is stopping
2021/09/03 14:10:09.720078 [info] prophet: watcher notifer exited
2021/09/03 14:10:09.720083 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:09.720088 [info] prophet: metrics are reset
2021/09/03 14:10:09.720091 [info] prophet: background jobs has been stopped
2021/09/03 14:10:09.720107 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:09.720114 [info] prophet: coordinator has been stopped
2021/09/03 14:10:09.720168 [info] prophet: watcher notifier stopped
2021/09/03 14:10:09.720192 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:09.720216 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:10:09.720228 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:09.720169 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:09.720245 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:09.720250 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"warn","ts":"2021-09-03T14:10:09.725+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:09.725+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"warn","ts":"2021-09-03T14:10:10.226+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:10.226+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:10:10.611+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:10:10.611+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:10:10.611+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:10:10.611+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 3"}
{"level":"warn","ts":"2021-09-03T14:10:10.726+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:11.226+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:11.411+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:10:11.411+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:10:11.411+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:10:11.411+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 4"}
{"level":"warn","ts":"2021-09-03T14:10:11.727+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:11.910+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:10:11.910+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:11.910+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:11.910+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 5"}
{"level":"warn","ts":"2021-09-03T14:10:12.228+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:12.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:12.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:12.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:12.410+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 6"}
{"level":"warn","ts":"2021-09-03T14:10:12.729+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:13.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:13.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:10:13.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:13.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 7"}
{"level":"warn","ts":"2021-09-03T14:10:13.230+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:13.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:10:13.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:10:13.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:10:13.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 8"}
{"level":"warn","ts":"2021-09-03T14:10:13.723+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"3067b245cb1a0ff4","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:10:13.723+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"3067b245cb1a0ff4","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:10:13.731+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:14.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:10:14.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:10:14.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:10:14.010+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 9"}
{"level":"warn","ts":"2021-09-03T14:10:14.232+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467293,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:14.725+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:10:14.725+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:10:14.725+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:10:14.729+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"3067b245cb1a0ff4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:14.729+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:14.729+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:14.729+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3067b245cb1a0ff4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:10:14.730+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:14.732+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.734+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"3067b245cb1a0ff4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"3067b245cb1a0ff4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"3067b245cb1a0ff4","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"3067b245cb1a0ff4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"3067b245cb1a0ff4","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:14.735+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"3067b245cb1a0ff4","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.736+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 9] ignored a MsgHeartbeatResp message with lower term from 3067b245cb1a0ff4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:14.810+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:10:14.810+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:10:14.810+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:14.810+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:14.811+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"warn","ts":"2021-09-03T14:10:15.226+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654747467295,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:15.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 10"}
{"level":"info","ts":"2021-09-03T14:10:15.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.511+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to 3067b245cb1a0ff4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:10:15.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.512+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 3067b245cb1a0ff4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:10:15.513+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.6918909s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","caller":"traceutil/trace.go:171","msg":"trace[159255616] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.6919521s","start":"2021-09-03T14:10:09.821+0800","end":"2021-09-03T14:10:15.513+0800","steps":["trace[159255616] 'agreement among raft nodes before linearized reading'  (duration: 5.6918895s)"],"step_count":1}
{"level":"warn","ts":"2021-09-03T14:10:15.513+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:09.821+0800","time spent":"5.6919885s","remote":"127.0.0.1:46004","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 elected leader 93ccda9956d988f4 at term 11"}
{"level":"warn","ts":"2021-09-03T14:10:15.513+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc000ba7180/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:15.513+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"3067b245cb1a0ff4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:15.514+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"3067b245cb1a0ff4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:15.514+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 switched to configuration voters=(3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:15.514+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"3067b245cb1a0ff4","added-peer-id":"3067b245cb1a0ff4","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:15.515+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"3067b245cb1a0ff4","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/3067b245cb1a0ff4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:15.515357 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:10:15.515+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:15.515+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:10:15.517174 [info] prophet: start system time monitor 
2021/09/03 14:10:15.517594 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:15.517609 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:15.517613 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:15.517636 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:15.517665 [info] prophet: client started
2021/09/03 14:10:15.517683 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:15.517686 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:15.517690 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:15.517713 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649415 deployPath:"not set" 
2021/09/03 14:10:15.517730 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:15.517752 [info] prophet: client read loop started 
2021/09/03 14:10:15.517766 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:15.517915 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:15.517970 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:15.517983 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:15.540867 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.7197414s
2021/09/03 14:10:15.540883 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:15.540886 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:10:15.542457 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:15.542469 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:15.543341 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:15.544328 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:15.544351 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:15.545489 [info] prophet: load 1 containers, cost 1.0297ms
2021/09/03 14:10:15.545836 [info] prophet: load 1 resources, cost 330.3µs
2021/09/03 14:10:15.546482 [info] prophet: watcher notifier stopped
2021/09/03 14:10:15.546497 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:15.546506 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:15.546866 [info] prophet: load 0 jobs
2021/09/03 14:10:15.619080 [info] [raftstore]: create local store with id 5
2021/09/03 14:10:15.619683 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:10:15.622441 [info] prophet: container 5 limit added
2021/09/03 14:10:15.622512 [info] [raftstore]: prophet started
2021/09/03 14:10:15.622553 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:10:15.622568 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:10:15.622597 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:15.622600 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:15.622606 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:15.622608 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:15.622609 [info] [raftstore]: shards started
2021/09/03 14:10:15.622611 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:15.622623 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:10:15.622664 [info] [raftstore]: router started
2021/09/03 14:10:15.622677 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:15.622763 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:15.622783 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:15.622777 [info] [raftstore]: router event loop task started
2021/09/03 14:10:15.622833 [info] prophet: new watcher 127.0.0.1:45646 added
2021/09/03 14:10:15.622953 [info] [raftstore]: start init event
2021/09/03 14:10:15.624242 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:15.624254 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:10:15.625+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:cfd695295511e63f RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:15.625+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:15.625682 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:15.635191 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:15.635209 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:10:15.635249 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:15.635254 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:15.635258 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:15.635838 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:10:15.635855 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:10:15.637259 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:10:15.639427 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:10:15.639443 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
2021/09/03 14:10:15.735001 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:15.735137 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:15.735149 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:15.735230 [info] prophet: new watcher 127.0.0.1:45650 added
2021/09/03 14:10:15.735356 [info] [raftstore]: start init event
2021/09/03 14:10:15.737473 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:15.737540 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:15.737560 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:15.739022 [info] prophet: container 1 heartbeat stream binded
{"level":"warn","ts":"2021-09-03T14:10:16.126+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:59823acfd00c6efe RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:16.127+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:16.127079 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:16.627+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:59823acfd00c6efe RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:16.627+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:16.628041 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:17.128+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:1764403553bcbf3 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:17.128+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:17.128644 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:17.629+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:1764403553bcbf3 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:17.629+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:17.629687 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:17.819372 [error] [raftstore]: shards pool create shards failed with rpc timeout
2021/09/03 14:10:17.819392 [info] [raftstore]: dynamic shards pool job stopped
{"level":"warn","ts":"2021-09-03T14:10:18.130+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:f516dea4b013019a RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:18.130+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:18.130376 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:18.547005 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:18.547020 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:18.549450 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:18.549467 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:10:18.631+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:f516dea4b013019a RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:18.631+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:18.631658 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:18.640458 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:18.640468 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:18.640472 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:18.640474 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:18.650154 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:10:18.6501315 +0800 CST m=+261.889069701, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:10:18.650177 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:10:18.650341 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.650425 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.650562 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.650587 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:18.650+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:10:18.650698 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 148 73 219 231 228 64 72 239 189 74 170 113 31 234 46 230 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.650720 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.650798 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:18.650871 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:10:18.651861 [info] [transport]: connected to store 5
2021/09/03 14:10:18.651927 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:10:18.651946 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:10:18.651963 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.651976 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:18.651977 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
2021/09/03 14:10:18.651980 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
{"level":"info","ts":"2021-09-03T14:10:18.651+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:18.652+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:18.652+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:10:18.652021 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:10:18.652025 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:10:18.652+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:18.652+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:10:18.652053 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.652073 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:10:18.652094 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.652125 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.652145 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:18.652+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:10:18.652189 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 57 92 178 64 165 194 77 230 169 60 231 29 100 87 174 100 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.652196 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:18.652260 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:10:18.652809 [info] [transport]: connected to store 1
2021/09/03 14:10:18.653016 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:18.653477 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:10:18.653880 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:10:18.6501315 +0800 CST m=+261.889069701, startAt:2021-09-03 14:10:18.6501704 +0800 CST m=+261.889108601, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 3.6772ms, 
2021/09/03 14:10:18.831308 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:10:18.831923 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<125>
2021/09/03 14:10:18.831992 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:10:18.832005 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:3 version:1 > term=<6> index=<8>
{"level":"info","ts":"2021-09-03T14:10:18.832+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:18.832+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:10:18.832+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:18.832+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:10:18.832202 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:10:18.832204 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:10:18.832215 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:10:18.832225 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:18.832246 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:10:18.832511 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:10:18.832545 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
2021/09/03 14:10:18.832599 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:18.832619 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"warn","ts":"2021-09-03T14:10:19.132+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:b8477d469267be22 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:19.132+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:19.132259 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:19.632+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:b8477d469267be22 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:19.633+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0038a5500/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:19.633039 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(599696461786513688 3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 switched to configuration voters=(599696461786513688 3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"3067b245cb1a0ff4","added-peer-id":"8528cc131d80118","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"8528cc131d80118","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.134+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
2021/09/03 14:10:20.135565 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:11  Member:ID:599696461786513688 peerURLs:"http://127.0.0.1:50002"  Members:[ID:599696461786513688 peerURLs:"http://127.0.0.1:50002"  ID:3487952449251708916 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:20.135+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:20.137+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"2.0135ms"}
{"level":"info","ts":"2021-09-03T14:10:20.141+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"8528cc131d80118","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:20.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:20.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:20.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8528cc131d80118 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:10:20.143+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:20.145+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.148+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.149+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"3067b245cb1a0ff4","to":"8528cc131d80118","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"3067b245cb1a0ff4","to":"8528cc131d80118","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"8528cc131d80118","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"8528cc131d80118","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.150+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"8528cc131d80118","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"8528cc131d80118","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:10:20.151+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 elected leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:20.153+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:20.153+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"8528cc131d80118","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:20.153+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"8528cc131d80118","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:20.153+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 switched to configuration voters=(3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:20.153+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"8528cc131d80118","added-peer-id":"3067b245cb1a0ff4","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:20.154+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 switched to configuration voters=(599696461786513688 3487952449251708916 10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:20.154+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"8528cc131d80118","added-peer-id":"8528cc131d80118","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:20.155+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"8528cc131d80118","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/8528cc131d80118/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:20.155615 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:10:20.155+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:20.156+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:10:20.157682 [info] prophet: start system time monitor 
2021/09/03 14:10:20.158265 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:20.158281 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:20.158285 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:20.158322 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:20.158365 [info] prophet: client read loop started 
2021/09/03 14:10:20.158420 [info] prophet: client started
2021/09/03 14:10:20.158454 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:20.158462 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:20.158493 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649420 deployPath:"not set" 
2021/09/03 14:10:20.158510 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:20.158456 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:20.158544 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:20.158732 [info] [raftstore]: create local store with id 7
2021/09/03 14:10:20.159413 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:10:20.162003 [info] prophet: container 7 limit added
2021/09/03 14:10:20.162083 [info] [raftstore]: prophet started
2021/09/03 14:10:20.162137 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:10:20.162158 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:10:20.162172 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:20.162175 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:20.162179 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:20.162180 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:20.162181 [info] [raftstore]: shards started
2021/09/03 14:10:20.162182 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:20.162188 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:10:20.162200 [info] [raftstore]: router started
2021/09/03 14:10:20.162222 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:20.162299 [info] [raftstore]: router event loop task started
2021/09/03 14:10:20.162302 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:20.162323 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:20.162417 [info] prophet: new watcher 127.0.0.1:45734 added
2021/09/03 14:10:20.162517 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:10:20.201+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"8528cc131d80118","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"8528cc131d80118","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"8528cc131d80118","to":"3067b245cb1a0ff4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"8528cc131d80118","to":"3067b245cb1a0ff4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"8528cc131d80118","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.236+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:20.245955 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:20.259372 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:10:20.2593487 +0800 CST m=+263.498287001, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/09/03 14:10:20.259393 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/09/03 14:10:20.259551 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.259627 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260013 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260043 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260092 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260118 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:20.260+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
{"level":"info","ts":"2021-09-03T14:10:20.260+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:10:20.260157 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 169 47 85 23 242 175 65 13 146 40 116 197 12 159 34 41 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.260200 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260183 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.260373 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:10:20.260819 [info] [transport]: connected to store 7
2021/09/03 14:10:20.260872 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:10:20.260897 [info] [raftstore]: shard 2 peer 8 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:10:20.260935 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.260953 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.260957 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:10:20.260+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:20.261+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:20.261+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:10:20.261016 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:10:20.261020 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:10:20.261+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:20.261+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:10:20.261071 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:10:20.261859 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/09/03 14:10:20.261938 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.261982 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262143 [info] [transport]: connected to store 1
2021/09/03 14:10:20.262178 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262195 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262222 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:20.262+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6 8)"}
2021/09/03 14:10:20.262245 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262262 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8}] Context:[10 32 10 16 74 207 172 120 71 22 66 55 156 221 251 11 55 198 29 200 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:10:20.262+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6 8)"}
2021/09/03 14:10:20.262288 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262293 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.262361 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.262422 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:10:20.262668 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<10> 
2021/09/03 14:10:20.263408 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:10:20.2593487 +0800 CST m=+263.498287001, startAt:2021-09-03 14:10:20.2593866 +0800 CST m=+263.498324801, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 4.0082ms, 
2021/09/03 14:10:20.265317 [info] prophet: placement rule {"group_id":"g1","id":"id1","start_key":"","end_key":"","role":"voter","count":3,"label_constraints":[{"key":"c","op":"in","values":["0","1"]}]} updated
2021/09/03 14:10:20.265473 [info] prophet: resource 9 created with peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:20.266505 [info] [raftstore]: shard 9 peer 10 begin to create at store 5, peers: [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:20.266553 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"abc" ruleGroups:"g1" 
2021/09/03 14:10:20.266593 [info] [raftstore]: shard 9 peer 10 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.266608 [info] [raftstore]: shard 9 peer 10 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.266610 [info] [raftstore]: shard 9 peer 10 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(10 11)"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:20.266647 [info] [raftstore]: shard 9 peer 10 delegate register completed
2021/09/03 14:10:20.266663 [info] [raftstore]: shard 9 peer 10 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:20.266664 [info] [raftstore]: shard 9 peer 10 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to b at term 5"}
2021/09/03 14:10:20.266689 [info] [raftstore]: shard 9 peer 10 ********become follower now********
2021/09/03 14:10:20.266593 [info] [raftstore]: shard 9 peer 11 begin to create at store 1, peers: [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:20.266745 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:1 > unique:"abc" ruleGroups:"g1" 
2021/09/03 14:10:20.266787 [info] [raftstore]: shard 9 peer 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.266794 [info] [raftstore]: shard 9 peer 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.266796 [info] [raftstore]: shard 9 peer 11 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(10 11)"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:20.266+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [a,b], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:20.266856 [info] [raftstore]: shard 9 peer 11 delegate register completed
2021/09/03 14:10:20.266871 [info] [raftstore]: shard 9 peer 11 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:20.366807 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:20.366911 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:45652->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:20.366924 [error] prophet: client read loop stopped
2021/09/03 14:10:20.368102 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:20.368114 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
2021/09/03 14:10:20.368145 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:20.368151 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:20.368155 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:20.368161 [info] prophet: watcher notifer exited
2021/09/03 14:10:20.368161 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:20.368166 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:20.368135 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:10:20.368182 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
{"level":"info","ts":"2021-09-03T14:10:20.368+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:20.368181 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:20.368194 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:20.368197 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:20.368198 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:20.368203 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:20.368207 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:20.368246 [info] prophet: metrics are reset
2021/09/03 14:10:20.368266 [info] prophet: background jobs has been stopped
2021/09/03 14:10:20.368250 [info] prophet: coordinator is stopping
2021/09/03 14:10:20.368272 [info] prophet: coordinator has been stopped
2021/09/03 14:10:20.368301 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:20.368320 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:20.368326 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:20.368327 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:20.368343 [info] prophet: watcher notifier stopped
2021/09/03 14:10:20.368363 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:20.368357 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:20.368371 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:20.368679 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:10:20.368697 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:10:20.368756 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:10:20.368774 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:10:20.369+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.369+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 11] starts to transfer leadership to 3067b245cb1a0ff4"}
2021/09/03 14:10:20.370621 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to 3067b245cb1a0ff4 after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [term 11] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became candidate at term 12"}
2021/09/03 14:10:20.370811 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 received MsgVoteResp from 3067b245cb1a0ff4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 11, index: 44] sent MsgVote request to 8528cc131d80118 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 11, index: 44] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.370+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 11] received a MsgVote message with higher term from 3067b245cb1a0ff4 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 11, index: 44, vote: 0] cast MsgVote for 3067b245cb1a0ff4 [logterm: 11, index: 44] at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [term: 11] received a MsgVote message with higher term from 3067b245cb1a0ff4 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [logterm: 11, index: 44, vote: 0] cast MsgVote for 3067b245cb1a0ff4 [logterm: 11, index: 44] at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.371+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 lost leader 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 received MsgVoteResp from 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 elected leader 3067b245cb1a0ff4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 elected leader 3067b245cb1a0ff4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:20.372+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 3067b245cb1a0ff4 at term 12"}
2021/09/03 14:10:20.374886 [info] prophet: [prophet-leader/node-1]/campaign: completed, start keepalive
2021/09/03 14:10:20.374901 [info] prophet: ********node-1 become to leader now********
2021/09/03 14:10:20.377033 [info] prophet: load 3 containers, cost 2.0317ms
2021/09/03 14:10:20.377378 [info] prophet: load 1 resources, cost 332.4µs
2021/09/03 14:10:20.378107 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:20.378184 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:20.378479 [info] prophet: load 0 jobs
2021/09/03 14:10:20.419091 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:10:20.419389 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:10:20.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:20.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:10:20.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:20.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/09/03 14:10:20.419583 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:20.419605 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:10 >,size=<125>
2021/09/03 14:10:20.419688 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:10:20.419725 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:10:20.419737 [info] [transport]: shard 2 pending snap sent succ, size=<125>, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:10:20.469122 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"3067b245cb1a0ff4","took":"100.6736ms"}
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"3067b245cb1a0ff4","error":"failed to read 3067b245cb1a0ff4 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:20.470+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"8528cc131d80118","error":"failed to read 8528cc131d80118 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"3067b245cb1a0ff4","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"3067b245cb1a0ff4","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"8528cc131d80118","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream MsgApp v2 (peer 93ccda9956d988f4 failed to find local node 3067b245cb1a0ff4)"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"8528cc131d80118","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:20.471+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 8528cc131d80118)"}
{"level":"info","ts":"2021-09-03T14:10:20.473+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:10:20.519886 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:20.619010 [info] [raftstore]: shard 2 peer 8 received a snapshot at 10
2021/09/03 14:10:20.619030 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:10:20.619037 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:10:20.619048 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:20.619060 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:10:20.619098 [error] [transport]: shard 2 send msg shardID:2 from:<id:6 containerID:5 role:Learner > to:<id:3 containerID:1 > message:<type:MsgHeartbeatRespMsgHeartbeatResp to:3 from:6 term:6 logTerm:0 index:0 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 6 to 3 failed with write tcp 127.0.0.1:48702->127.0.0.1:10000: write: broken pipe
2021/09/03 14:10:20.619247 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.619293 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:20.619314 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/09/03 14:10:20.619345 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10}
2021/09/03 14:10:20.620391 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:20.623946 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:20.624020 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:20.624031 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:20.624085 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:10:20.720032 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:20.720103 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:20.819217 [info] [transport]: connected to store 1
2021/09/03 14:10:20.820374 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:20.830+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:20.920094 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:21.020166 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:21.119723 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:21.220187 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:21.320104 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:21.369413 [info] prophet: client start init connection to leader 127.0.0.1:30001
2021/09/03 14:10:21.369524 [info] prophet: client start connect to leader 127.0.0.1:30001
2021/09/03 14:10:21.369538 [info] prophet: watcher init leader connection 127.0.0.1:30001 succeed
2021/09/03 14:10:21.369659 [info] prophet: new watcher 127.0.0.1:49936 added
2021/09/03 14:10:21.369849 [info] [raftstore]: start init event
2021/09/03 14:10:21.420088 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:21.473+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:21.473+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:21.473965 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:21.473994 [info] [transport]: transfer stopped
2021/09/03 14:10:21.473996 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:21.473998 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:21.474003 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:21.474008 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:21.474010 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:21.474015 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474019 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474020 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474022 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474014 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474024 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474011 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474024 [info] [transport]: send raft worker stopped
2021/09/03 14:10:21.474027 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:21.474028 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:21.474032 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:21.474042 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:10:21.474053 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:10:21.474081 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:21.474121 [error] prophet: client read resp from leader 127.0.0.1:30001 failed with read tcp 127.0.0.1:49868->127.0.0.1:30001: use of closed network connection
2021/09/03 14:10:21.474126 [error] prophet: client read loop stopped
{"level":"warn","ts":"2021-09-03T14:10:21.474+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:21.475314 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:10:21.475355 [info] prophet: coordinator stops running 
2021/09/03 14:10:21.475361 [info] prophet: coordinator is stopping
2021/09/03 14:10:21.475363 [info] prophet: coordinator has been stopped
2021/09/03 14:10:21.475369 [error] prophet: [prophet-leader/node-1]/lease: keep lease exit
2021/09/03 14:10:21.475377 [info] prophet: [prophet-leader/node-1]/keepalive: exit with context done
{"level":"info","ts":"2021-09-03T14:10:21.475+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:10:21.475385 [info] prophet: [prophet-leader/node-1]/lease: exit with context done
2021/09/03 14:10:21.475408 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:21.475416 [info] prophet: watcher notifer exited
2021/09/03 14:10:21.475436 [info] prophet: metrics are reset
2021/09/03 14:10:21.475440 [info] prophet: background jobs has been stopped
2021/09/03 14:10:21.475466 [info] prophet: watcher notifier stopped
2021/09/03 14:10:21.475484 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:21.475492 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:21.475487 [info] [raftstore]: *********Become prophet follower*********
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"3067b245cb1a0ff4","current-leader-member-id":"3067b245cb1a0ff4","transferee-member-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [term 12] starts to transfer leadership to 8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 sends MsgTimeoutNow to 8528cc131d80118 immediately as 8528cc131d80118 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [term 12] received MsgTimeoutNow from 3067b245cb1a0ff4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 received MsgVoteResp from 8528cc131d80118 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [logterm: 12, index: 48] sent MsgVote request to 3067b245cb1a0ff4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [logterm: 12, index: 48] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.476+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 lost leader 3067b245cb1a0ff4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.477+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [term: 12] received a MsgVote message with higher term from 8528cc131d80118 [term: 13]"}
{"level":"info","ts":"2021-09-03T14:10:21.477+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.477+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"3067b245cb1a0ff4 [logterm: 12, index: 48, vote: 0] cast MsgVote for 8528cc131d80118 [logterm: 12, index: 48] at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.477+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 lost leader 3067b245cb1a0ff4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.478+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 received MsgVoteResp from 3067b245cb1a0ff4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.478+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:21.478+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became leader at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.478+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 elected leader 8528cc131d80118 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:21.478+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 3067b245cb1a0ff4 elected leader 8528cc131d80118 at term 13"}
{"level":"warn","ts":"2021-09-03T14:10:21.479+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:21.479+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:10:21.575844 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:21.576+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"3067b245cb1a0ff4","old-leader-member-id":"3067b245cb1a0ff4","new-leader-member-id":"8528cc131d80118","took":"100.2636ms"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"8528cc131d80118","error":"failed to read 8528cc131d80118 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"3067b245cb1a0ff4","remote-peer-id":"8528cc131d80118"}
{"level":"info","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"8528cc131d80118"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"3067b245cb1a0ff4","remote-peer-id-stream-handler":"3067b245cb1a0ff4","remote-peer-id-from":"8528cc131d80118","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"3067b245cb1a0ff4","remote-peer-id-stream-handler":"3067b245cb1a0ff4","remote-peer-id-from":"8528cc131d80118","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:21.577+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"3067b245cb1a0ff4","error":"failed to dial 3067b245cb1a0ff4 on stream Message (peer 3067b245cb1a0ff4 failed to find local node 8528cc131d80118)"}
{"level":"info","ts":"2021-09-03T14:10:21.579+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:10:21.623448 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:21.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:21.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:21.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:21.718+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to b at term 5"}
{"level":"warn","ts":"2021-09-03T14:10:21.742+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:21.842+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:22.442+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"8528cc131d80118 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:10:22.442+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became follower at term 13"}
{"level":"info","ts":"2021-09-03T14:10:22.442+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 8528cc131d80118 lost leader 8528cc131d80118 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:22.580+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:22.580+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:10:22.580189 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:10:22.580220 [info] [transport]: transfer stopped
2021/09/03 14:10:22.580222 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:10:22.580225 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:10:22.580230 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:10:22.580236 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580237 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:22.580240 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:22.580246 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580247 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580243 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580253 [info] [transport]: send raft worker stopped
2021/09/03 14:10:22.580249 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:22.580253 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580255 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580259 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:22.580260 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580262 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:10:22.580265 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:22.580276 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:10:22.580279 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:10:22.768449 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:10:22.768481 [error] prophet: client read loop stopped
2021/09/03 14:10:22.768504 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:10:22.768509 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:22.768724 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:22.774077 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:10:22.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:22.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:22.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:22.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:22.918+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:10:22.918880 [info] [raftstore]: shard 2 peer 8 ********become follower now********
{"level":"info","ts":"2021-09-03T14:10:22.919+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 no leader at term 13; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:10:23.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:10:23.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:10:23.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 received MsgVoteResp from 8528cc131d80118 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:23.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [logterm: 13, index: 49] sent MsgVote request to 3067b245cb1a0ff4 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:23.141+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"8528cc131d80118 [logterm: 13, index: 49] sent MsgVote request to 93ccda9956d988f4 at term 14"}
2021/09/03 14:10:23.163226 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:23.420+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":78948964753829134,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:23.580+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:22.580+0800","time spent":"1.0005016s","remote":"127.0.0.1:57010","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:10:23.580+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0069e2000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:10:23.581025 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:10:23.581+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0069e2000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:23.581092 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<3.2104345s> errors context canceled
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0069e2000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:23.581141 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:10:23.581144 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:20.370+0800","time spent":"3.2103685s","remote":"127.0.0.1:57010","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0069e2000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Unavailable desc = error reading from server: EOF"}
2021/09/03 14:10:23.581205 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"662.054ms","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/prophet/containers/00000000000000000005\" ","response":"","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:23.581+0800","caller":"traceutil/trace.go:171","msg":"trace[1073524318] range","detail":"{range_begin:/prophet/containers/00000000000000000005; range_end:; }","duration":"662.1012ms","start":"2021-09-03T14:10:22.919+0800","end":"2021-09-03T14:10:23.581+0800","steps":["trace[1073524318] 'agreement among raft nodes before linearized reading'  (duration: 662.0536ms)"],"step_count":1}
2021/09/03 14:10:23.581278 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 6 failed with not connected
{"level":"warn","ts":"2021-09-03T14:10:23.581+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:22.919+0800","time spent":"662.151ms","remote":"127.0.0.1:57010","response type":"/etcdserverpb.KV/Range","request count":0,"request size":42,"response count":0,"response size":0,"request content":"key:\"/prophet/containers/00000000000000000005\" "}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"8528cc131d80118","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"warn","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"3067b245cb1a0ff4"}
{"level":"info","ts":"2021-09-03T14:10:23.582+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"8528cc131d80118","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.583+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:23.584+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
2021/09/03 14:10:24.162767 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:24.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.419+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
{"level":"warn","ts":"2021-09-03T14:10:24.419+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0069e2000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:24.419331 [error] prophet: read /prophet/containers/00000000000000000005 from etcd failed with context canceled
2021/09/03 14:10:24.419383 [error] [transport]: shard 2 send msg shardID:2 from:<id:8 containerID:7 role:Learner > to:<id:6 containerID:5 > message:<type:MsgPreVoteMsgPreVote to:6 from:8 term:7 logTerm:6 index:10 commit:0 snapshot:<metadata:<conf_state:<auto_leave:false > index:0 term:0 > > reject:false rejectHint:0 > shardEpoch:<confVer:5 version:1 >  from 8 to 6 failed with not connected
{"level":"info","ts":"2021-09-03T14:10:24.585+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:24.585+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:10:24.585253 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:10:24.585279 [info] [transport]: transfer stopped
2021/09/03 14:10:24.585281 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:10:24.585282 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:10:24.585288 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:10:24.585294 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:24.585297 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585298 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:24.585304 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585302 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585306 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585308 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585306 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585310 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.585312 [info] [transport]: send raft worker stopped
2021/09/03 14:10:24.585313 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:24.585316 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:24.585320 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:10:24.585328 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestAppliedRules (16.10s)
2021/09/03 14:10:24.585355 [info] [transport]: send snapshot worker stopped
=== RUN   TestSplit
2021/09/03 14:10:24.586591 [info] prophet: prophet logger set
2021/09/03 14:10:24.593498 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:24.593622 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:24.593633 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:24.593668 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:24.593+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:24.593+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:24.593+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:24.593+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:24.595+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.4785ms"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:24.598+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:24.600+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:24.602+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.605+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
2021/09/03 14:10:24.699439 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:24.699+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:24.700+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:10:24.700+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:24.700+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:10:24.701550 [info] prophet: start system time monitor 
2021/09/03 14:10:24.702118 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:24.702364 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:24.702377 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:24.702694 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:24.703354 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:24.703378 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:24.703954 [info] prophet: load 0 containers, cost 471.2µs
2021/09/03 14:10:24.704218 [info] prophet: load 0 resources, cost 246.6µs
2021/09/03 14:10:24.705000 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:24.705021 [info] prophet: client read loop started 
2021/09/03 14:10:24.705004 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:24.705067 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:24.705081 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:24.705098 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:24.705119 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:24.705011 [info] prophet: client started
2021/09/03 14:10:24.705186 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:24.705189 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:24.705216 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649424 deployPath:"not set" 
2021/09/03 14:10:24.705231 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:24.705712 [info] prophet: load 0 jobs
2021/09/03 14:10:24.705987 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:24.706015 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:24.706763 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:24.707336 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:24.707349 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:24.707638 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:24.709392 [info] prophet: container 1 limit added
2021/09/03 14:10:24.709443 [info] [raftstore]: prophet started
2021/09/03 14:10:24.709489 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:24.709511 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:24.709522 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:24.709523 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:24.709550 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:24.709601 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:24.709631 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:24.709635 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:24.709722 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:24.709730 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:24.709741 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.709+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:24.709782 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:24.709788 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:24.709789 [info] [raftstore]: shards started
2021/09/03 14:10:24.709791 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:24.709799 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:24.709809 [info] [raftstore]: router started
2021/09/03 14:10:24.709859 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:24.709860 [info] [raftstore]: router event loop task started
2021/09/03 14:10:24.709864 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:24.709976 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:24.709993 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:24.710078 [info] prophet: new watcher 127.0.0.1:46090 added
2021/09/03 14:10:24.710163 [info] [raftstore]: start init event
2021/09/03 14:10:24.809920 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:10:24.809964 [info] [raftstore]: shard 2 try to split, size 60 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50] [122 0 0 0 0 0 0 0 0 107 101 121 51]]
2021/09/03 14:10:24.810060 [info] prophet: alloc ids [6] for resource 5 split
2021/09/03 14:10:24.810082 [info] prophet: alloc ids [8] for resource 7 split
2021/09/03 14:10:24.810296 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:10:24.810319 [info] [raftstore]: shard 5 peer 6 begin to create at store 1, peers: [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:10:24.810339 [info] [raftstore]: shard 5 peer 6 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:24.810345 [info] [raftstore]: shard 5 peer 6 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:24.810346 [info] [raftstore]: shard 5 peer 6 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:24.810406 [info] [raftstore]: shard 5 peer 6 delegate register completed
2021/09/03 14:10:24.810411 [info] [raftstore]: shard 5 peer 6 added, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:24.810412 [info] [raftstore]: shard 5 peer 6 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became leader at term 6"}
2021/09/03 14:10:24.810437 [info] [raftstore]: shard 7 peer 8 begin to create at store 1, peers: [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:10:24.810452 [info] [raftstore]: shard 7 peer 8 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:24.810466 [info] [raftstore]: shard 7 peer 8 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:24.810467 [info] [raftstore]: shard 7 peer 8 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(8)"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [8], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:24.810486 [info] [raftstore]: shard 7 peer 8 delegate register completed
2021/09/03 14:10:24.810489 [info] [raftstore]: shard 7 peer 8 added, epoch {ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:24.810490 [info] [raftstore]: shard 7 peer 8 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:24.810+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became leader at term 6"}
2021/09/03 14:10:24.810520 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[107 101 121 51] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:7 Start:[107 101 121 51] End:[] Epoch:{ConfVer:1 Version:3 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:24.810548 [info] [raftstore]: shard 7 peer 8 ********become leader now********
2021/09/03 14:10:24.810564 [info] [raftstore]: shard 5 peer 6 ********become leader now********
2021/09/03 14:10:24.810655 [info] prophet: resource 2 version changed from 1 to 3
2021/09/03 14:10:24.811814 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:24.811879 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46088->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:24.811890 [error] prophet: client read loop stopped
2021/09/03 14:10:24.812535 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:24.812583 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"info","ts":"2021-09-03T14:10:24.812+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:24.812599 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:24.812604 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:24.812607 [info] prophet: coordinator is stopping
2021/09/03 14:10:24.812610 [info] prophet: coordinator has been stopped
2021/09/03 14:10:24.812617 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:24.812620 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:24.812623 [info] prophet: watcher notifer exited
2021/09/03 14:10:24.812630 [info] prophet: metrics are reset
2021/09/03 14:10:24.812642 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:24.812661 [info] prophet: background jobs has been stopped
{"level":"info","ts":"2021-09-03T14:10:24.812+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
2021/09/03 14:10:24.812688 [info] prophet: watcher notifier stopped
2021/09/03 14:10:24.812706 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:24.812688 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:24.812713 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:24.815+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.816+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.816+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:24.816226 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:24.816251 [info] [transport]: transfer stopped
2021/09/03 14:10:24.816254 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:24.816256 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:24.816260 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:24.816265 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816269 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:24.816274 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:24.816271 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816272 [info] [transport]: send raft worker stopped
2021/09/03 14:10:24.816277 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816275 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816279 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:24.816277 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:24.816280 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816283 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816287 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:24.816288 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816288 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:24.816307 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestSplit (0.23s)
=== RUN   TestCustomSplit
2021/09/03 14:10:24.817528 [info] prophet: prophet logger set
2021/09/03 14:10:24.823401 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:24.823518 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:24.823528 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:24.823575 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:24.823+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:24.823+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:24.823+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:24.823+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:24.825+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.5148ms"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:24.828+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:24.830+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:24.832+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:24.834+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:24.834+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:24.834+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:24.835+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:24.835+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.835+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:24.835+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
2021/09/03 14:10:24.913267 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.029+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:25.030+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:25.030+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:25.030+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:25.030412 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:25.030+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:25.030+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:25.031931 [info] prophet: start system time monitor 
2021/09/03 14:10:25.032447 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:25.032706 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:25.032718 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:25.032990 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:25.033548 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:25.033565 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:25.034321 [info] prophet: load 0 containers, cost 627.4µs
2021/09/03 14:10:25.034517 [info] prophet: load 0 resources, cost 180.8µs
2021/09/03 14:10:25.035412 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:25.035420 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:25.035422 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:25.035426 [info] prophet: client read loop started 
2021/09/03 14:10:25.035414 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:25.035415 [info] prophet: client started
2021/09/03 14:10:25.035500 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:25.035516 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:25.035542 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649425 deployPath:"not set" 
2021/09/03 14:10:25.035559 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:25.035547 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:25.035573 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:25.035820 [info] prophet: load 0 jobs
2021/09/03 14:10:25.036084 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:25.036625 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:25.036648 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:25.036651 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:25.036651 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:25.036870 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:25.038252 [info] prophet: container 1 limit added
2021/09/03 14:10:25.038308 [info] [raftstore]: prophet started
2021/09/03 14:10:25.038338 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:25.038346 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:25.038358 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:25.038360 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:25.038374 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:25.038397 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:25.038402 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:25.038403 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:25.038465 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:25.038480 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:25.038482 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.038+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:25.038518 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:25.038528 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:25.038528 [info] [raftstore]: shards started
2021/09/03 14:10:25.038530 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:25.038537 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:25.038546 [info] [raftstore]: router started
2021/09/03 14:10:25.038557 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:25.038559 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:25.038572 [info] [raftstore]: router event loop task started
2021/09/03 14:10:25.038623 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:25.038636 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:25.038709 [info] prophet: new watcher 127.0.0.1:46100 added
2021/09/03 14:10:25.038751 [info] [raftstore]: start init event
2021/09/03 14:10:25.139642 [info] [raftstore]: shard 2 start split check job from [122 0 0 0 0 0 0 0 0] to [122 0 0 0 0 0 0 0 1]
2021/09/03 14:10:25.139685 [info] [raftstore]: shard 2 try to split, size 60 bytes splitKeys [[122 0 0 0 0 0 0 0 0 107 101 121 50]]
2021/09/03 14:10:25.139819 [info] prophet: alloc ids [6] for resource 5 split
2021/09/03 14:10:25.140132 [info] [raftstore]: shard 2 update to {ID:2 Start:[] End:[107 101 121 50] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} by post applt split
2021/09/03 14:10:25.140168 [info] [raftstore]: shard 5 peer 6 begin to create at store 1, peers: [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because split by shard 2
2021/09/03 14:10:25.140204 [info] [raftstore]: shard 5 peer 6 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:25.140225 [info] [raftstore]: shard 5 peer 6 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:25.140228 [info] [raftstore]: shard 5 peer 6 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:25.140325 [info] [raftstore]: shard 5 peer 6 delegate register completed
2021/09/03 14:10:25.140347 [info] [raftstore]: shard 5 peer 6 added, epoch {ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:25.140350 [info] [raftstore]: shard 5 peer 6 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.140+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became leader at term 6"}
2021/09/03 14:10:25.140442 [info] [raftstore]: shard 2 new shard added, new shards [{ID:5 Start:[107 101 121 50] End:[] Epoch:{ConfVer:1 Version:2 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:25.140477 [info] [raftstore]: shard 5 peer 6 ********become leader now********
2021/09/03 14:10:25.140559 [info] prophet: resource 2 version changed from 1 to 2
2021/09/03 14:10:25.142331 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:25.142401 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46098->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:25.142413 [error] prophet: client read loop stopped
2021/09/03 14:10:25.142690 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:25.142731 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:25.142740 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:25.142745 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:25.142757 [info] prophet: watcher notifer exited
{"level":"info","ts":"2021-09-03T14:10:25.142+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:25.142763 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:25.142768 [info] prophet: coordinator is stopping
2021/09/03 14:10:25.142770 [info] prophet: coordinator has been stopped
2021/09/03 14:10:25.142783 [info] prophet: metrics are reset
2021/09/03 14:10:25.142798 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:25.142800 [info] prophet: background jobs has been stopped
2021/09/03 14:10:25.142841 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:25.142844 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:25.142844 [info] prophet: watcher notifier stopped
2021/09/03 14:10:25.142847 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:25.142790 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"info","ts":"2021-09-03T14:10:25.143+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:25.146+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:25.148+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:25.148+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:25.148331 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:25.148353 [info] [transport]: transfer stopped
2021/09/03 14:10:25.148355 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:25.148357 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:25.148359 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148361 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:25.148365 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148367 [info] [transport]: send raft worker stopped
2021/09/03 14:10:25.148371 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148372 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:25.148376 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148376 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148378 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:25.148379 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148372 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148373 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:25.148374 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:25.148388 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:25.148394 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:25.148399 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestCustomSplit (0.33s)
=== RUN   TestSpeedupAddShard
2021/09/03 14:10:25.149922 [info] prophet: prophet logger set
2021/09/03 14:10:25.155900 [warning] [raftstore]: ########## adjust Raft.TickInterval from 2s to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:25.156057 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:25.162348 [warning] [raftstore]: ########## adjust Raft.TickInterval from 2s to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:25.162562 [info] [raftstore]: start scan gc snap files
2021/09/03 14:10:25.170152 [warning] [raftstore]: ########## adjust Raft.TickInterval from 2s to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:25.170243 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:25.170256 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:25.170318 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:25.170+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:25.170+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:25.170+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:25.170+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:25.172+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.4611ms"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:25.174+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:25.176+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:25.178+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:25.180+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:10:25.243050 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:25.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:25.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:10:25.476184 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:25.476+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
2021/09/03 14:10:25.478366 [info] prophet: start system time monitor 
2021/09/03 14:10:25.478679 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:25.478843 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:25.478856 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:25.479138 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:25.479641 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:25.479660 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:25.480327 [info] prophet: load 0 containers, cost 171.6µs
2021/09/03 14:10:25.480464 [info] prophet: load 0 resources, cost 119µs
2021/09/03 14:10:25.481161 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:25.481174 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:25.481176 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:25.481180 [info] prophet: client read loop started 
2021/09/03 14:10:25.481170 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:25.481171 [info] prophet: client started
2021/09/03 14:10:25.481270 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:25.481272 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:25.481294 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649425 deployPath:"not set" 
2021/09/03 14:10:25.481306 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:25.481302 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:25.481319 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:25.481685 [info] prophet: load 0 jobs
2021/09/03 14:10:25.481923 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:25.482483 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:25.482498 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:25.482505 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:25.482495 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:25.482742 [info] [raftstore]: create init shard id:2 start:"a" end:"b" epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:25.484147 [info] prophet: container 1 limit added
2021/09/03 14:10:25.484223 [info] [raftstore]: prophet started
2021/09/03 14:10:25.484263 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:25.484273 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:25.484286 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:25.484303 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:25.484311 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:25.484328 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:25.484333 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:25.484343 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:25.484396 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:25.484403 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:25.484413 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:25.484+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:25.484457 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:25.484466 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:25.484467 [info] [raftstore]: shards started
2021/09/03 14:10:25.484473 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:25.484479 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:25.484488 [info] [raftstore]: router started
2021/09/03 14:10:25.484498 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:25.484518 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:25.484548 [info] [raftstore]: router event loop task started
2021/09/03 14:10:25.484594 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:25.484607 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:25.484662 [info] prophet: new watcher 127.0.0.1:46112 added
2021/09/03 14:10:25.484790 [info] [raftstore]: start init event
2021/09/03 14:10:25.486260 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:25.486274 [info] [raftstore]: begin to start prophet
{"level":"info","ts":"2021-09-03T14:10:25.487+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:25.487+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"fdc3b7b4fd563384","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:25.487+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.487+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.487+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"fdc3b7b4fd563384"}
2021/09/03 14:10:25.488858 [info] prophet: node-1 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:2  Member:ID:18285660900026626948 peerURLs:"http://127.0.0.1:50001"  Members:[ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:18285660900026626948 peerURLs:"http://127.0.0.1:50001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40001"]}
{"level":"info","ts":"2021-09-03T14:10:25.488+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:25.489+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-1","data-dir":"/tmp/cube/node-1/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-1/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:25.490+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-1/prophet/member/snap/db","took":"1.4276ms"}
{"level":"warn","ts":"2021-09-03T14:10:25.991+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:26.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"93ccda9956d988f4 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:10:26.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:10:26.475+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 2"}
2021/09/03 14:10:26.484655 [info] prophet: [prophet-leader/node-0]/keepalive: exit with etcd leader changed
2021/09/03 14:10:26.484676 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:26.484697 [info] prophet: coordinator is stopping
2021/09/03 14:10:26.484702 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:26.484703 [info] prophet: watcher notifer exited
2021/09/03 14:10:26.484714 [info] prophet: metrics are reset
2021/09/03 14:10:26.484717 [info] prophet: background jobs has been stopped
2021/09/03 14:10:26.484727 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:26.484743 [info] prophet: coordinator has been stopped
2021/09/03 14:10:26.484781 [info] prophet: watcher notifier stopped
2021/09/03 14:10:26.484796 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:26.484825 [error] prophet: [prophet-leader/node-0]/lease: keep lease failed with context canceled, retry later
2021/09/03 14:10:26.484825 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:26.484837 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:26.484838 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:26.484830 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"warn","ts":"2021-09-03T14:10:26.492+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:26.492+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
2021/09/03 14:10:26.582141 [info] prophet: [prophet-leader/node-2]/loop: exit
{"level":"warn","ts":"2021-09-03T14:10:26.993+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:26.993+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 no leader at term 2; dropping index reading msg"}
{"level":"info","ts":"2021-09-03T14:10:27.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:10:27.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:10:27.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:10:27.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 3"}
{"level":"warn","ts":"2021-09-03T14:10:27.493+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:27.994+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:28.075+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 3"}
{"level":"info","ts":"2021-09-03T14:10:28.075+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 4"}
{"level":"info","ts":"2021-09-03T14:10:28.075+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 4"}
{"level":"info","ts":"2021-09-03T14:10:28.075+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 4"}
{"level":"warn","ts":"2021-09-03T14:10:28.495+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:28.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 4"}
{"level":"info","ts":"2021-09-03T14:10:28.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:28.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:28.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 5"}
{"level":"warn","ts":"2021-09-03T14:10:28.995+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:29.495+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:29.575+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:29.575+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:29.575+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:29.575+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 6"}
{"level":"warn","ts":"2021-09-03T14:10:29.996+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:30.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:30.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:10:30.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:30.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 7"}
{"level":"warn","ts":"2021-09-03T14:10:30.489+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_RAFT_MESSAGE","remote-peer-id":"fdc3b7b4fd563384","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:10:30.489+0800","caller":"rafthttp/probing_status.go:68","msg":"prober detected unhealthy status","round-tripper-name":"ROUND_TRIPPER_SNAPSHOT","remote-peer-id":"fdc3b7b4fd563384","rtt":"0s"}
{"level":"warn","ts":"2021-09-03T14:10:30.497+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:30.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 7"}
{"level":"info","ts":"2021-09-03T14:10:30.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 8"}
{"level":"info","ts":"2021-09-03T14:10:30.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 8"}
{"level":"info","ts":"2021-09-03T14:10:30.975+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 8"}
{"level":"warn","ts":"2021-09-03T14:10:30.997+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733277,"retry-timeout":"500ms"}
{"level":"warn","ts":"2021-09-03T14:10:31.491+0800","caller":"etcdserver/v3_server.go:827","msg":"timed out waiting for read index response (local node might have slow network)","timeout":"6s"}
{"level":"warn","ts":"2021-09-03T14:10:31.491+0800","caller":"etcdserver/cluster_util.go:428","msg":"failed to convert response","address":"http://127.0.0.1:50000/downgrade/enabled","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"warn","ts":"2021-09-03T14:10:31.491+0800","caller":"etcdserver/cluster_util.go:381","msg":"failed to get downgrade enabled status","remote-member-id":"93ccda9956d988f4","error":"strconv.ParseBool: parsing \"failed linearized read: context deadline exceeded\\n\": invalid syntax"}
{"level":"info","ts":"2021-09-03T14:10:31.494+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"fdc3b7b4fd563384","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:31.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:31.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:31.494+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft fdc3b7b4fd563384 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:10:31.496+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:31.498+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:31.500+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.500+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:31.500+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.500+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"fdc3b7b4fd563384","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:31.501+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"fdc3b7b4fd563384","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"fdc3b7b4fd563384","initial-advertise-peer-urls":["http://127.0.0.1:50001"],"listen-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"],"listen-client-urls":["http://127.0.0.1:40001"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"fdc3b7b4fd563384","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:10:31.502+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 5)"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"fdc3b7b4fd563384","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:31.503+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"fdc3b7b4fd563384","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.504+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 8] ignored a MsgHeartbeatResp message with lower term from fdc3b7b4fd563384 [term: 2]"}
{"level":"info","ts":"2021-09-03T14:10:31.875+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 8"}
{"level":"info","ts":"2021-09-03T14:10:31.875+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 9"}
{"level":"info","ts":"2021-09-03T14:10:31.875+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 9"}
{"level":"info","ts":"2021-09-03T14:10:31.875+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 9"}
{"level":"info","ts":"2021-09-03T14:10:31.876+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] ignored MsgVote from 93ccda9956d988f4 [logterm: 2, index: 16] at term 2: lease is not expired (remaining ticks: 2)"}
{"level":"warn","ts":"2021-09-03T14:10:31.991+0800","caller":"etcdserver/v3_server.go:815","msg":"waiting for ReadIndex response took too long, retrying","sent-request-id":9868648654751733279,"retry-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:32.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 9"}
{"level":"info","ts":"2021-09-03T14:10:32.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.375+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 2, index: 16] sent MsgVote request to fdc3b7b4fd563384 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.376+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [term: 2] received a MsgVote message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:10:32.376+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.376+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 0, index: 0, vote: 0] cast MsgVote for 93ccda9956d988f4 [logterm: 2, index: 16] at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.376+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 lost leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from fdc3b7b4fd563384 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 10"}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:10:32.377+0800","caller":"etcdserver/util.go:166","msg":"apply request took too long","took":"5.7922553s","expected-duration":"100ms","prefix":"read-only range ","request":"key:\"/electors/leader/prophet-leader\" ","response":"","error":"etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","caller":"traceutil/trace.go:171","msg":"trace[1535384505] range","detail":"{range_begin:/electors/leader/prophet-leader; range_end:; }","duration":"5.7923079s","start":"2021-09-03T14:10:26.585+0800","end":"2021-09-03T14:10:32.377+0800","steps":["trace[1535384505] 'agreement among raft nodes before linearized reading'  (duration: 5.7922548s)"],"step_count":1}
{"level":"info","ts":"2021-09-03T14:10:32.377+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 elected leader 93ccda9956d988f4 at term 10"}
{"level":"warn","ts":"2021-09-03T14:10:32.377+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:26.585+0800","time spent":"5.7923465s","remote":"127.0.0.1:46538","response type":"/etcdserverpb.KV/Range","request count":0,"request size":33,"response count":0,"response size":0,"request content":"key:\"/electors/leader/prophet-leader\" "}
{"level":"warn","ts":"2021-09-03T14:10:32.377+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc88c0/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: leader changed"}
{"level":"info","ts":"2021-09-03T14:10:32.378+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:32.378+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"fdc3b7b4fd563384","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:32.378+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"fdc3b7b4fd563384","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:32.378+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 switched to configuration voters=(10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:32.379+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"fdc3b7b4fd563384","added-peer-id":"fdc3b7b4fd563384","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:32.381+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"fdc3b7b4fd563384","local-member-attributes":"{Name:node-1 ClientURLs:[http://127.0.0.1:40001]}","request-path":"/0/members/fdc3b7b4fd563384/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:32.381144 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40001]
{"level":"info","ts":"2021-09-03T14:10:32.381+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:32.381+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40001"}
2021/09/03 14:10:32.382899 [info] prophet: start system time monitor 
2021/09/03 14:10:32.383380 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:32.383396 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:32.383401 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:32.383433 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:32.383442 [info] prophet: client read loop started 
2021/09/03 14:10:32.383437 [info] prophet: client started
2021/09/03 14:10:32.383471 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:32.383480 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:32.383498 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10001" clientAddr:"127.0.0.1:20001" labels:<key:"c" value:"1" > startTime:1630649432 deployPath:"not set" 
2021/09/03 14:10:32.383510 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:32.383528 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:32.383533 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:32.383690 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:32.383754 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:32.383764 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:32.402032 [warning] prophet: read /electors/leader/prophet-leader from etcd is too slow, cost 5.8167419s
2021/09/03 14:10:32.402044 [info] prophet: [prophet-leader/node-0]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:32.402046 [warning] prophet: [prophet-leader/node-0]/loop: matched, resign and campaign again
2021/09/03 14:10:32.403494 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:32.403505 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:32.404922 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:32.406054 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:32.406069 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:32.407250 [info] prophet: load 1 containers, cost 1.087ms
2021/09/03 14:10:32.407649 [info] prophet: load 1 resources, cost 386.4µs
2021/09/03 14:10:32.408437 [info] prophet: watcher notifier stopped
2021/09/03 14:10:32.408451 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:32.408445 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:32.408839 [info] prophet: load 0 jobs
2021/09/03 14:10:32.484213 [info] [raftstore]: create local store with id 5
2021/09/03 14:10:32.485033 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:10:32.487612 [info] prophet: container 5 limit added
2021/09/03 14:10:32.487699 [info] [raftstore]: prophet started
2021/09/03 14:10:32.487739 [info] prophet: container 5 heartbeat stream binded
2021/09/03 14:10:32.487770 [info] [raftstore]: start listen at 127.0.0.1:10001 for raft
2021/09/03 14:10:32.487796 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:32.487798 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:32.487803 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:32.487805 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:32.487806 [info] [raftstore]: shards started
2021/09/03 14:10:32.487807 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:32.487814 [info] [raftstore]: start listen at 127.0.0.1:20001 for client
2021/09/03 14:10:32.487831 [info] [raftstore]: router started
2021/09/03 14:10:32.487859 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:32.487943 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:32.487960 [info] [raftstore]: router event loop task started
2021/09/03 14:10:32.487962 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:32.488034 [info] prophet: new watcher 127.0.0.1:46170 added
2021/09/03 14:10:32.488144 [info] [raftstore]: start init event
2021/09/03 14:10:32.489228 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:32.489242 [info] [raftstore]: begin to start prophet
{"level":"warn","ts":"2021-09-03T14:10:32.490+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:409994238fda685b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:32.490+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:32.490335 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:32.498892 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:32.499048 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:32.499067 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:32.499155 [info] prophet: new watcher 127.0.0.1:46174 added
2021/09/03 14:10:32.499262 [info] [raftstore]: start init event
2021/09/03 14:10:32.501478 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:32.501550 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:32.501562 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:32.503970 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:32.503987 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:10:32.504019 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:32.504025 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:32.504028 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:32.504037 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:32.504428 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:10:32.504442 [info] prophet: [prophet-leader/node-1]/campaign: start
2021/09/03 14:10:32.505761 [info] prophet: [prophet-leader/node-1]/campaign: grant lease ok
2021/09/03 14:10:32.507774 [info] prophet: [prophet-leader/node-1]/lease: closed
2021/09/03 14:10:32.507788 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with campaign leader failed, other server may campaign ok
{"level":"warn","ts":"2021-09-03T14:10:32.991+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:409994238fda685b RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:32.991+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:32.991198 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:33.492+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:67558ee98ebad6ed RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:33.492+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:33.492441 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:33.993+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:67558ee98ebad6ed RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:33.994+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:33.994101 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:34.494+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:24839cfa4abe1196 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:34.494+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:34.494941 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:34.995+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:24839cfa4abe1196 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:34.995+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:34.995966 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:35.408983 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:35.408999 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:35.410927 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:35.410936 [info] prophet: coordinator starts patrol resources 
{"level":"warn","ts":"2021-09-03T14:10:35.496+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:ea5ca0c7267458fd RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:35.496+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:35.497030 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
2021/09/03 14:10:35.508596 [info] prophet: [prophet-leader/node-1]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:35.508615 [info] prophet: [prophet-leader/node-1]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:35.508619 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:35.508623 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:35.511050 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:10:35.511034 +0800 CST m=+278.749972201, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]), 
2021/09/03 14:10:35.511068 [info] prophet: resource 2 send schedule command, step add learner peer 6 on container 5, source create
2021/09/03 14:10:35.511202 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.511280 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.511400 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:6 containerID:5 role:Learner >  at epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.511427 [info] [raftstore]: shard-2 add learner peer {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:35.511+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3) learners=(6)"}
2021/09/03 14:10:35.511521 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:6}] Context:[10 32 10 16 159 197 212 12 35 123 77 29 172 18 129 133 93 40 197 39 16 2 26 4 8 3 16 1 42 4 8 1 16 1 26 14 8 1 18 10 8 3 18 6 8 6 16 5 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.511543 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.511749 [info] prophet: resource 2 ConfVer changed from 1 to 2
2021/09/03 14:10:35.512178 [info] [transport]: connected to store 5
2021/09/03 14:10:35.512267 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:10:35.512290 [info] [raftstore]: shard 2 peer 6 begin to create at store 5, peers: [], because receive raft message
2021/09/03 14:10:35.512317 [info] [raftstore]: shard 2 peer 6 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.512334 [info] [raftstore]: shard 2 peer 6 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:35.512336 [info] [raftstore]: shard 2 peer 6 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:10:35.512+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:35.512+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:35.512+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:10:35.512373 [info] [raftstore]: shard 2 peer 6 delegate register completed
2021/09/03 14:10:35.512377 [info] [raftstore]: shard 2 peer 6 added, epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:10:35.512+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:35.512+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 6"}
2021/09/03 14:10:35.512420 [info] [raftstore]: shard 2 peer 6 ********become follower now********
2021/09/03 14:10:35.513813 [info] prophet: resource 2 send schedule command, step promote learner peer 6 on container 5 to voter, source heartbeat
2021/09/03 14:10:35.513909 [info] [raftstore]: shard-2 AddNode peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.513956 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.514015 [info] [transport]: connected to store 1
2021/09/03 14:10:35.514015 [info] [raftstore]: shard 2 do apply change peer peer:<id:6 containerID:5 >  at epoch {ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.514056 [info] [raftstore]: shard-2 add peer {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:35.514+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6)"}
2021/09/03 14:10:35.514142 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:6}] Context:[10 32 10 16 107 143 34 89 103 165 73 203 130 15 198 152 245 38 129 154 16 2 26 4 8 3 16 1 42 4 8 2 16 1 26 10 8 1 18 6 18 4 8 6 16 5]} with changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.514157 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:35.514267 [info] prophet: resource 2 ConfVer changed from 2 to 3
2021/09/03 14:10:35.514384 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:35.514603 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:3 version:1 > term=<6> index=<8> 
2021/09/03 14:10:35.515290 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [5]} (kind:resource,replica, resource:2(1,1), createAt:2021-09-03 14:10:35.511034 +0800 CST m=+278.749972201, startAt:2021-09-03 14:10:35.5110628 +0800 CST m=+278.750001001, currentStep:2, steps:[add learner peer 6 on container 5, promote learner peer 6 on container 5 to voter]) finished) finish, takes 4.2146ms, 
2021/09/03 14:10:35.521800 [info] prophet: [prophet-leader/node-1]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:35.569108 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:3 version:1 > term=<6> index=<8>
2021/09/03 14:10:35.569257 [info] [transport]: connected to store 5
2021/09/03 14:10:35.569257 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:3 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > > from:<id:3 containerID:1 > to:<id:6 containerID:5 role:Learner > term:6 index:8 >,size=<124>
2021/09/03 14:10:35.569343 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:10:35.569363 [info] [transport]: shard 2 pending snap sent succ, size=<124>, epoch=<confVer:3 version:1 > term=<6> index=<8>
{"level":"info","ts":"2021-09-03T14:10:35.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:35.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6)"}
{"level":"info","ts":"2021-09-03T14:10:35.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8, lastindex: 8, lastterm: 6] restored snapshot [index: 8, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:35.569+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 [commit: 8] restored snapshot [index: 8, term: 6]"}
2021/09/03 14:10:35.569479 [info] [raftstore]: shard 2 peer 6 receiving snapshot, skip further handling
2021/09/03 14:10:35.769276 [info] [raftstore]: shard 2 peer 6 received a snapshot at 8
2021/09/03 14:10:35.769295 [info] [raftstore]: shard 2 peer 6 begin to apply snapshot
2021/09/03 14:10:35.769303 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:10:35.769313 [info] [raftstore]: shard 2 peer 6 apply snapshot state completed, apply state {AppliedIndex:8 TruncatedState:{Index:8 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:35.769336 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:10:35.769540 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:35.769575 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:2 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:6 ContainerID:5 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:35.769639 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-1/snapshots/2_6_8.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:2 version:1 > peers:<id:6 containerID:5 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:8 
2021/09/03 14:10:35.769693 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:8}
{"level":"warn","ts":"2021-09-03T14:10:35.997+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:ea5ca0c7267458fd RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:35.997+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:35.997925 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"warn","ts":"2021-09-03T14:10:36.498+0800","caller":"etcdserver/server.go:1585","msg":"rejecting member add request; local member has not been connected to all peers, reconfigure breaks active quorum","local-member-id":"93ccda9956d988f4","requested-member-add":"{ID:6ad048df39a96b62 RaftAttributes:{PeerURLs:[http://127.0.0.1:50002] IsLearner:false} Attributes:{Name: ClientURLs:[]}}","error":"etcdserver: unhealthy cluster"}
{"level":"warn","ts":"2021-09-03T14:10:36.498+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc007338000/#initially=[http://127.0.0.1:40000]","attempt":0,"error":"rpc error: code = Unavailable desc = etcdserver: unhealthy cluster"}
2021/09/03 14:10:36.498389 [error] prophet: add member to embed etcd failed with etcdserver: unhealthy cluster, retry later
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(7696731886758488930 10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 switched to configuration voters=(7696731886758488930 10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"fdc3b7b4fd563384","added-peer-id":"6ad048df39a96b62","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"6ad048df39a96b62","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"etcdserver/server.go:1905","msg":"applied a configuration change through raft","local-member-id":"93ccda9956d988f4","raft-conf-change":"ConfChangeAddNode","raft-conf-change-node-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
2021/09/03 14:10:37.000849 [info] prophet: node-2 added into embed etcd cluster with resp &{Header:cluster_id:7659178650554194991 member_id:10650127570946328820 raft_term:10  Member:ID:7696731886758488930 peerURLs:"http://127.0.0.1:50002"  Members:[ID:7696731886758488930 peerURLs:"http://127.0.0.1:50002"  ID:10650127570946328820 name:"node-0" peerURLs:"http://127.0.0.1:50000" clientURLs:"http://127.0.0.1:40000"  ID:18285660900026626948 name:"node-1" peerURLs:"http://127.0.0.1:50001" clientURLs:"http://127.0.0.1:40001" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
{"level":"info","ts":"2021-09-03T14:10:37.000+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40002"]}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-2","data-dir":"/tmp/cube/node-2/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-2/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000,node-1=http://127.0.0.1:50001,node-2=http://127.0.0.1:50002","initial-cluster-state":"existing","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62","remote-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.001+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.003+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-2/prophet/member/snap/db","took":"1.5055ms"}
{"level":"info","ts":"2021-09-03T14:10:37.006+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"6ad048df39a96b62","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:37.006+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:37.006+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:37.006+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6ad048df39a96b62 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"warn","ts":"2021-09-03T14:10:37.008+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:37.010+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/transport.go:286","msg":"added new remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4","remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/peer.go:133","msg":"starting remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.012+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/pipeline.go:72","msg":"started HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"6ad048df39a96b62","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.013+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"93ccda9956d988f4","to":"6ad048df39a96b62","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:37.014+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.014+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:169","msg":"started stream writer with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/peer.go:137","msg":"started remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:395","msg":"started stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/transport.go:317","msg":"added remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384","remote-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"6ad048df39a96b62","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"etcdserver/server.go:744","msg":"starting initial election tick advance","election-ticks":5}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"fdc3b7b4fd563384","to":"6ad048df39a96b62","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.016+0800","caller":"rafthttp/peer_status.go:53","msg":"peer became active","peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"fdc3b7b4fd563384","to":"6ad048df39a96b62","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"6ad048df39a96b62","initial-advertise-peer-urls":["http://127.0.0.1:50002"],"listen-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"],"listen-client-urls":["http://127.0.0.1:40002"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [term: 0] received a MsgHeartbeat message with higher term from 93ccda9956d988f4 [term: 10]"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became follower at term 10"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 elected leader 93ccda9956d988f4 at term 10"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6ad048df39a96b62","to":"fdc3b7b4fd563384","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6ad048df39a96b62","to":"fdc3b7b4fd563384","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.017+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.019+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:37.019+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6ad048df39a96b62","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:37.019+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"6ad048df39a96b62","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:37.019+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 switched to configuration voters=(10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:37.019+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6ad048df39a96b62","added-peer-id":"fdc3b7b4fd563384","added-peer-peer-urls":["http://127.0.0.1:50001"]}
{"level":"info","ts":"2021-09-03T14:10:37.020+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 switched to configuration voters=(7696731886758488930 10650127570946328820 18285660900026626948)"}
{"level":"info","ts":"2021-09-03T14:10:37.020+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"6ad048df39a96b62","added-peer-id":"6ad048df39a96b62","added-peer-peer-urls":["http://127.0.0.1:50002"]}
{"level":"info","ts":"2021-09-03T14:10:37.021+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"6ad048df39a96b62","local-member-attributes":"{Name:node-2 ClientURLs:[http://127.0.0.1:40002]}","request-path":"/0/members/6ad048df39a96b62/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:37.021+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
2021/09/03 14:10:37.021453 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40002]
{"level":"info","ts":"2021-09-03T14:10:37.021+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40002"}
2021/09/03 14:10:37.023197 [info] prophet: start system time monitor 
2021/09/03 14:10:37.023666 [info] prophet: [prophet-leader/node-2]/loop: current leader is [涕Ӷnode-0127.0.0.1:30000]
2021/09/03 14:10:37.023679 [info] prophet: [prophet-leader/node-2]/loop: start watch leader 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:37.023683 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:37.023705 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:37.023744 [info] prophet: client read loop started 
2021/09/03 14:10:37.023760 [info] prophet: client started
2021/09/03 14:10:37.023763 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:37.023765 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:37.023767 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:37.023767 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:37.023790 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10002" clientAddr:"127.0.0.1:20002" labels:<key:"c" value:"2" > startTime:1630649437 deployPath:"not set" 
2021/09/03 14:10:37.023802 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:37.023938 [info] [raftstore]: create local store with id 7
2021/09/03 14:10:37.024397 [info] [raftstore]: the cluster already bootstrap: true
2021/09/03 14:10:37.026954 [info] prophet: container 7 limit added
2021/09/03 14:10:37.027057 [info] [raftstore]: prophet started
2021/09/03 14:10:37.027106 [info] [raftstore]: start listen at 127.0.0.1:10002 for raft
2021/09/03 14:10:37.027125 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:37.027127 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:37.027131 [info] [raftstore]: starts with 0 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:37.027132 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:37.027133 [info] [raftstore]: shards started
2021/09/03 14:10:37.027135 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:37.027139 [info] [raftstore]: start listen at 127.0.0.1:20002 for client
2021/09/03 14:10:37.027149 [info] [raftstore]: router started
2021/09/03 14:10:37.027058 [info] prophet: container 7 heartbeat stream binded
2021/09/03 14:10:37.027197 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:37.027240 [info] [raftstore]: router event loop task started
2021/09/03 14:10:37.027269 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:37.027271 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:37.027323 [info] prophet: new watcher 127.0.0.1:46234 added
2021/09/03 14:10:37.027418 [info] [raftstore]: start init event
{"level":"info","ts":"2021-09-03T14:10:37.067+0800","caller":"etcdserver/server.go:767","msg":"initialized peer connections; fast-forwarding election ticks","local-member-id":"6ad048df39a96b62","forward-ticks":3,"forward-duration":"300ms","election-ticks":5,"election-timeout":"500ms","active-remote-members":2}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6ad048df39a96b62","to":"93ccda9956d988f4","stream-type":"stream Message"}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:249","msg":"set message encoder","from":"6ad048df39a96b62","to":"93ccda9956d988f4","stream-type":"stream MsgApp v2"}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:412","msg":"established TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.101+0800","caller":"rafthttp/stream.go:274","msg":"established TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:37.110527 [info] prophet: [prophet-leader/node-2]/watch: leader updated to 涕Ӷnode-0127.0.0.1:30000
2021/09/03 14:10:37.121148 [info] prophet: resource 2 add operator add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:10:37.121119 +0800 CST m=+280.360057201, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]), 
2021/09/03 14:10:37.121168 [info] prophet: resource 2 send schedule command, step add learner peer 8 on container 7, source create
2021/09/03 14:10:37.121267 [info] [raftstore]: shard-2 AddLearnerNode peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.121336 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.121748 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.121778 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:37.121+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:10:37.121842 [info] [raftstore]: shard 2 do apply change peer changeType:AddLearnerNode peer:<id:8 containerID:7 role:Learner >  at epoch {ConfVer:3 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.121859 [info] [raftstore]: shard-2 add learner peer {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.121877 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddLearnerNode NodeID:8}] Context:[10 32 10 16 85 34 125 213 2 248 75 166 168 145 161 39 23 55 140 104 16 2 26 4 8 3 16 1 42 4 8 3 16 1 26 14 8 1 18 10 8 3 18 6 8 8 16 7 24 1]} with changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.121896 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:37.121+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6) learners=(8)"}
2021/09/03 14:10:37.121958 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddLearnerNode Peer:{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.122107 [info] prophet: resource 2 ConfVer changed from 3 to 4
2021/09/03 14:10:37.123073 [info] [transport]: connected to store 7
2021/09/03 14:10:37.123108 [info] prophet: resource 2 send schedule command, step promote learner peer 8 on container 7 to voter, source heartbeat
2021/09/03 14:10:37.123146 [info] [raftstore]: shard 2 target peer doesn't exist, peer=<{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> message=<MsgApp>
2021/09/03 14:10:37.123175 [info] [raftstore]: shard 2 peer 8 begin to create at store 7, peers: [], because receive raft message
2021/09/03 14:10:37.123200 [info] [raftstore]: shard 2 peer 8 init with raft local state {HardState:{Term:0 Vote:0 Commit:0} LastIndex:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.123216 [info] [raftstore]: shard-2 AddNode peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.123221 [info] [raftstore]: shard 2 peer 8 init raft apply state, state=<{AppliedIndex:0 TruncatedState:{Index:0 Term:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.123225 [info] [raftstore]: shard 2 peer 8 init last term, last term=<0>
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=()"}
2021/09/03 14:10:37.123253 [info] [raftstore]: shard-2 propose conf change peer [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 8 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
2021/09/03 14:10:37.123323 [info] [raftstore]: shard 2 peer 8 delegate register completed
2021/09/03 14:10:37.123329 [info] [raftstore]: shard 2 peer 8 added, epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [term: 0] received a MsgHeartbeat message with higher term from 3 [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became follower at term 6"}
2021/09/03 14:10:37.123383 [info] [raftstore]: shard 2 peer 8 ********become follower now********
2021/09/03 14:10:37.123446 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.123469 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.123496 [info] [raftstore]: shard 2 do apply change peer peer:<id:8 containerID:7 >  at epoch {ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.123521 [info] [raftstore]: shard-2 add peer {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} successfully, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:10:37.123+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3 6 8)"}
2021/09/03 14:10:37.123583 [info] [raftstore]: shard 2 peer 6 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.123597 [info] [raftstore]: shard 2 notify pd with {Transition:ConfChangeTransitionAuto Changes:[{Type:ConfChangeAddNode NodeID:8}] Context:[10 32 10 16 73 116 215 19 58 49 71 103 185 157 81 12 217 181 194 67 16 2 26 4 8 3 16 1 42 4 8 4 16 1 26 10 8 1 18 6 18 4 8 8 16 7]} with changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.123616 [info] [raftstore]: shard 2 peer 3 applied changes [{ChangeType:AddNode Peer:{ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] at epoch {ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, new peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.123752 [info] prophet: resource 2 ConfVer changed from 4 to 5
2021/09/03 14:10:37.123936 [info] [transport]: connected to store 1
2021/09/03 14:10:37.124135 [info] [raftstore]: shard 2 start snapshot, epoch=<{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.124454 [info] [raftstore]: shard 2 snapshot created, epoch=<confVer:5 version:1 > term=<6> index=<10> 
2021/09/03 14:10:37.124872 [info] prophet: resource 2 operator(add-rule-peer {add peer: container [7]} (kind:resource,replica, resource:2(1,3), createAt:2021-09-03 14:10:37.121119 +0800 CST m=+280.360057201, startAt:2021-09-03 14:10:37.1211615 +0800 CST m=+280.360099701, currentStep:2, steps:[add learner peer 8 on container 7, promote learner peer 8 on container 7 to voter]) finished) finish, takes 3.6936ms, 
2021/09/03 14:10:37.129401 [info] prophet: resource 9 created with peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}]
2021/09/03 14:10:37.130891 [info] [raftstore]: shard 9 peer 11 begin to create at store 7, peers: [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:37.130911 [info] [raftstore]: shard 9 peer 10 begin to create at store 5, peers: [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:37.130917 [info] [raftstore]: shard 9 peer 12 begin to create at store 1, peers: [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because event
2021/09/03 14:10:37.130934 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:7 > peers:<id:12 containerID:1 > unique:"abc" 
2021/09/03 14:10:37.130936 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:7 > peers:<id:12 containerID:1 > unique:"abc" 
2021/09/03 14:10:37.130938 [info] [raftstore]: create init shard id:9 start:"b" end:"c" epoch:<confVer:3 > state:WaittingCreate peers:<id:10 containerID:5 > peers:<id:11 containerID:7 > peers:<id:12 containerID:1 > unique:"abc" 
2021/09/03 14:10:37.130962 [info] [raftstore]: shard 9 peer 10 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.130963 [info] [raftstore]: shard 9 peer 12 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.130967 [info] [raftstore]: shard 9 peer 10 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.130968 [info] [raftstore]: shard 9 peer 12 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.130968 [info] [raftstore]: shard 9 peer 10 init last term, last term=<5>
2021/09/03 14:10:37.130969 [info] [raftstore]: shard 9 peer 12 init last term, last term=<5>
2021/09/03 14:10:37.130970 [info] [raftstore]: shard 9 peer 11 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.130976 [info] [raftstore]: shard 9 peer 11 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
{"level":"info","ts":"2021-09-03T14:10:37.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"a switched to configuration voters=(10 11 12)"}
2021/09/03 14:10:37.130989 [info] [raftstore]: shard 9 peer 11 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:37.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"c switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft c [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:37.131059 [info] [raftstore]: shard 9 peer 12 delegate register completed
2021/09/03 14:10:37.131068 [info] [raftstore]: shard 9 peer 12 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
{"level":"info","ts":"2021-09-03T14:10:37.130+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft a [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:37.131105 [info] [raftstore]: shard 9 peer 10 delegate register completed
2021/09/03 14:10:37.131111 [info] [raftstore]: shard 9 peer 10 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:37.131112 [info] [raftstore]: shard 9 peer 10 try to campaign leader, because first peer of dynamically created
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from a at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to b at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgPreVote request to c at term 5"}
2021/09/03 14:10:37.131141 [info] [raftstore]: shard 9 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"b switched to configuration voters=(10 11 12)"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft b [peers: [a,b,c], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:37.131214 [info] [raftstore]: shard 9 peer 11 delegate register completed
2021/09/03 14:10:37.131230 [info] [raftstore]: shard 9 peer 11 added, epoch {ConfVer:3 Version:0 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:10 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:11 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:12 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:37.131741 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgPreVote for a [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgPreVote for a [logterm: 5, index: 5] at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgPreVoteResp from c at term 5"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgPreVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"a [logterm: 5, index: 5] sent MsgVote request to c at term 6"}
2021/09/03 14:10:37.131936 [info] [raftstore]: shard 9 peer 10 ********become follower now********
{"level":"info","ts":"2021-09-03T14:10:37.131+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [term: 5] received a MsgVote message with higher term from a [term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"c became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"c [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 5, index: 5, vote: 0] cast MsgVote for a [logterm: 5, index: 5] at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"a received MsgVoteResp from c at term 6"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"a has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:37.132+0800","caller":"etcdserver/zap_raft.go:77","msg":"a became leader at term 6"}
2021/09/03 14:10:37.132124 [info] [raftstore]: shard 9 peer 10 ********become leader now********
2021/09/03 14:10:37.132182 [info] [raftstore]: shard 9 peer 11 ********become follower now********
2021/09/03 14:10:37.132216 [info] [raftstore]: shard 9 peer 12 ********become follower now********
2021/09/03 14:10:37.132329 [info] [transport]: connected to store 5
2021/09/03 14:10:37.169274 [info] [transport]: shard 2 start send pending snap, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:10:37.169416 [info] [transport]: connected to store 7
{"level":"info","ts":"2021-09-03T14:10:37.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"log [committed=0, applied=0, unstable.offset=1, len(unstable.Entries)=0] starts to restore snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:37.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 switched to configuration voters=(3 6 8)"}
{"level":"info","ts":"2021-09-03T14:10:37.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10, lastindex: 10, lastterm: 6] restored snapshot [index: 10, term: 6]"}
{"level":"info","ts":"2021-09-03T14:10:37.169+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [commit: 10] restored snapshot [index: 10, term: 6]"}
2021/09/03 14:10:37.169663 [info] [raftstore]: shard 2 peer 8 receiving snapshot, skip further handling
2021/09/03 14:10:37.169697 [info] [raftstore]: shard 2 try to send snap, header=<shard:<id:2 start:"a" end:"b" epoch:<confVer:5 version:1 > peers:<id:3 containerID:1 > peers:<id:6 containerID:5 > peers:<id:8 containerID:7 > > from:<id:3 containerID:1 > to:<id:8 containerID:7 role:Learner > term:6 index:10 >,size=<126>
2021/09/03 14:10:37.169764 [info] [raftstore]: shard 2 send snap complete
2021/09/03 14:10:37.169788 [info] [transport]: shard 2 pending snap sent succ, size=<126>, epoch=<confVer:5 version:1 > term=<6> index=<10>
2021/09/03 14:10:37.232230 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:37.232316 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46176->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:37.232330 [error] prophet: client read loop stopped
2021/09/03 14:10:37.233536 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:37.233572 [info] prophet: [prophet-leader/node-2]/watch: leader deleted
{"level":"info","ts":"2021-09-03T14:10:37.233+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:37.233602 [info] prophet: ********node-2 become to follower now********
2021/09/03 14:10:37.233674 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:37.233678 [info] prophet: [prophet-leader/node-2]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:37.233621 [info] prophet: [prophet-leader/node-1]/watch: leader deleted
2021/09/03 14:10:37.233647 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:37.233650 [info] prophet: drive push operator has been stopped 
2021/09/03 14:10:37.233651 [info] prophet: coordinator is stopping
2021/09/03 14:10:37.233750 [info] prophet: coordinator has been stopped
2021/09/03 14:10:37.233655 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:37.233764 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:37.233768 [info] prophet: watcher notifer exited
2021/09/03 14:10:37.233658 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:37.233665 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:37.233776 [info] prophet: metrics are reset
2021/09/03 14:10:37.233780 [info] prophet: background jobs has been stopped
2021/09/03 14:10:37.233785 [info] prophet: ********node-1 become to follower now********
2021/09/03 14:10:37.233791 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:37.233796 [info] prophet: [prophet-leader/node-1]/loop: leader 涕Ӷnode-0127.0.0.1:30000 was out
2021/09/03 14:10:37.233829 [info] prophet: watcher notifier stopped
2021/09/03 14:10:37.233844 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:37.233845 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:37.233854 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:37.233830 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:37.233860 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:37.233837 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:37.233864 [error] prophet: reset watcher conn failed with <nil>, retry later
2021/09/03 14:10:37.234182 [info] prophet: [prophet-leader/node-2]/campaign: load expect leader: []
2021/09/03 14:10:37.234197 [info] prophet: [prophet-leader/node-2]/campaign: start
2021/09/03 14:10:37.234298 [info] prophet: [prophet-leader/node-1]/campaign: load expect leader: []
2021/09/03 14:10:37.234311 [info] prophet: [prophet-leader/node-1]/campaign: start
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4","transferee-member-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term 10] starts to transfer leadership to fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 sent MsgTimeoutNow to fdc3b7b4fd563384 after received MsgAppResp"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [term 10] received MsgTimeoutNow from 93ccda9956d988f4 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 is starting a new election at term 10"}
2021/09/03 14:10:37.235438 [info] prophet: [prophet-leader/node-2]/campaign: grant lease ok
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became candidate at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 received MsgVoteResp from fdc3b7b4fd563384 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 10, index: 43] sent MsgVote request to 6ad048df39a96b62 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 10, index: 43] sent MsgVote request to 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.235+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [term: 10] received a MsgVote message with higher term from fdc3b7b4fd563384 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 [logterm: 10, index: 43, vote: 0] cast MsgVote for fdc3b7b4fd563384 [logterm: 10, index: 43] at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [term: 10] received a MsgVote message with higher term from fdc3b7b4fd563384 [term: 11]"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became follower at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 10, index: 43, vote: 0] cast MsgVote for fdc3b7b4fd563384 [logterm: 10, index: 43] at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.236+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 lost leader 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 received MsgVoteResp from 93ccda9956d988f4 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became leader at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 elected leader fdc3b7b4fd563384 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 elected leader fdc3b7b4fd563384 at term 11"}
{"level":"info","ts":"2021-09-03T14:10:37.237+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader fdc3b7b4fd563384 at term 11"}
2021/09/03 14:10:37.284645 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.333906 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"93ccda9956d988f4","old-leader-member-id":"93ccda9956d988f4","new-leader-member-id":"fdc3b7b4fd563384","took":"100.953ms"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"6ad048df39a96b62","error":"failed to read 6ad048df39a96b62 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:37.336+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"fdc3b7b4fd563384","error":"failed to read fdc3b7b4fd563384 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"93ccda9956d988f4","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"6ad048df39a96b62","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"6ad048df39a96b62","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"fdc3b7b4fd563384","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"93ccda9956d988f4","remote-peer-id-stream-handler":"93ccda9956d988f4","remote-peer-id-from":"fdc3b7b4fd563384","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node 6ad048df39a96b62)"}
{"level":"warn","ts":"2021-09-03T14:10:37.337+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"93ccda9956d988f4","error":"failed to dial 93ccda9956d988f4 on stream Message (peer 93ccda9956d988f4 failed to find local node fdc3b7b4fd563384)"}
{"level":"info","ts":"2021-09-03T14:10:37.338+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
2021/09/03 14:10:37.369358 [info] [raftstore]: shard 2 peer 8 received a snapshot at 10
2021/09/03 14:10:37.369373 [info] [raftstore]: shard 2 peer 8 begin to apply snapshot
2021/09/03 14:10:37.369381 [info] [raftstore]: shard 2 clear 0 meta keys and 0 raft keys
2021/09/03 14:10:37.369391 [info] [raftstore]: shard 2 peer 8 apply snapshot state completed, apply state {AppliedIndex:10 TruncatedState:{Index:10 Term:6 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:37.369402 [info] [raftstore]: shard 2 begin apply snapshot data
2021/09/03 14:10:37.369617 [info] [raftstore]: shard 2 delete exists snap gz file /tmp/cube/node-2/snapshots/2_6_10.gz, header is shard:<id:2 start:"a" end:"b" epoch:<confVer:4 version:1 > peers:<id:8 containerID:7 role:Learner > peers:<id:3 containerID:1 > > from:<> to:<> term:6 index:10 
2021/09/03 14:10:37.369621 [info] [raftstore]: shard 2 snapshot is applied, shard=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.369672 [info] [raftstore]: shard 2 shard changed after apply snapshot, from=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:4 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:8 ContainerID:7 Role:Learner XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}> to=<{ID:2 Start:[97] End:[98] Epoch:{ConfVer:5 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} State:Running Peers:[{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:6 ContainerID:5 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} {ID:8 ContainerID:7 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}] DisableSplit:false Group:0 Unique: RuleGroups:[] Data:[] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:37.369674 [info] [raftstore]: shard 2 apply snapshot data complete, {Term:6 Vote:0 Commit:10}
2021/09/03 14:10:37.385527 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.484676 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.484771 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:37.585040 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.684915 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:37.695+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:37.785084 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.885066 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:37.985067 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.085232 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.184577 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.284604 [error] [raftstore]: shard 2 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:38.338+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:38.338+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:38.339008 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:38.339032 [info] [transport]: transfer stopped
2021/09/03 14:10:38.339034 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:38.339036 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:38.339039 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:38.339042 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:38.339044 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:38.339050 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:38.339043 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339050 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339056 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339055 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339059 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339058 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:38.339065 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:38.339077 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:10:38.339079 [info] [raftstore]: store 5 begin to stop
2021/09/03 14:10:38.339047 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339049 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:38.339055 [info] [transport]: send raft worker stopped
2021/09/03 14:10:38.339057 [info] [transport]: send snapshot worker stopped
{"level":"warn","ts":"2021-09-03T14:10:38.340+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"23.7µs","request":"header:<ID:3712227964137883157 > lease_revoke:<id:0000000000000000>","response":"size:27","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:10:38.340+0800","caller":"etcdserver/util.go:123","msg":"failed to apply request","took":"12.8µs","request":"header:<ID:3712227964137883157 > lease_revoke:<id:0000000000000000>","response":"size:26","error":"lease not found"}
{"level":"warn","ts":"2021-09-03T14:10:38.340+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029dfc00/#initially=[http://127.0.0.1:40001]","attempt":0,"error":"rpc error: code = NotFound desc = etcdserver: requested lease not found"}
2021/09/03 14:10:38.340446 [info] prophet: [prophet-leader/node-1]/lease: close failed with etcdserver: requested lease not found
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
{"level":"warn","ts":"2021-09-03T14:10:38.340+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc0029dfc00/#initially=[http://127.0.0.1:40001]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:38.340525 [error] prophet: [prophet-leader/node-1]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:10:38.340+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:37.234+0800","time spent":"1.1061538s","remote":"127.0.0.1:43304","response type":"/etcdserverpb.Lease/LeaseGrant","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","caller":"etcdserver/server.go:1398","msg":"leadership transfer starting","local-member-id":"fdc3b7b4fd563384","current-leader-member-id":"fdc3b7b4fd563384","transferee-member-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [term 11] starts to transfer leadership to 6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 sends MsgTimeoutNow to 6ad048df39a96b62 immediately as 6ad048df39a96b62 already has up-to-date log"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [term 11] received MsgTimeoutNow from fdc3b7b4fd563384 and starts an election to get leadership."}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 is starting a new election at term 11"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became candidate at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 received MsgVoteResp from 6ad048df39a96b62 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 11, index: 45] sent MsgVote request to 93ccda9956d988f4 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 11, index: 45] sent MsgVote request to fdc3b7b4fd563384 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.340+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 lost leader fdc3b7b4fd563384 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [term: 11] received a MsgVote message with higher term from 6ad048df39a96b62 [term: 12]"}
{"level":"info","ts":"2021-09-03T14:10:38.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"fdc3b7b4fd563384 [logterm: 11, index: 45, vote: 0] cast MsgVote for 6ad048df39a96b62 [logterm: 11, index: 45] at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.341+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 lost leader fdc3b7b4fd563384 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.342+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 received MsgVoteResp from fdc3b7b4fd563384 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.342+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 has received 2 MsgVoteResp votes and 0 vote rejections"}
{"level":"info","ts":"2021-09-03T14:10:38.342+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became leader at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.342+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 elected leader 6ad048df39a96b62 at term 12"}
{"level":"info","ts":"2021-09-03T14:10:38.342+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: fdc3b7b4fd563384 elected leader 6ad048df39a96b62 at term 12"}
{"level":"warn","ts":"2021-09-03T14:10:38.342+0800","caller":"etcdserver/cluster_util.go:288","msg":"failed to reach the peer URL","address":"http://127.0.0.1:50000/version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
{"level":"warn","ts":"2021-09-03T14:10:38.342+0800","caller":"etcdserver/cluster_util.go:155","msg":"failed to get version","remote-member-id":"93ccda9956d988f4","error":"Get \"http://127.0.0.1:50000/version\": dial tcp 127.0.0.1:50000: connect: connection refused"}
2021/09/03 14:10:38.434538 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"etcdserver/server.go:1415","msg":"leadership transfer finished","local-member-id":"fdc3b7b4fd563384","old-leader-member-id":"fdc3b7b4fd563384","new-leader-member-id":"6ad048df39a96b62","took":"100.5717ms"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384","error":"EOF"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384","error":"EOF"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62","error":"context canceled"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"6ad048df39a96b62","error":"failed to read 6ad048df39a96b62 on stream MsgApp v2 (context canceled)"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"warn","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:421","msg":"lost TCP streaming connection with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62","error":"context canceled"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"6ad048df39a96b62"}
{"level":"info","ts":"2021-09-03T14:10:38.441+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"fdc3b7b4fd563384","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"fdc3b7b4fd563384","remote-peer-id-stream-handler":"fdc3b7b4fd563384","remote-peer-id-from":"6ad048df39a96b62","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/http.go:413","msg":"failed to find remote peer in cluster","local-member-id":"fdc3b7b4fd563384","remote-peer-id-stream-handler":"fdc3b7b4fd563384","remote-peer-id-from":"6ad048df39a96b62","cluster-id":"6a4ade671189dc2f"}
{"level":"warn","ts":"2021-09-03T14:10:38.442+0800","caller":"rafthttp/peer_status.go:66","msg":"peer became inactive (message send to peer failed)","peer-id":"fdc3b7b4fd563384","error":"failed to dial fdc3b7b4fd563384 on stream MsgApp v2 (peer fdc3b7b4fd563384 failed to find local node 6ad048df39a96b62)"}
{"level":"info","ts":"2021-09-03T14:10:38.444+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50001"}
2021/09/03 14:10:38.491292 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:10:38.491310 [error] prophet: client read loop stopped
2021/09/03 14:10:38.491327 [error] prophet: container 5 heartbeat failed with client is closed
2021/09/03 14:10:38.491332 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:38.491382 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.491550 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:38.588745 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:38.606+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
2021/09/03 14:10:38.688588 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:38.706+0800","caller":"rafthttp/stream.go:223","msg":"lost TCP streaming connection with remote peer","stream-writer-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
2021/09/03 14:10:38.788824 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.888572 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:38.988245 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:39.088102 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:39.188156 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
2021/09/03 14:10:39.288050 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"warn","ts":"2021-09-03T14:10:39.307+0800","logger":"raft","caller":"etcdserver/zap_raft.go:85","msg":"6ad048df39a96b62 stepped down to follower since quorum is not active"}
{"level":"info","ts":"2021-09-03T14:10:39.307+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became follower at term 12"}
{"level":"info","ts":"2021-09-03T14:10:39.307+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 6ad048df39a96b62 lost leader 6ad048df39a96b62 at term 12"}
2021/09/03 14:10:39.387939 [error] [raftstore]: shard 9 heartbeat to prophet failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:39.444+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50001"}
{"level":"info","ts":"2021-09-03T14:10:39.444+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-1","data-dir":"/tmp/cube/node-1/prophet","advertise-peer-urls":["http://127.0.0.1:50001"],"advertise-client-urls":["http://127.0.0.1:40001"]}
2021/09/03 14:10:39.444366 [info] [raftstore]: store 5 pd stopped
2021/09/03 14:10:39.444384 [info] [transport]: transfer stopped
2021/09/03 14:10:39.444386 [info] [raftstore]: store 5 transport stopped
2021/09/03 14:10:39.444388 [info] [raftstore]: store 5 all shards stopped
2021/09/03 14:10:39.444391 [info] [raftstore]: store 5 all snapshot manager stopped
2021/09/03 14:10:39.444397 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:39.444402 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:39.444404 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:39.444408 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444409 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444410 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444412 [info] [transport]: send raft worker stopped
2021/09/03 14:10:39.444414 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:39.444417 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444413 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444419 [info] [raftstore]: store 5 task runner stopped
2021/09/03 14:10:39.444421 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444421 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444418 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:39.444430 [info] [raftstore]: store 5 rpc stopped
2021/09/03 14:10:39.444469 [info] [raftstore]: store 7 begin to stop
2021/09/03 14:10:39.631815 [error] prophet: reset leader connection failed with client is closed
2021/09/03 14:10:39.631848 [error] prophet: client read loop stopped
2021/09/03 14:10:39.631867 [error] prophet: container 7 heartbeat failed with client is closed
2021/09/03 14:10:39.631872 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:39.632114 [error] [raftstore]: send store heartbeat failed with client is closed
2021/09/03 14:10:39.638479 [error] prophet: reset watcher conn failed with client is closed, retry later
{"level":"info","ts":"2021-09-03T14:10:39.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:39.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:39.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 received MsgPreVoteResp from 8 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:39.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:39.819+0800","caller":"etcdserver/zap_raft.go:77","msg":"8 [logterm: 6, index: 10] sent MsgPreVote request to 6 at term 6"}
2021/09/03 14:10:39.819726 [info] [raftstore]: shard 2 peer 8 ********become follower now********
{"level":"info","ts":"2021-09-03T14:10:39.907+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 is starting a new election at term 12"}
{"level":"info","ts":"2021-09-03T14:10:39.907+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became candidate at term 13"}
{"level":"info","ts":"2021-09-03T14:10:39.907+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 received MsgVoteResp from 6ad048df39a96b62 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:39.907+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 12, index: 46] sent MsgVote request to 93ccda9956d988f4 at term 13"}
{"level":"info","ts":"2021-09-03T14:10:39.907+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 12, index: 46] sent MsgVote request to fdc3b7b4fd563384 at term 13"}
2021/09/03 14:10:40.028034 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:40.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:40.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:40.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:40.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6] sent MsgPreVote request to a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:40.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6] sent MsgPreVote request to c at term 6"}
2021/09/03 14:10:40.319292 [info] [raftstore]: shard 9 peer 11 ********become follower now********
{"level":"info","ts":"2021-09-03T14:10:40.407+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 is starting a new election at term 13"}
{"level":"info","ts":"2021-09-03T14:10:40.407+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 became candidate at term 14"}
{"level":"info","ts":"2021-09-03T14:10:40.407+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 received MsgVoteResp from 6ad048df39a96b62 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:40.407+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 12, index: 46] sent MsgVote request to 93ccda9956d988f4 at term 14"}
{"level":"info","ts":"2021-09-03T14:10:40.407+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"6ad048df39a96b62 [logterm: 12, index: 46] sent MsgVote request to fdc3b7b4fd563384 at term 14"}
{"level":"warn","ts":"2021-09-03T14:10:40.444+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:39.444+0800","time spent":"1.0002569s","remote":"127.0.0.1:57510","response type":"/etcdserverpb.Lease/LeaseRevoke","request count":-1,"request size":-1,"response count":-1,"response size":-1,"request content":""}
{"level":"warn","ts":"2021-09-03T14:10:40.445+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = DeadlineExceeded desc = context deadline exceeded"}
2021/09/03 14:10:40.445047 [info] prophet: [prophet-leader/node-2]/lease: close failed with context deadline exceeded
{"level":"info","ts":"2021-09-03T14:10:40.445+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
{"level":"warn","ts":"2021-09-03T14:10:40.445+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:40.445216 [warning] prophet: txn runs too slow, resp=<<nil>> cost=<3.2097585s> errors context canceled
{"level":"warn","ts":"2021-09-03T14:10:40.445+0800","logger":"etcd-client","caller":"v3/retry_interceptor.go:62","msg":"retrying of unary invoker failed","target":"etcd-endpoints://0xc008fc8000/#initially=[http://127.0.0.1:40002]","attempt":0,"error":"rpc error: code = Canceled desc = context canceled"}
2021/09/03 14:10:40.445266 [info] prophet: [prophet-leader/node-2]/lease: close failed with context canceled
2021/09/03 14:10:40.445269 [error] prophet: [prophet-leader/node-2]/loop: campaign leader failed with context canceled
{"level":"warn","ts":"2021-09-03T14:10:40.445+0800","caller":"v3rpc/interceptor.go:197","msg":"request stats","start time":"2021-09-03T14:10:37.235+0800","time spent":"3.2096212s","remote":"127.0.0.1:57510","response type":"/etcdserverpb.KV/Txn","request count":0,"request size":0,"response count":0,"response size":0,"request content":""}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"etcdserver/server.go:1429","msg":"skipped leadership transfer; local server is not leader","local-member-id":"6ad048df39a96b62","current-leader-member-id":"0"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"warn","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/peer.go:330","msg":"stopping remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"warn","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:286","msg":"closed TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream MsgApp v2","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:294","msg":"stopped TCP streaming connection with remote peer","stream-writer-type":"stream Message","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/pipeline.go:85","msg":"stopped HTTP pipelining with remote peer","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.446+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream MsgApp v2","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.447+0800","caller":"rafthttp/stream.go:442","msg":"stopped stream reader with remote peer","stream-reader-type":"stream Message","local-member-id":"6ad048df39a96b62","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.447+0800","caller":"rafthttp/peer.go:335","msg":"stopped remote peer","remote-peer-id":"fdc3b7b4fd563384"}
{"level":"info","ts":"2021-09-03T14:10:40.448+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50002"}
2021/09/03 14:10:41.027874 [error] [raftstore]: send store heartbeat failed with client is closed
{"level":"info","ts":"2021-09-03T14:10:41.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b received MsgPreVoteResp from b at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6] sent MsgPreVote request to a at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.319+0800","caller":"etcdserver/zap_raft.go:77","msg":"b [logterm: 6, index: 6] sent MsgPreVote request to c at term 6"}
2021/09/03 14:10:41.341372 [info] prophet: [prophet-leader/node-1]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:41.448+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50002"}
{"level":"info","ts":"2021-09-03T14:10:41.448+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-2","data-dir":"/tmp/cube/node-2/prophet","advertise-peer-urls":["http://127.0.0.1:50002"],"advertise-client-urls":["http://127.0.0.1:40002"]}
2021/09/03 14:10:41.448942 [info] [raftstore]: store 7 pd stopped
2021/09/03 14:10:41.448969 [info] [transport]: transfer stopped
2021/09/03 14:10:41.448971 [info] [raftstore]: store 7 transport stopped
2021/09/03 14:10:41.448972 [info] [raftstore]: store 7 all shards stopped
2021/09/03 14:10:41.448978 [info] [raftstore]: store 7 all snapshot manager stopped
2021/09/03 14:10:41.448981 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448983 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:41.448988 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:41.448992 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448993 [info] [transport]: send raft worker stopped
2021/09/03 14:10:41.448987 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448995 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448998 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:41.449000 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:41.449002 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448990 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.449003 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.448994 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:41.449002 [info] [raftstore]: store 7 task runner stopped
2021/09/03 14:10:41.449037 [info] [raftstore]: store 7 rpc stopped
--- PASS: TestSpeedupAddShard (16.30s)
=== RUN   TestIssue166
{"level":"info","ts":"2021-09-03T14:10:41.455+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:41.455+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:41.455+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:41.455+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:41.457+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.6614ms"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:41.460+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:41.462+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:41.463+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:41.466+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:41.661+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:41.662+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
{"level":"info","ts":"2021-09-03T14:10:41.662+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:41.662+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:41.668+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:41.669+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 switched to configuration voters=(6)"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 6 [peers: [6], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgPreVoteResp from 6 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 received MsgVoteResp from 6 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:42.673+0800","caller":"etcdserver/zap_raft.go:77","msg":"6 became leader at term 6"}
2021/09/03 14:10:43.678434 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46574->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:43.678455 [error] prophet: client read loop stopped
2021/09/03 14:10:43.678933 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
{"level":"info","ts":"2021-09-03T14:10:43.678+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:43.679009 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:43.679015 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:43.680+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:43.681+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.683+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.683+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
--- PASS: TestIssue166 (2.23s)
=== RUN   TestIssue180
2021/09/03 14:10:43.683516 [info] prophet: prophet logger set
2021/09/03 14:10:43.689848 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:43.703795 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:43.703811 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:43.703795 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:43.703+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:43.704+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:43.704+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:43.704+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":false,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"node-0=http://127.0.0.1:50000","initial-cluster-state":"new","initial-cluster-token":"etcd-cluster","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:43.705+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"1.537ms"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","caller":"etcdserver/raft.go:448","msg":"starting local member","local-member-id":"93ccda9956d988f4","cluster-id":"6a4ade671189dc2f"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 0"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 1"}
{"level":"info","ts":"2021-09-03T14:10:43.708+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"warn","ts":"2021-09-03T14:10:43.710+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:43.712+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":1}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"etcdserver/server.go:843","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-version":"to_be_decided"}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.714+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
2021/09/03 14:10:43.780047 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 1"}
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 2"}
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 2"}
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 2"}
{"level":"info","ts":"2021-09-03T14:10:43.909+0800","caller":"etcdserver/server.go:2476","msg":"setting up initial cluster version using v2 API","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:43.910+0800","caller":"membership/cluster.go:531","msg":"set initial cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:43.910+0800","caller":"etcdserver/server.go:2500","msg":"cluster version is updated","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:43.910+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:43.910451 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:43.910+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:43.910+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:43.912134 [info] prophet: start system time monitor 
2021/09/03 14:10:43.912670 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:43.912901 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:43.912912 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:43.913247 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:43.913705 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:43.913727 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:43.914122 [info] prophet: load 0 containers, cost 256.9µs
2021/09/03 14:10:43.914332 [info] prophet: load 0 resources, cost 196.7µs
2021/09/03 14:10:43.915064 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:43.915132 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:43.915143 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:43.915145 [info] prophet: client started
2021/09/03 14:10:43.915148 [info] prophet: coordinator has finished cluster information preparation 
2021/09/03 14:10:43.915148 [info] prophet: client read loop started 
2021/09/03 14:10:43.915149 [info] prophet: coordinator starts to run schedulers 
2021/09/03 14:10:43.915155 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:43.915150 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:43.915212 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:43.915229 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649443 deployPath:"not set" 
2021/09/03 14:10:43.915239 [info] [raftstore]: begin to create local store metadata
2021/09/03 14:10:43.915505 [info] prophet: load 0 jobs
2021/09/03 14:10:43.915830 [info] [raftstore]: create local store with id 1
2021/09/03 14:10:43.916382 [info] prophet: coordinator begins to actively drive push operator 
2021/09/03 14:10:43.916405 [info] prophet: coordinator starts patrol resources 
2021/09/03 14:10:43.916384 [info] [raftstore]: the cluster already bootstrap: false
2021/09/03 14:10:43.916415 [info] [raftstore]: begin to bootstrap the cluster with init shards
2021/09/03 14:10:43.916631 [info] [raftstore]: create init shard id:2 epoch:<confVer:1 version:1 > peers:<id:3 containerID:1 > 
2021/09/03 14:10:43.919205 [info] prophet: container 1 limit added
2021/09/03 14:10:43.919252 [info] [raftstore]: prophet started
2021/09/03 14:10:43.919289 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:43.919310 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:43.919313 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:43.919339 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:43.919369 [info] prophet: container 1 heartbeat stream binded
2021/09/03 14:10:43.919393 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:5 Vote:0 Commit:5} LastIndex:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:43.919407 [info] [raftstore]: shard 2 change init applied index from 5 to 5
2021/09/03 14:10:43.919410 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:5 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:43.919411 [info] [raftstore]: shard 2 peer 3 init last term, last term=<5>
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 5"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 5, commit: 5, applied: 5, lastindex: 5, lastterm: 5]"}
2021/09/03 14:10:43.919459 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:43.919463 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:43.919465 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 5"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 5"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 5"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:43.919+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 6"}
2021/09/03 14:10:43.919499 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:43.919500 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:43.919501 [info] [raftstore]: shards started
2021/09/03 14:10:43.919503 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:43.919510 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:43.919518 [info] [raftstore]: router started
2021/09/03 14:10:43.919540 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:43.919561 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:43.919562 [info] [raftstore]: router event loop task started
2021/09/03 14:10:43.919640 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:43.919644 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:43.919714 [info] prophet: new watcher 127.0.0.1:46588 added
2021/09/03 14:10:43.919769 [info] [raftstore]: start init event
2021/09/03 14:10:43.925475 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:43.925548 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46586->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:43.925560 [error] prophet: client read loop stopped
2021/09/03 14:10:43.925790 [info] prophet: [prophet-leader/node-0]/lease: closed
2021/09/03 14:10:43.925834 [info] prophet: patrol resources has been stopped 
2021/09/03 14:10:43.925854 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:43.925861 [info] prophet: coordinator is stopping
2021/09/03 14:10:43.925841 [info] prophet: drive push operator has been stopped 
{"level":"info","ts":"2021-09-03T14:10:43.925+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:43.925868 [info] prophet: coordinator has been stopped
2021/09/03 14:10:43.925848 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:43.925888 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:43.925890 [info] prophet: watcher notifer exited
2021/09/03 14:10:43.925873 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:43.925899 [info] prophet: metrics are reset
2021/09/03 14:10:43.925914 [info] prophet: background jobs has been stopped
2021/09/03 14:10:43.925945 [info] prophet: watcher notifier stopped
2021/09/03 14:10:43.925966 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:43.925946 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:43.925970 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:43.927+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:43.929+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.930+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.930+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:43.930457 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:43.930475 [info] [transport]: transfer stopped
2021/09/03 14:10:43.930477 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:43.930478 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:43.930481 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:43.930489 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:43.930489 [info] [raftstore]: handle resource heartbeat resp task stopped
2021/09/03 14:10:43.930493 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930496 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930497 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:43.930499 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930498 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930501 [info] [transport]: send raft worker stopped
2021/09/03 14:10:43.930489 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930503 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930504 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930505 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:43.930506 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:43.930511 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:43.930528 [info] [raftstore]: store 1 rpc stopped
2021/09/03 14:10:43.932861 [info] prophet: prophet logger set
2021/09/03 14:10:43.938285 [warning] [raftstore]: ########## adjust Raft.TickInterval from 100ms to 100ms, because current fsync on current fs is 10ms
2021/09/03 14:10:43.951872 [info] [raftstore]: begin start raftstore
2021/09/03 14:10:43.951883 [info] [raftstore]: begin to start prophet
2021/09/03 14:10:43.951919 [info] [raftstore]: start scan gc snap files
{"level":"info","ts":"2021-09-03T14:10:43.951+0800","caller":"embed/etcd.go:131","msg":"configuring peer listeners","listen-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:43.951+0800","caller":"embed/etcd.go:139","msg":"configuring client listeners","listen-client-urls":["http://127.0.0.1:40000"]}
{"level":"info","ts":"2021-09-03T14:10:43.951+0800","caller":"embed/etcd.go:598","msg":"pprof is enabled","path":"/debug/pprof"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"embed/etcd.go:307","msg":"starting an etcd server","etcd-version":"3.5.0","git-sha":"Not provided (use ./build instead of go build)","go-version":"go1.16.3","go-os":"linux","go-arch":"amd64","max-cpu-set":24,"max-cpu-available":24,"member-initialized":true,"name":"node-0","data-dir":"/tmp/cube/node-0/prophet","wal-dir":"","wal-dir-dedicated":"","member-dir":"/tmp/cube/node-0/prophet/member","force-new-cluster":false,"heartbeat-interval":"100ms","election-timeout":"500ms","initial-election-tick-advance":true,"snapshot-count":100000,"snapshot-catchup-entries":5000,"initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[],"cors":["*"],"host-whitelist":["*"],"initial-cluster":"","initial-cluster-state":"new","initial-cluster-token":"","quota-size-bytes":8589934592,"pre-vote":false,"initial-corrupt-check":false,"corrupt-check-time-interval":"0s","auto-compaction-mode":"periodic","auto-compaction-retention":"1h0m0s","auto-compaction-interval":"1h0m0s","discovery-url":"","discovery-proxy":"","downgrade-check-interval":"5s"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"etcdserver/backend.go:81","msg":"opened backend db","path":"/tmp/cube/node-0/prophet/member/snap/db","took":"69.4µs"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"etcdserver/server.go:526","msg":"No snapshot found. Recovering WAL from scratch!"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"etcdserver/raft.go:483","msg":"restarting local member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","commit-index":16}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=()"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became follower at term 2"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 93ccda9956d988f4 [peers: [], term: 2, commit: 16, applied: 0, lastindex: 16, lastterm: 2]"}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"membership/cluster.go:276","msg":"recovered/added member from store","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","recovered-remote-peer-id":"93ccda9956d988f4","recovered-remote-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:43.952+0800","caller":"membership/cluster.go:285","msg":"set cluster version from store","cluster-version":"3.5"}
{"level":"warn","ts":"2021-09-03T14:10:43.953+0800","caller":"auth/store.go:1220","msg":"simple token is not cryptographically signed"}
{"level":"info","ts":"2021-09-03T14:10:43.954+0800","caller":"mvcc/kvstore.go:415","msg":"kvstore restored","current-rev":12}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"etcdserver/server.go:834","msg":"starting etcd server","local-member-id":"93ccda9956d988f4","local-server-version":"3.5.0","cluster-id":"6a4ade671189dc2f","cluster-version":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"etcdserver/server.go:728","msg":"started as single-node; fast-forwarding election ticks","local-member-id":"93ccda9956d988f4","forward-ticks":4,"forward-duration":"400ms","election-ticks":5,"election-timeout":"500ms"}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 switched to configuration voters=(10650127570946328820)"}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"membership/cluster.go:393","msg":"added member","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","added-peer-id":"93ccda9956d988f4","added-peer-peer-urls":["http://127.0.0.1:50000"]}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"membership/cluster.go:523","msg":"updated cluster version","cluster-id":"6a4ade671189dc2f","local-member-id":"93ccda9956d988f4","from":"3.5","to":"3.5"}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"embed/etcd.go:276","msg":"now serving peer/client/metrics","local-member-id":"93ccda9956d988f4","initial-advertise-peer-urls":["http://127.0.0.1:50000"],"listen-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"],"listen-client-urls":["http://127.0.0.1:40000"],"listen-metrics-urls":[]}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"embed/etcd.go:580","msg":"serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:43.955+0800","caller":"embed/etcd.go:552","msg":"cmux::serve","address":"127.0.0.1:50000"}
2021/09/03 14:10:44.026112 [info] prophet: [prophet-leader/node-0]/loop: exit
{"level":"info","ts":"2021-09-03T14:10:44.253+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 is starting a new election at term 2"}
{"level":"info","ts":"2021-09-03T14:10:44.253+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became candidate at term 3"}
{"level":"info","ts":"2021-09-03T14:10:44.253+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 received MsgVoteResp from 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:10:44.253+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"93ccda9956d988f4 became leader at term 3"}
{"level":"info","ts":"2021-09-03T14:10:44.253+0800","logger":"raft","caller":"etcdserver/zap_raft.go:77","msg":"raft.node: 93ccda9956d988f4 elected leader 93ccda9956d988f4 at term 3"}
{"level":"info","ts":"2021-09-03T14:10:44.255+0800","caller":"etcdserver/server.go:2027","msg":"published local member to cluster through raft","local-member-id":"93ccda9956d988f4","local-member-attributes":"{Name:node-0 ClientURLs:[http://127.0.0.1:40000]}","request-path":"/0/members/93ccda9956d988f4/attributes","cluster-id":"6a4ade671189dc2f","publish-timeout":"6s"}
2021/09/03 14:10:44.255086 [info] prophet: create etcd v3 client with endpoints [http://127.0.0.1:40000]
{"level":"info","ts":"2021-09-03T14:10:44.255+0800","caller":"embed/serve.go:98","msg":"ready to serve client requests"}
{"level":"info","ts":"2021-09-03T14:10:44.255+0800","caller":"embed/serve.go:140","msg":"serving client traffic insecurely; this is strongly discouraged!","address":"127.0.0.1:40000"}
2021/09/03 14:10:44.256415 [info] prophet: start system time monitor 
2021/09/03 14:10:44.256625 [info] prophet: [prophet-leader/node-0]/loop: current leader is []
2021/09/03 14:10:44.256804 [info] prophet: [prophet-leader/node-0]/campaign: load expect leader: []
2021/09/03 14:10:44.256818 [info] prophet: [prophet-leader/node-0]/campaign: start
2021/09/03 14:10:44.257063 [info] prophet: [prophet-leader/node-0]/campaign: grant lease ok
2021/09/03 14:10:44.257650 [info] prophet: [prophet-leader/node-0]/campaign: completed, start keepalive
2021/09/03 14:10:44.257665 [info] prophet: ********node-0 become to leader now********
2021/09/03 14:10:44.258510 [info] prophet: load 1 containers, cost 735.6µs
2021/09/03 14:10:44.258713 [info] prophet: load 1 resources, cost 183.6µs
2021/09/03 14:10:44.259121 [info] prophet: coordinator starts to collect cluster information 
2021/09/03 14:10:44.259135 [info] prophet: client read loop started 
2021/09/03 14:10:44.259126 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:44.259128 [info] prophet: client started
2021/09/03 14:10:44.259206 [info] [raftstore]: *********Become prophet leader*********
2021/09/03 14:10:44.259215 [info] [raftstore]: begin to bootstrap the cluster
2021/09/03 14:10:44.259230 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:44.259244 [info] prophet: client read loop actived, ready to read from leader
2021/09/03 14:10:44.259235 [info] [raftstore]: raftstore init with store raftAddr:"127.0.0.1:10000" clientAddr:"127.0.0.1:20000" labels:<key:"c" value:"0" > startTime:1630649444 deployPath:"not set" 
2021/09/03 14:10:44.259337 [info] [raftstore]: load local store 1
2021/09/03 14:10:44.259357 [info] [raftstore]: prophet started
2021/09/03 14:10:44.259390 [info] [raftstore]: start listen at 127.0.0.1:10000 for raft
2021/09/03 14:10:44.259409 [info] [raftstore]: raft worker 0/0 start
2021/09/03 14:10:44.259411 [info] [raftstore]: raft shards workers started
2021/09/03 14:10:44.259435 [info] [raftstore]: shard 2 peer 3 begin to create at store 1, peers: [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], because bootstrap
2021/09/03 14:10:44.259468 [info] [raftstore]: shard 2 peer 3 init with raft local state {HardState:{Term:6 Vote:3 Commit:7} LastIndex:7 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}
2021/09/03 14:10:44.259479 [info] prophet: load 0 jobs
2021/09/03 14:10:44.259481 [info] [raftstore]: shard 2 change init applied index from 7 to 6
2021/09/03 14:10:44.259486 [info] [raftstore]: shard 2 peer 3 init raft apply state, state=<{AppliedIndex:6 TruncatedState:{Index:5 Term:5 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}>
2021/09/03 14:10:44.259489 [info] [raftstore]: shard 2 peer 3 init last term, last term=<6>
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 switched to configuration voters=(3)"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became follower at term 6"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"newRaft 3 [peers: [3], term: 6, commit: 7, applied: 6, lastindex: 7, lastterm: 6]"}
2021/09/03 14:10:44.259546 [info] [raftstore]: shard 2 peer 3 delegate register completed
2021/09/03 14:10:44.259559 [info] [raftstore]: shard 2 peer 3 added, epoch {ConfVer:1 Version:1 XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}, peers [{ID:3 ContainerID:1 Role:Voter XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0}], raft worker 0, apply worker apply-0-0
2021/09/03 14:10:44.259560 [info] [raftstore]: shard 2 peer 3 try to campaign leader, because only self
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 is starting a new election at term 6"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became pre-candidate at term 6"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgPreVoteResp from 3 at term 6"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became candidate at term 7"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 received MsgVoteResp from 3 at term 7"}
{"level":"info","ts":"2021-09-03T14:10:44.259+0800","caller":"etcdserver/zap_raft.go:77","msg":"3 became leader at term 7"}
2021/09/03 14:10:44.259602 [info] [raftstore]: starts with 1 shards, including 0 tombstones and 0 applying shards
2021/09/03 14:10:44.259612 [info] [raftstore]: cleanup possible garbage data complete
2021/09/03 14:10:44.259613 [info] [raftstore]: shards started
2021/09/03 14:10:44.259614 [info] [raftstore]: shard timer based tasks started
2021/09/03 14:10:44.259622 [info] [raftstore]: start listen at 127.0.0.1:20000 for client
2021/09/03 14:10:44.259631 [info] [raftstore]: router started
2021/09/03 14:10:44.259687 [info] prophet: client start init connection to leader 127.0.0.1:30000
2021/09/03 14:10:44.259707 [info] [raftstore]: shard 2 peer 3 ********become leader now********
2021/09/03 14:10:44.259761 [info] prophet: client start connect to leader 127.0.0.1:30000
2021/09/03 14:10:44.259771 [info] prophet: watcher init leader connection 127.0.0.1:30000 succeed
2021/09/03 14:10:44.259782 [info] [raftstore]: router event loop task started
2021/09/03 14:10:44.259840 [info] prophet: new watcher 127.0.0.1:46600 added
2021/09/03 14:10:44.259921 [info] [raftstore]: start init event
2021/09/03 14:10:44.263447 [info] [raftstore]: store 1 begin to stop
2021/09/03 14:10:44.263496 [error] prophet: client read resp from leader 127.0.0.1:30000 failed with read tcp 127.0.0.1:46598->127.0.0.1:30000: use of closed network connection
2021/09/03 14:10:44.263499 [error] prophet: client read loop stopped
2021/09/03 14:10:44.263796 [info] prophet: [prophet-leader/node-0]/lease: closed
{"level":"info","ts":"2021-09-03T14:10:44.263+0800","caller":"embed/etcd.go:367","msg":"closing etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:44.263855 [error] prophet: [prophet-leader/node-0]/lease: keep lease exit
2021/09/03 14:10:44.263868 [info] prophet: [prophet-leader/node-0]/lease: exit with context done
2021/09/03 14:10:44.263874 [info] prophet: coordinator stops running 
2021/09/03 14:10:44.263919 [info] prophet: coordinator is stopping
2021/09/03 14:10:44.263921 [info] prophet: coordinator has been stopped
2021/09/03 14:10:44.263876 [info] prophet: [prophet-leader/node-0]/keepalive: exit with context done
2021/09/03 14:10:44.263929 [info] prophet: ********node-0 become to follower now********
2021/09/03 14:10:44.263931 [info] prophet: watcher notifer exited
2021/09/03 14:10:44.263938 [info] prophet: metrics are reset
2021/09/03 14:10:44.263940 [info] prophet: background jobs has been stopped
2021/09/03 14:10:44.263979 [info] prophet: watcher notifier stopped
2021/09/03 14:10:44.263993 [info] [raftstore]: *********Become prophet follower*********
2021/09/03 14:10:44.263987 [error] prophet: watcher read events failed with EOF
2021/09/03 14:10:44.263998 [error] prophet: reset watcher conn failed with <nil>, retry later
{"level":"info","ts":"2021-09-03T14:10:44.265+0800","caller":"etcdserver/server.go:1438","msg":"skipped leadership transfer for single voting member cluster","local-member-id":"93ccda9956d988f4","current-leader-member-id":"93ccda9956d988f4"}
{"level":"info","ts":"2021-09-03T14:10:44.267+0800","caller":"embed/etcd.go:562","msg":"stopping serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:44.268+0800","caller":"embed/etcd.go:567","msg":"stopped serving peer traffic","address":"127.0.0.1:50000"}
{"level":"info","ts":"2021-09-03T14:10:44.268+0800","caller":"embed/etcd.go:369","msg":"closed etcd server","name":"node-0","data-dir":"/tmp/cube/node-0/prophet","advertise-peer-urls":["http://127.0.0.1:50000"],"advertise-client-urls":["http://127.0.0.1:40000"]}
2021/09/03 14:10:44.268423 [info] [raftstore]: store 1 pd stopped
2021/09/03 14:10:44.268445 [info] [transport]: transfer stopped
2021/09/03 14:10:44.268446 [info] [raftstore]: store 1 transport stopped
2021/09/03 14:10:44.268448 [info] [raftstore]: store 1 all shards stopped
2021/09/03 14:10:44.268452 [info] [raftstore]: store 1 all snapshot manager stopped
2021/09/03 14:10:44.268455 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268461 [info] [raftstore]: raft worker worker 0/0 exit
2021/09/03 14:10:44.268464 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268467 [info] [raftstore]: timer based tasks stopped
2021/09/03 14:10:44.268468 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268470 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268469 [info] [transport]: send raft worker stopped
2021/09/03 14:10:44.268476 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268472 [info] [raftstore]: router event loop task stopped
2021/09/03 14:10:44.268481 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268483 [info] [raftstore]: store 1 task runner stopped
2021/09/03 14:10:44.268484 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268488 [info] [transport]: send snapshot worker stopped
2021/09/03 14:10:44.268494 [info] [raftstore]: store 1 rpc stopped
--- PASS: TestIssue180 (0.59s)
=== RUN   TestIsEpochStale
--- PASS: TestIsEpochStale (0.00s)
=== RUN   TestFindPeer
--- PASS: TestFindPeer (0.00s)
=== RUN   TestRemovePeer
--- PASS: TestRemovePeer (0.00s)
=== RUN   TestRemovedPeers
--- PASS: TestRemovedPeers (0.00s)
PASS
ok  	github.com/matrixorigin/matrixcube/raftstore	287.516s
